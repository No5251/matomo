(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t(require("CoreHome"),require("vue"),require("CorePluginsAdmin")):"function"===typeof define&&define.amd?define(["CoreHome",,"CorePluginsAdmin"],t):"object"===typeof exports?exports["UsersManager"]=t(require("CoreHome"),require("vue"),require("CorePluginsAdmin")):e["UsersManager"]=t(e["CoreHome"],e["Vue"],e["CorePluginsAdmin"])})("undefined"!==typeof self?self:this,(function(e,t,s){return function(e){var t={};function s(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,s),r.l=!0,r.exports}return s.m=e,s.c=t,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="plugins/UsersManager/vue/dist/",s(s.s="fae3")}({"19dc":function(t,s){t.exports=e},"8bbf":function(e,s){e.exports=t},a5a2:function(e,t){e.exports=s},fae3:function(e,t,s){"use strict";if(s.r(t),s.d(t,"CapabilitiesEdit",(function(){return k})),s.d(t,"UserPermissionsEdit",(function(){return De})),s.d(t,"UserEditForm",(function(){return kt})),s.d(t,"UserInvite",(function(){return Dt})),s.d(t,"ResendInviteModal",(function(){return Wt})),s.d(t,"PagedUsersList",(function(){return On})),s.d(t,"UsersManager",(function(){return Bn})),s.d(t,"AnonymousSettings",(function(){return Rn})),s.d(t,"NewsletterSettings",(function(){return Fn})),s.d(t,"PersonalSettings",(function(){return Kn})),s.d(t,"AddNewToken",(function(){return gr})),s.d(t,"AddNewTokenSuccess",(function(){return kr})),s.d(t,"UserSecurity",(function(){return Zr})),s.d(t,"UserSettings",(function(){return ia})),"undefined"!==typeof window){var n=window.document.currentScript,r=n&&n.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);r&&(s.p=r[1])}var a=s("8bbf");const i=["title"],o=["onClick"],l={key:0,class:"addCapability"},c={class:"ui-confirm confirmCapabilityToggle modal",ref:"confirmCapabilityToggleModal"},d={class:"modal-content"},u=["innerHTML"],m=["innerHTML"],b={class:"modal-footer"};function p(e,t,s,n,r,p){const h=Object(a["resolveComponent"])("Field");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",{class:Object(a["normalizeClass"])(["capabilitiesEdit",{busy:e.isBusy}])},[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(e.actualCapabilities,t=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",{key:t.id,class:"chip"},[Object(a["createElementVNode"])("span",{class:"capability-name",title:`${t.description} ${e.isIncludedInRole(t)?"<br/><br/>"+e.translate("UsersManager_IncludedInUsersRole"):""}`},Object(a["toDisplayString"])(t.category)+": "+Object(a["toDisplayString"])(t.name),9,i),e.isIncludedInRole(t)?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createElementBlock"])("span",{key:0,class:"icon-close",onClick:s=>{e.capabilityToRemoveId=t.id,e.onToggleCapability(!1)}},null,8,o))]))),128)),e.availableCapabilitiesGrouped.length?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",l,["noaccess"!==e.userRole?(Object(a["openBlock"])(),Object(a["createBlock"])(h,{key:0,"model-value":e.capabilityToAddId,"onUpdate:modelValue":t[0]||(t[0]=t=>{e.capabilityToAddId=t,e.onToggleCapability(!0)}),disabled:e.isBusy,uicontrol:"expandable-select",name:"add_capability","full-width":!0,options:e.availableCapabilitiesGrouped},null,8,["model-value","disabled","options"])):Object(a["createCommentVNode"])("",!0)])):Object(a["createCommentVNode"])("",!0),Object(a["createElementVNode"])("div",c,[Object(a["createElementVNode"])("div",d,[e.isAddingCapability?(Object(a["openBlock"])(),Object(a["createElementBlock"])("h2",{key:0,innerHTML:e.$sanitize(e.confirmAddCapabilityToggleContent)},null,8,u)):Object(a["createCommentVNode"])("",!0),e.isAddingCapability?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createElementBlock"])("h2",{key:1,innerHTML:e.$sanitize(e.confirmCapabilityToggleContent)},null,8,m))]),Object(a["createElementVNode"])("div",b,[Object(a["createElementVNode"])("a",{href:"",class:"modal-action modal-close btn",onClick:t[1]||(t[1]=Object(a["withModifiers"])(t=>e.toggleCapability(),["prevent"]))},Object(a["toDisplayString"])(e.translate("General_Yes")),1),Object(a["createElementVNode"])("a",{href:"",class:"modal-action modal-close modal-no",onClick:t[2]||(t[2]=Object(a["withModifiers"])(t=>{e.capabilityToAddOrRemove=null,e.capabilityToAddId=null,e.capabilityToRemoveId=null},["prevent"]))},Object(a["toDisplayString"])(e.translate("General_No")),1)])],512)],2)}var h=s("19dc"),g=s("a5a2");function O(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}
/*!
 * Matomo - free/libre analytics platform
 *
 * @link    https://matomo.org
 * @license https://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */class j{constructor(){O(this,"privateState",Object(a["reactive"])({isLoading:!1,capabilities:[]})),O(this,"state",Object(a["computed"])(()=>Object(a["readonly"])(this.privateState))),O(this,"capabilities",Object(a["computed"])(()=>this.state.value.capabilities)),O(this,"isLoading",Object(a["computed"])(()=>this.state.value.isLoading)),O(this,"fetchPromise",void 0)}init(){return this.fetchCapabilities()}fetchCapabilities(){return this.fetchPromise||(this.privateState.isLoading=!0,this.fetchPromise=h["AjaxHelper"].fetch({method:"UsersManager.getAvailableCapabilities"}).then(e=>(this.privateState.capabilities=e,this.capabilities.value)).finally(()=>{this.privateState.isLoading=!1})),this.fetchPromise}}var f=new j;const{$:v}=window;var C=Object(a["defineComponent"])({props:{idsite:[String,Number],siteName:{type:String,required:!0},userLogin:{type:String,required:!0},userRole:{type:String,required:!0},capabilities:Array},components:{Field:g["Field"]},data(){return{theCapabilities:this.capabilities||[],isBusy:!1,isAddingCapability:!1,capabilityToAddId:null,capabilityToRemoveId:null,capabilityToAddOrRemove:null}},emits:["change"],watch:{capabilities(e){e&&(this.theCapabilities=e)}},created(){f.init(),this.capabilities?this.theCapabilities=this.capabilities:(this.isBusy=!0,h["AjaxHelper"].fetch({method:"UsersManager.getUsersPlusRole",limit:"1",filter_search:this.userLogin}).then(e=>e&&e.capabilities?e.capabilities:[]).then(e=>{this.theCapabilities=e}).finally(()=>{this.isBusy=!1}))},methods:{onToggleCapability(e){this.isAddingCapability=e;const t=e?this.capabilityToAddId:this.capabilityToRemoveId;this.capabilityToAddOrRemove=null,this.availableCapabilities.forEach(e=>{e.id===t&&(this.capabilityToAddOrRemove=e)}),this.$refs.confirmCapabilityToggleModal&&v(this.$refs.confirmCapabilityToggleModal).modal({dismissible:!1,yes:()=>null}).modal("open")},toggleCapability(){this.isAddingCapability?this.addCapability(this.capabilityToAddOrRemove):this.removeCapability(this.capabilityToAddOrRemove)},isIncludedInRole(e){return-1!==(e.includedInRoles||[]).indexOf(this.userRole)},getCapabilitiesList(){const e=[];return this.availableCapabilities.forEach(t=>{this.isIncludedInRole(t)||this.capabilitiesSet[t.id]&&e.push(t.id)}),e},addCapability(e){this.isBusy=!0,h["AjaxHelper"].post({method:"UsersManager.addCapabilities"},{userLogin:this.userLogin,capabilities:e.id,idSites:this.idsite}).then(()=>{this.$emit("change",this.getCapabilitiesList())}).finally(()=>{this.isBusy=!1,this.capabilityToAddOrRemove=null,this.capabilityToAddId=null,this.capabilityToRemoveId=null})},removeCapability(e){this.isBusy=!0,h["AjaxHelper"].post({method:"UsersManager.removeCapabilities"},{userLogin:this.userLogin,capabilities:e.id,idSites:this.idsite}).then(()=>{this.$emit("change",this.getCapabilitiesList())}).finally(()=>{this.isBusy=!1,this.capabilityToAddOrRemove=null,this.capabilityToAddId=null,this.capabilityToRemoveId=null})}},computed:{availableCapabilities(){return f.capabilities.value},confirmAddCapabilityToggleContent(){return Object(h["translate"])("UsersManager_AreYouSureAddCapability",`<strong>${this.userLogin}</strong>`,`<strong>${this.capabilityToAddOrRemove?this.capabilityToAddOrRemove.name:""}</strong>`,`<strong>${this.siteNameText}</strong>`)},confirmCapabilityToggleContent(){return Object(h["translate"])("UsersManager_AreYouSureRemoveCapability",`<strong>${this.capabilityToAddOrRemove?this.capabilityToAddOrRemove.name:""}</strong>`,`<strong>${this.userLogin}</strong>`,`<strong>${this.siteNameText}</strong>`)},siteNameText(){return h["Matomo"].helper.htmlEntities(this.siteName)},availableCapabilitiesGrouped(){const e=this.availableCapabilities.filter(e=>!this.capabilitiesSet[e.id]).map(e=>({group:e.category,key:e.id,value:e.name,tooltip:e.description}));return e.sort((e,t)=>e.group===t.group?e.value===t.value?0:e.value<t.value?-1:1:e.group<t.group?-1:1),e},capabilitiesSet(){const e={},t=this.theCapabilities;return(t||[]).forEach(t=>{e[t]=!0}),(this.availableCapabilities||[]).forEach(t=>{this.isIncludedInRole(t)&&(e[t.id]=!0)}),e},actualCapabilities(){const{capabilitiesSet:e}=this;return this.availableCapabilities.filter(t=>!!e[t.id])}}});C.render=p;var k=C;const y={key:0,class:"row"},S={class:"row to-all-websites"},N={class:"col s12"},U={style:{"margin-right":"3.5px"}},V={id:"all-sites-access-select",style:{"margin-right":"3.5px"}},E={style:{"margin-top":"18px"}},w={class:"filters row"},T={class:"col s12 m12 l8"},A={class:"input-field bulk-actions",style:{"margin-right":"3.5px"}},M={id:"user-permissions-edit-bulk-actions",class:"dropdown-content"},B={class:"dropdown-trigger","data-target":"user-permissions-bulk-set-access"},_={id:"user-permissions-bulk-set-access",class:"dropdown-content"},x=["onClick"],D={class:"input-field site-filter",style:{"margin-right":"3.5px"}},L=["value","placeholder"],R={class:"input-field access-filter",style:{"margin-right":"3.5px"}},P={key:0,class:"col s12 m12 l4 sites-for-permission-pagination-container"},H={class:"sites-for-permission-pagination"},I={class:"counter"},F=["textContent"],q={class:"roles-help-notification"},z=["innerHTML"],G={class:"capabilities-help-notification"},W={id:"sitesForPermission"},Y={class:"select-cell"},X={class:"checkbox-container"},K=["checked"],J=Object(a["createElementVNode"])("span",null,null,-1),Q={class:"role_header"},Z=["innerHTML"],ee=Object(a["createElementVNode"])("span",{class:"icon-help"},null,-1),te=[ee],se={class:"capabilities_header"},ne=["innerHTML"],re=Object(a["createElementVNode"])("span",{class:"icon-help"},null,-1),ae=[re],ie={key:0,class:"select-all-row"},oe={colspan:"4"},le={key:0},ce=["innerHTML"],de=["innerHTML"],ue={key:1},me=["innerHTML"],be=["innerHTML"],pe={class:"select-cell"},he={class:"checkbox-container"},ge=["id","onUpdate:modelValue"],Oe=Object(a["createElementVNode"])("span",null,null,-1),je={class:"role-select"},fe={class:"delete-access-confirm-modal modal",ref:"deleteAccessConfirmModal"},ve={class:"modal-content"},Ce=["innerHTML"],ke=["innerHTML"],ye={class:"modal-footer"},Se={class:"change-access-confirm-modal modal",ref:"changeAccessConfirmModal"},Ne={class:"modal-content"},Ue=["innerHTML"],Ve=["innerHTML"],Ee={class:"modal-footer"},we={class:"confirm-give-access-all-sites modal",ref:"confirmGiveAccessAllSitesModal"},Te={class:"modal-content"},Ae=["innerHTML"],Me={class:"modal-footer"};function Be(e,t,s,n,r,i){const o=Object(a["resolveComponent"])("Notification"),l=Object(a["resolveComponent"])("Field"),c=Object(a["resolveComponent"])("CapabilitiesEdit"),d=Object(a["resolveDirective"])("dropdown-menu"),u=Object(a["resolveDirective"])("content-table");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",{class:Object(a["normalizeClass"])(["userPermissionsEdit",{loading:e.isLoadingAccess}])},[e.hasAccessToAtLeastOneSite?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",y,[Object(a["createElementVNode"])("div",null,[Object(a["createVNode"])(o,{context:"warning",type:"transient",noclear:!0},{default:Object(a["withCtx"])(()=>[Object(a["createElementVNode"])("strong",null,Object(a["toDisplayString"])(e.translate("General_Warning"))+":",1),Object(a["createTextVNode"])(" "+Object(a["toDisplayString"])(e.translate("UsersManager_NoAccessWarning")),1)]),_:1})])])),Object(a["createElementVNode"])("div",S,[Object(a["createElementVNode"])("div",N,[Object(a["createElementVNode"])("div",null,[Object(a["createElementVNode"])("span",U,Object(a["toDisplayString"])(e.translate("UsersManager_GiveAccessToAll"))+":",1),Object(a["createElementVNode"])("div",V,[Object(a["createVNode"])(l,{modelValue:e.allWebsitesAccssLevelSet,"onUpdate:modelValue":t[0]||(t[0]=t=>e.allWebsitesAccssLevelSet=t),uicontrol:"select",options:e.filteredAccessLevels,"full-width":!0},null,8,["modelValue","options"])]),Object(a["createElementVNode"])("a",{href:"",class:Object(a["normalizeClass"])(["btn",{disabled:e.isGivingAccessToAllSites}]),onClick:t[1]||(t[1]=Object(a["withModifiers"])(t=>e.showChangeAccessAllSitesModal(),["prevent"]))},Object(a["toDisplayString"])(e.translate("General_Apply")),3)]),Object(a["createElementVNode"])("p",E,Object(a["toDisplayString"])(e.translate("UsersManager_OrManageIndividually"))+":",1)])]),Object(a["createElementVNode"])("div",w,[Object(a["createElementVNode"])("div",T,[Object(a["createElementVNode"])("div",A,[Object(a["withDirectives"])((Object(a["openBlock"])(),Object(a["createElementBlock"])("a",{class:Object(a["normalizeClass"])(["dropdown-trigger btn",{disabled:e.isBulkActionsDisabled}]),href:"","data-target":"user-permissions-edit-bulk-actions"},[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.translate("UsersManager_BulkActions")),1)],2)),[[d,{activates:"#user-permissions-edit-bulk-actions"}]]),Object(a["createElementVNode"])("ul",M,[Object(a["createElementVNode"])("li",null,[Object(a["withDirectives"])((Object(a["openBlock"])(),Object(a["createElementBlock"])("a",B,[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.translate("UsersManager_SetPermission")),1)])),[[d,{activates:"#user-permissions-bulk-set-access"}]]),Object(a["createElementVNode"])("ul",_,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(e.filteredAccessLevels,t=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("li",{key:t.key},[Object(a["createElementVNode"])("a",{href:"",onClick:Object(a["withModifiers"])(s=>{e.siteAccessToChange=null,e.roleToChangeTo=t.key,e.showChangeAccessConfirm()},["prevent"])},Object(a["toDisplayString"])(t.value),9,x)]))),128))])]),Object(a["createElementVNode"])("li",null,[Object(a["createElementVNode"])("a",{href:"",onClick:t[2]||(t[2]=Object(a["withModifiers"])(t=>{e.siteAccessToChange=null,e.roleToChangeTo="noaccess",e.showRemoveAccessConfirm()},["prevent"]))},Object(a["toDisplayString"])(e.translate("UsersManager_RemovePermissions")),1)])])]),Object(a["createElementVNode"])("div",D,[Object(a["createElementVNode"])("input",{type:"text",value:e.siteNameFilter,onKeydown:t[3]||(t[3]=t=>{e.onChangeSiteFilter(t)}),onChange:t[4]||(t[4]=t=>{e.onChangeSiteFilter(t)}),placeholder:e.translate("UsersManager_FilterByWebsite")},null,40,L)]),Object(a["createElementVNode"])("div",R,[Object(a["createElementVNode"])("div",null,[Object(a["createVNode"])(l,{modelValue:e.accessLevelFilter,"onUpdate:modelValue":t[5]||(t[5]=t=>e.accessLevelFilter=t),uicontrol:"select",options:e.filteredSelectAccessLevels,"full-width":!0,placeholder:e.translate("UsersManager_FilterByAccess")},null,8,["modelValue","options","placeholder"])])])]),e.totalEntries>e.limit?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",P,[Object(a["createElementVNode"])("div",H,[Object(a["createElementVNode"])("a",{class:Object(a["normalizeClass"])(["prev",{disabled:e.offset<=0}])},[Object(a["createElementVNode"])("span",{class:"pointer",onClick:t[6]||(t[6]=t=>e.gotoPreviousPage())},"« "+Object(a["toDisplayString"])(e.translate("General_Previous")),1)],2),Object(a["createElementVNode"])("span",I,[Object(a["createElementVNode"])("span",{textContent:Object(a["toDisplayString"])(e.paginationText)},null,8,F)]),Object(a["createElementVNode"])("a",{class:Object(a["normalizeClass"])(["next",{disabled:e.offset+e.limit>=e.totalEntries}])},[Object(a["createElementVNode"])("span",{class:"pointer",onClick:t[7]||(t[7]=t=>e.gotoNextPage())},Object(a["toDisplayString"])(e.translate("General_Next"))+" »",1)],2)])])):Object(a["createCommentVNode"])("",!0)]),Object(a["createElementVNode"])("div",q,[e.isRoleHelpToggled?(Object(a["openBlock"])(),Object(a["createBlock"])(o,{key:0,context:"info",type:"persistent",noclear:!0},{default:Object(a["withCtx"])(()=>[Object(a["createElementVNode"])("span",{innerHTML:e.$sanitize(e.rolesHelpText)},null,8,z)]),_:1})):Object(a["createCommentVNode"])("",!0)]),Object(a["createElementVNode"])("div",G,[e.isCapabilitiesHelpToggled?(Object(a["openBlock"])(),Object(a["createBlock"])(o,{key:0,context:"info",type:"persistent",noclear:!0},{default:Object(a["withCtx"])(()=>[Object(a["createElementVNode"])("span",null,Object(a["toDisplayString"])(e.translate("UsersManager_CapabilitiesHelp")),1)]),_:1})):Object(a["createCommentVNode"])("",!0)]),Object(a["withDirectives"])((Object(a["openBlock"])(),Object(a["createElementBlock"])("table",W,[Object(a["createElementVNode"])("thead",null,[Object(a["createElementVNode"])("tr",null,[Object(a["createElementVNode"])("th",Y,[Object(a["createElementVNode"])("span",X,[Object(a["createElementVNode"])("label",null,[Object(a["createElementVNode"])("input",{type:"checkbox",id:"perm_edit_select_all",checked:e.isAllCheckboxSelected,onChange:t[8]||(t[8]=t=>e.onAllCheckboxChange(t))},null,40,K),J])])]),Object(a["createElementVNode"])("th",null,Object(a["toDisplayString"])(e.translate("General_Name")),1),Object(a["createElementVNode"])("th",Q,[Object(a["createElementVNode"])("span",{innerHTML:e.$sanitize(e.translate("UsersManager_Role")+" ")},null,8,Z),Object(a["createElementVNode"])("a",{href:"",class:Object(a["normalizeClass"])(["helpIcon",{sticky:e.isRoleHelpToggled}]),onClick:t[9]||(t[9]=Object(a["withModifiers"])(t=>e.isRoleHelpToggled=!e.isRoleHelpToggled,["prevent"]))},te,2)]),Object(a["createElementVNode"])("th",se,[Object(a["createElementVNode"])("span",{innerHTML:e.$sanitize(e.translate("UsersManager_Capabilities")+" ")},null,8,ne),Object(a["createElementVNode"])("a",{href:"",class:Object(a["normalizeClass"])(["helpIcon",{sticky:e.isCapabilitiesHelpToggled}]),onClick:t[10]||(t[10]=Object(a["withModifiers"])(t=>e.isCapabilitiesHelpToggled=!e.isCapabilitiesHelpToggled,["prevent"]))},ae,2)])])]),Object(a["createElementVNode"])("tbody",null,[e.isAllCheckboxSelected&&e.siteAccess.length<e.totalEntries?(Object(a["openBlock"])(),Object(a["createElementBlock"])("tr",ie,[Object(a["createElementVNode"])("td",oe,[e.areAllResultsSelected?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",le,[Object(a["createElementVNode"])("span",{innerHTML:e.$sanitize(e.theDisplayedWebsitesAreSelectedText),style:{"margin-right":"3.5px"}},null,8,ce),Object(a["createElementVNode"])("a",{href:"#",onClick:t[11]||(t[11]=Object(a["withModifiers"])(t=>e.areAllResultsSelected=!e.areAllResultsSelected,["prevent"])),innerHTML:e.$sanitize(e.clickToSelectAllText)},null,8,de)])),e.areAllResultsSelected?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",ue,[Object(a["createElementVNode"])("span",{innerHTML:e.$sanitize(e.allWebsitesAreSelectedText),style:{"margin-right":"3.5px"}},null,8,me),Object(a["createElementVNode"])("a",{href:"#",onClick:t[12]||(t[12]=Object(a["withModifiers"])(t=>e.areAllResultsSelected=!e.areAllResultsSelected,["prevent"])),innerHTML:e.$sanitize(e.clickToSelectDisplayedWebsitesText)},null,8,be)])):Object(a["createCommentVNode"])("",!0)])])):Object(a["createCommentVNode"])("",!0),(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(e.siteAccess,(s,n)=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("tr",{key:s.idsite},[Object(a["createElementVNode"])("td",pe,[Object(a["createElementVNode"])("span",he,[Object(a["createElementVNode"])("label",null,[Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{type:"checkbox",id:"perm_edit_select_row"+n,"onUpdate:modelValue":t=>e.selectedRows[n]=t,onClick:t[13]||(t[13]=t=>e.onRowSelected())},null,8,ge),[[a["vModelCheckbox"],e.selectedRows[n]]]),Oe])])]),Object(a["createElementVNode"])("td",null,[Object(a["createElementVNode"])("span",null,Object(a["toDisplayString"])(s.site_name),1)]),Object(a["createElementVNode"])("td",null,[Object(a["createElementVNode"])("div",je,[Object(a["createVNode"])(l,{"model-value":s.role,"onUpdate:modelValue":t=>{e.onRoleChange(s,t)},"model-modifiers":{abortable:!0},uicontrol:"select",options:e.filteredAccessLevels,"full-width":!0},null,8,["model-value","onUpdate:modelValue","options"])])]),Object(a["createElementVNode"])("td",null,[Object(a["createElementVNode"])("div",null,[Object(a["createVNode"])(c,{idsite:s.idsite,"site-name":s.site_name,"user-login":e.userLogin,"user-role":s.role,capabilities:s.capabilities,onChange:t[14]||(t[14]=t=>e.fetchAccess())},null,8,["idsite","site-name","user-login","user-role","capabilities"])])])]))),128))])])),[[u]]),Object(a["createElementVNode"])("div",fe,[Object(a["createElementVNode"])("div",ve,[e.siteAccessToChange?(Object(a["openBlock"])(),Object(a["createElementBlock"])("h3",{key:0,innerHTML:e.$sanitize(e.deletePermConfirmSingleText)},null,8,Ce)):Object(a["createCommentVNode"])("",!0),e.siteAccessToChange?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createElementBlock"])("p",{key:1,innerHTML:e.$sanitize(e.deletePermConfirmMultipleText)},null,8,ke))]),Object(a["createElementVNode"])("div",ye,[Object(a["createElementVNode"])("a",{href:"",class:"modal-action modal-close btn",onClick:t[15]||(t[15]=Object(a["withModifiers"])(t=>e.changeUserRole(),["prevent"])),style:{"margin-right":"3.5px"}},Object(a["toDisplayString"])(e.translate("General_Yes")),1),Object(a["createElementVNode"])("a",{href:"",class:"modal-action modal-close modal-no",onClick:t[16]||(t[16]=Object(a["withModifiers"])(t=>{e.siteAccessToChange=null,e.roleToChangeTo=null},["prevent"]))},Object(a["toDisplayString"])(e.translate("General_No")),1)])],512),Object(a["createElementVNode"])("div",Se,[Object(a["createElementVNode"])("div",Ne,[e.siteAccessToChange?(Object(a["openBlock"])(),Object(a["createElementBlock"])("h3",{key:0,innerHTML:e.$sanitize(e.changePermToSiteConfirmSingleText)},null,8,Ue)):Object(a["createCommentVNode"])("",!0),e.siteAccessToChange?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createElementBlock"])("p",{key:1,innerHTML:e.$sanitize(e.changePermToSiteConfirmMultipleText)},null,8,Ve))]),Object(a["createElementVNode"])("div",Ee,[Object(a["createElementVNode"])("a",{href:"",class:"modal-action modal-close btn",onClick:t[17]||(t[17]=Object(a["withModifiers"])(t=>e.changeUserRole(),["prevent"])),style:{"margin-right":"3.5px"}},Object(a["toDisplayString"])(e.translate("General_Yes")),1),Object(a["createElementVNode"])("a",{href:"",class:"modal-action modal-close modal-no",onClick:t[18]||(t[18]=Object(a["withModifiers"])(t=>{e.accessChangeEvent&&e.accessChangeEvent.abort(),e.siteAccessToChange=null,e.roleToChangeTo=null},["prevent"]))},Object(a["toDisplayString"])(e.translate("General_No")),1)])],512),Object(a["createElementVNode"])("div",we,[Object(a["createElementVNode"])("div",Te,[Object(a["createElementVNode"])("h3",{innerHTML:e.$sanitize(e.changePermToAllSitesConfirmText)},null,8,Ae),Object(a["createElementVNode"])("p",null,Object(a["toDisplayString"])(e.translate("UsersManager_ChangePermToAllSitesConfirm2")),1)]),Object(a["createElementVNode"])("div",Me,[Object(a["createElementVNode"])("a",{href:"",class:"modal-action modal-close btn",onClick:t[19]||(t[19]=Object(a["withModifiers"])(t=>e.giveAccessToAllSites(),["prevent"])),style:{"margin-right":"3.5px"}},Object(a["toDisplayString"])(e.translate("General_Yes")),1),Object(a["createElementVNode"])("a",{href:"",class:"modal-action modal-close modal-no",onClick:t[20]||(t[20]=e=>e.preventDefault())},Object(a["toDisplayString"])(e.translate("General_No")),1)])],512)],2)}const{$:_e}=window;var xe=Object(a["defineComponent"])({props:{userLogin:{type:String,required:!0},limit:{type:Number,default:10},accessLevels:{type:Array,required:!0},filterAccessLevels:{type:Array,required:!0}},components:{Notification:h["Notification"],Field:g["Field"],CapabilitiesEdit:k},directives:{DropdownMenu:h["DropdownMenu"],ContentTable:h["ContentTable"]},data(){return{siteAccess:[],offset:0,totalEntries:null,accessLevelFilter:"",siteNameFilter:"",isLoadingAccess:!1,allWebsitesAccssLevelSet:"view",isAllCheckboxSelected:!1,selectedRows:{},isBulkActionsDisabled:!0,areAllResultsSelected:!1,accessChangeEvent:null,hasAccessToAtLeastOneSite:!0,isRoleHelpToggled:!1,isCapabilitiesHelpToggled:!1,isGivingAccessToAllSites:!1,roleToChangeTo:null,siteAccessToChange:null}},emits:["userHasAccessDetected","accessChanged"],created(){this.onChangeSiteFilter=Object(h["debounce"])(this.onChangeSiteFilter,300),Object(a["watch"])(()=>this.allPropsWatch,()=>{this.limit&&this.fetchAccess()}),this.fetchAccess()},watch:{accessLevelFilter(){this.offset=0,this.fetchAccess()}},methods:{onAllCheckboxChange(e){this.isAllCheckboxSelected=e.target.checked,this.isAllCheckboxSelected?(this.siteAccess.forEach((e,t)=>{this.selectedRows[t]=!0}),this.isBulkActionsDisabled=!1):this.clearSelection()},clearSelection(){this.selectedRows={},this.areAllResultsSelected=!1,this.isBulkActionsDisabled=!0,this.isAllCheckboxSelected=!1,this.siteAccessToChange=null},onRowSelected(){setTimeout(()=>{const e=this.selectedRowsCount;this.isBulkActionsDisabled=0===e,this.isAllCheckboxSelected=e===this.siteAccess.length})},fetchAccess(){return this.isLoadingAccess=!0,h["AjaxHelper"].fetch({method:"UsersManager.getSitesAccessForUser",limit:this.limit,offset:this.offset,filter_search:this.siteNameFilter,filter_access:this.accessLevelFilter,userLogin:this.userLogin},{returnResponseObject:!0}).then(e=>{const t=e.getRequestHandle();this.isLoadingAccess=!1,this.siteAccess=t.responseJSON,this.totalEntries=parseInt(t.getResponseHeader("x-matomo-total-results"),10)||0,this.hasAccessToAtLeastOneSite=!!t.getResponseHeader("x-matomo-has-some"),this.$emit("userHasAccessDetected",{hasAccess:this.hasAccessToAtLeastOneSite}),this.clearSelection()}).catch(()=>{this.isLoadingAccess=!1,this.clearSelection()})},gotoPreviousPage(){this.offset=Math.max(0,this.offset-this.limit),this.fetchAccess()},gotoNextPage(){const e=this.offset+this.limit;e>=(this.totalEntries||0)||(this.offset=e,this.fetchAccess())},showRemoveAccessConfirm(){_e(this.$refs.deleteAccessConfirmModal).modal({dismissible:!1}).modal("open")},changeUserRole(){const e=()=>{const e=[];return Object.keys(this.selectedRows).forEach(t=>{this.selectedRows[t]&&this.siteAccess[t]&&e.push(this.siteAccess[t].idsite)}),e},t=()=>h["AjaxHelper"].fetch({method:"UsersManager.getSitesAccessForUser",filter_search:this.siteNameFilter,filter_access:this.accessLevelFilter,userLogin:this.userLogin,filter_limit:"-1"}).then(e=>e.map(e=>e.idsite));return this.isLoadingAccess=!0,Promise.resolve().then(()=>this.siteAccessToChange?[this.siteAccessToChange.idsite]:this.areAllResultsSelected?t():e()).then(e=>h["AjaxHelper"].post({method:"UsersManager.setUserAccess"},{userLogin:this.userLogin,access:this.roleToChangeTo,idSites:e})).catch(()=>{}).then(()=>(this.$emit("accessChanged"),this.fetchAccess()))},showChangeAccessConfirm(){_e(this.$refs.changeAccessConfirmModal).modal({dismissible:!1,onCloseEnd:()=>{this.accessChangeEvent=null}}).modal("open")},getRoleDisplay(e){let t=null;return this.filteredAccessLevels.forEach(s=>{s.key===e&&(t=s.value)}),t},giveAccessToAllSites(){this.isGivingAccessToAllSites=!0,h["AjaxHelper"].fetch({method:"SitesManager.getSitesWithAdminAccess",filter_limit:-1}).then(e=>{const t=e.map(e=>e.idsite);return h["AjaxHelper"].post({method:"UsersManager.setUserAccess"},{userLogin:this.userLogin,access:this.allWebsitesAccssLevelSet,idSites:t})}).then(()=>this.fetchAccess()).finally(()=>{this.isGivingAccessToAllSites=!1})},showChangeAccessAllSitesModal(){_e(this.$refs.confirmGiveAccessAllSitesModal).modal({dismissible:!1}).modal("open")},onChangeSiteFilter(e){setTimeout(()=>{const t=e.target.value;this.siteNameFilter!==t&&(this.siteNameFilter=t,this.offset=0,this.fetchAccess())})},onRoleChange(e,t){this.siteAccessToChange=e,this.roleToChangeTo=t.value,this.accessChangeEvent=t,this.showChangeAccessConfirm()}},computed:{rolesHelpText(){return Object(h["translate"])("UsersManager_RolesHelp",Object(h["externalLink"])("https://matomo.org/faq/general/faq_70/"),"</a>",Object(h["externalLink"])("https://matomo.org/faq/general/faq_69/"),"</a>")},theDisplayedWebsitesAreSelectedText(){const e=Object(h["translate"])("UsersManager_TheDisplayedWebsitesAreSelected",`<strong>${this.siteAccess.length}</strong>`);return e+" "},clickToSelectAllText(){return Object(h["translate"])("UsersManager_ClickToSelectAll",`<strong>${this.totalEntries}</strong>`)},allWebsitesAreSelectedText(){return Object(h["translate"])("UsersManager_AllWebsitesAreSelected",`<strong>${this.totalEntries}</strong>`)},clickToSelectDisplayedWebsitesText(){return Object(h["translate"])("UsersManager_ClickToSelectDisplayedWebsites",`<strong>${this.siteAccess.length}</strong>`)},deletePermConfirmSingleText(){return Object(h["translate"])("UsersManager_DeletePermConfirmSingle",`<strong>${this.userLogin}</strong>`,`<strong>${this.siteAccessToChangeName}</strong>`)},deletePermConfirmMultipleText(){return Object(h["translate"])("UsersManager_DeletePermConfirmMultiple",`<strong>${this.userLogin}</strong>`,`<strong>${this.affectedSitesCount}</strong>`)},changePermToSiteConfirmSingleText(){return Object(h["translate"])("UsersManager_ChangePermToSiteConfirmSingle",`<strong>${this.userLogin}</strong>`,`<strong>${this.siteAccessToChangeName}</strong>`,`<strong>${this.getRoleDisplay(this.roleToChangeTo)}</strong>`)},changePermToSiteConfirmMultipleText(){return Object(h["translate"])("UsersManager_ChangePermToSiteConfirmMultiple",`<strong>${this.userLogin}</strong>`,`<strong>${this.affectedSitesCount}</strong>`,`<strong>${this.getRoleDisplay(this.roleToChangeTo)}</strong>`)},changePermToAllSitesConfirmText(){return Object(h["translate"])("UsersManager_ChangePermToAllSitesConfirm",`<strong>${this.userLogin}</strong>`,`<strong>${this.getRoleDisplay(this.allWebsitesAccssLevelSet)}</strong>`)},paginationLowerBound(){return this.offset+1},paginationUpperBound(){return this.totalEntries?Math.min(this.offset+this.limit,this.totalEntries):"?"},filteredAccessLevels(){return this.accessLevels.filter(e=>"superuser"!==e.key&&"role"===e.type)},filteredSelectAccessLevels(){return this.filterAccessLevels.filter(e=>"superuser"!==e.key)},selectedRowsCount(){let e=0;return Object.values(this.selectedRows).forEach(t=>{t&&(e+=1)}),e},affectedSitesCount(){return this.areAllResultsSelected?this.totalEntries:this.selectedRowsCount},allPropsWatch(){return this.userLogin,this.limit,this.accessLevels,this.filterAccessLevels,Date.now()},siteAccessToChangeName(){return this.siteAccessToChange?h["Matomo"].helper.htmlEntities(this.siteAccessToChange.site_name):""},paginationText(){const e=Object(h["translate"])("General_Pagination",""+this.paginationLowerBound,""+this.paginationUpperBound,""+this.totalEntries);return` ${e} `}}});xe.render=Be;var De=xe;const Le={class:"row"},Re={class:"col m2 entityList"},Pe={class:"listCircle"},He={key:0,class:"icon-warning"},Ie=Object(a["createElementVNode"])("div",{class:"save-button-spacer hide-on-small-only"},null,-1),Fe={href:"",class:"entityCancelLink"},$e=Object(a["createElementVNode"])("span",{class:"icon-arrow-left"},"  ",-1),qe={class:"visibleTab col m10"},ze={key:0,class:"basic-info-tab"},Ge={class:"email-input"},We={class:"form-group row",style:{position:"relative"}},Ye={class:"col s12 m6 save-button"},Xe={key:0,class:"resend-notes"},Ke=["innerHTML"],Je={class:"user-permissions"},Qe={key:0},Ze={key:1,class:"alert alert-info"},et={key:1,class:"superuser-access form-group"},tt={key:0},st={key:1},nt={class:"browser-default"},rt=["innerHTML"],at=["innerHTML"],it=["innerHTML"],ot=["innerHTML"],lt=["innerHTML"],ct=["innerHTML"],dt=["innerHTML"],ut=["innerHTML"],mt=["title"],bt={key:0},pt={key:1},ht={key:2,class:"twofa-reset form-group"},gt={class:"resetTwoFa"},Ot=["innerHTML"],jt=["innerHTML"];function ft(e,t,s,n,r,i){const o=Object(a["resolveComponent"])("Field"),l=Object(a["resolveComponent"])("SaveButton"),c=Object(a["resolveComponent"])("UserPermissionsEdit"),d=Object(a["resolveComponent"])("PasswordConfirmation"),u=Object(a["resolveComponent"])("Notification"),m=Object(a["resolveComponent"])("ContentBlock"),b=Object(a["resolveDirective"])("auto-clear-password"),p=Object(a["resolveDirective"])("form");return Object(a["openBlock"])(),Object(a["createBlock"])(m,{class:Object(a["normalizeClass"])(["userEditForm",{loading:e.isSavingUserInfo}]),"content-title":e.theUser.login},{default:Object(a["withCtx"])(()=>[Object(a["withDirectives"])((Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Le,[Object(a["createElementVNode"])("div",Re,[Object(a["createElementVNode"])("ul",Pe,[Object(a["createElementVNode"])("li",{class:Object(a["normalizeClass"])([{active:"basic"===e.activeTab},"menuBasicInfo"])},[Object(a["createElementVNode"])("a",{href:"",onClick:t[0]||(t[0]=Object(a["withModifiers"])(t=>e.activeTab="basic",["prevent"]))},Object(a["toDisplayString"])(e.translate("UsersManager_BasicInformation")),1)],2),Object(a["createElementVNode"])("li",{class:Object(a["normalizeClass"])([{active:"permissions"===e.activeTab},"menuPermissions"])},[Object(a["createElementVNode"])("a",{href:"",onClick:t[1]||(t[1]=Object(a["withModifiers"])(t=>e.activeTab="permissions",["prevent"])),style:{"margin-right":"3.5px"}},Object(a["toDisplayString"])(e.translate("UsersManager_Permissions")),1),e.userHasAccess||e.theUser.superuser_access?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createElementBlock"])("span",He))],2),"superuser"===e.currentUserRole?(Object(a["openBlock"])(),Object(a["createElementBlock"])("li",{key:0,class:Object(a["normalizeClass"])([{active:"superuser"===e.activeTab},"menuSuperuser"])},[Object(a["createElementVNode"])("a",{href:"",onClick:t[2]||(t[2]=Object(a["withModifiers"])(t=>e.activeTab="superuser",["prevent"]))},Object(a["toDisplayString"])(e.translate("UsersManager_SuperUserAccess")),1)],2)):Object(a["createCommentVNode"])("",!0),"superuser"===e.currentUserRole&&e.theUser.uses_2fa?(Object(a["openBlock"])(),Object(a["createElementBlock"])("li",{key:1,class:Object(a["normalizeClass"])([{active:"2fa"===e.activeTab},"menuUserTwoFa"])},[Object(a["createElementVNode"])("a",{href:"",onClick:t[3]||(t[3]=Object(a["withModifiers"])(t=>e.activeTab="2fa",["prevent"]))},Object(a["toDisplayString"])(e.translate("UsersManager_TwoFactorAuthentication")),1)],2)):Object(a["createCommentVNode"])("",!0)]),Ie,Object(a["createElementVNode"])("div",{class:"entityCancel",onClick:t[4]||(t[4]=Object(a["withModifiers"])(t=>e.onDoneEditing(),["prevent"]))},[Object(a["createElementVNode"])("a",Fe,[$e,Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.translate("UsersManager_BackToUser")),1)])])]),Object(a["createElementVNode"])("div",qe,["basic"===e.activeTab?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",ze,[Object(a["createElementVNode"])("div",null,[Object(a["createVNode"])(o,{modelValue:e.theUser.login,"onUpdate:modelValue":t[5]||(t[5]=t=>e.theUser.login=t),disabled:!0,autocomplete:"off",uicontrol:"text",name:"user_login",maxlength:100,title:e.translate("General_Username")},null,8,["modelValue","title"])]),Object(a["createElementVNode"])("div",null,[e.isPending?Object(a["createCommentVNode"])("",!0):Object(a["withDirectives"])((Object(a["openBlock"])(),Object(a["createBlock"])(o,{key:0,"model-value":e.theUser.password,disabled:e.isSavingUserInfo||"superuser"!==e.currentUserRole||e.isShowingPasswordConfirm,"onUpdate:modelValue":t[6]||(t[6]=t=>{e.theUser.password=t,e.isPasswordModified=!0}),uicontrol:"password",name:"user_password",autocomplete:"new-password",title:e.translate("General_Password"),"ui-control-attributes":{passwordStrengthValidationRules:e.passwordStrengthValidationRules}},null,8,["model-value","disabled","title","ui-control-attributes"])),[[b]])]),Object(a["createElementVNode"])("div",Ge,["superuser"===e.currentUserRole?(Object(a["openBlock"])(),Object(a["createBlock"])(o,{key:0,modelValue:e.theUser.email,"onUpdate:modelValue":t[7]||(t[7]=t=>e.theUser.email=t),disabled:e.isSavingUserInfo||"superuser"!==e.currentUserRole||e.isShowingPasswordConfirm,uicontrol:"text",name:"user_email",autocomplete:"off",maxlength:100,title:e.translate("UsersManager_Email")},null,8,["modelValue","disabled","title"])):Object(a["createCommentVNode"])("",!0)]),Object(a["createElementVNode"])("div",null,[Object(a["createElementVNode"])("div",We,[Object(a["createElementVNode"])("div",Ye,["superuser"===e.currentUserRole?(Object(a["openBlock"])(),Object(a["createBlock"])(l,{key:0,value:e.translate("UsersManager_SaveBasicInfo"),saving:e.isSavingUserInfo,onConfirm:t[8]||(t[8]=e=>this.isShowingPasswordConfirm=!0)},null,8,["value","saving"])):Object(a["createCommentVNode"])("",!0)])]),e.user&&e.isPending?(Object(a["openBlock"])(),Object(a["createElementBlock"])("p",Xe,[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.translate("UsersManager_InvitationSent"))+" ",1),Object(a["createElementVNode"])("span",{class:"resend-link",onClick:t[9]||(t[9]=(...t)=>e.resendRequestedUser&&e.resendRequestedUser(...t)),innerHTML:e.$sanitize(e.translate("UsersManager_ResendInvite")+"/"+e.translate("UsersManager_CopyLink"))},null,8,Ke)])):Object(a["createCommentVNode"])("",!0)])])):Object(a["createCommentVNode"])("",!0),Object(a["withDirectives"])(Object(a["createElementVNode"])("div",Je,[e.theUser.superuser_access?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Qe,[Object(a["createVNode"])(c,{"user-login":e.theUser.login,onUserHasAccessDetected:t[10]||(t[10]=t=>e.userHasAccess=t.hasAccess),onAccessChanged:t[11]||(t[11]=t=>e.isUserModified=!0),"access-levels":e.accessLevels,"filter-access-levels":e.filterAccessLevels},null,8,["user-login","access-levels","filter-access-levels"])])),e.theUser.superuser_access?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Ze,Object(a["toDisplayString"])(e.translate("UsersManager_SuperUsersPermissionsNotice")),1)):Object(a["createCommentVNode"])("",!0)],512),[[a["vShow"],"permissions"===e.activeTab]]),"superuser"===e.activeTab&&"superuser"===e.currentUserRole?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",et,[e.isMarketplacePluginEnabled?(Object(a["openBlock"])(),Object(a["createElementBlock"])("p",tt,Object(a["toDisplayString"])(e.translate("UsersManager_SuperUserIntro1")),1)):(Object(a["openBlock"])(),Object(a["createElementBlock"])("p",st,Object(a["toDisplayString"])(e.translate("UsersManager_SuperUserIntro1WithoutMarketplace")),1)),Object(a["createElementVNode"])("p",null,[Object(a["createElementVNode"])("strong",null,Object(a["toDisplayString"])(e.translate("UsersManager_SuperUserIntro2")),1)]),Object(a["createElementVNode"])("p",null,[Object(a["createElementVNode"])("strong",null,Object(a["toDisplayString"])(e.translate("UsersManager_SuperUserIntro3")),1)]),Object(a["createElementVNode"])("ul",nt,[Object(a["createElementVNode"])("li",{innerHTML:e.$sanitize(e.translateSuperUserRiskString("Data"))},null,8,rt),Object(a["createElementVNode"])("li",{innerHTML:e.$sanitize(e.translateSuperUserRiskString("Security"))},null,8,at),Object(a["createElementVNode"])("li",{innerHTML:e.$sanitize(e.translateSuperUserRiskString("Misconfiguration"))},null,8,it),Object(a["createElementVNode"])("li",{innerHTML:e.$sanitize(e.translateSuperUserRiskString("UserManagement"))},null,8,ot),Object(a["createElementVNode"])("li",{innerHTML:e.$sanitize(e.translateSuperUserRiskString("ServiceDisruption"))},null,8,lt),e.isPluginsAdminEnabled&&e.isMarketplacePluginEnabled?(Object(a["openBlock"])(),Object(a["createElementBlock"])("li",{key:0,innerHTML:e.$sanitize(e.translateSuperUserRiskString("Marketplace"))},null,8,ct)):Object(a["createCommentVNode"])("",!0),Object(a["createElementVNode"])("li",{innerHTML:e.$sanitize(e.accountabilityRisk)},null,8,dt),Object(a["createElementVNode"])("li",{innerHTML:e.$sanitize(e.translateSuperUserRiskString("Compliance"))},null,8,ut)]),Object(a["createElementVNode"])("div",{class:Object(a["normalizeClass"])({disabled:e.isCurrentUser}),title:e.superUserAccessTooltipText},[Object(a["createVNode"])(o,{modelValue:e.superUserAccessChecked,"onUpdate:modelValue":[t[12]||(t[12]=t=>e.superUserAccessChecked=t),t[13]||(t[13]=t=>e.confirmSuperUserChange())],disabled:e.isCurrentUser,uicontrol:"checkbox",name:"superuser_access",title:e.translate("UsersManager_HasSuperUserAccess")},null,8,["modelValue","disabled","title"])],10,mt),Object(a["createVNode"])(d,{modelValue:e.showPasswordConfirmationForSuperUser,"onUpdate:modelValue":t[14]||(t[14]=t=>e.showPasswordConfirmationForSuperUser=t),onConfirmed:e.toggleSuperuserAccess,onAborted:t[15]||(t[15]=t=>e.setSuperUserAccessChecked())},{default:Object(a["withCtx"])(()=>[Object(a["createElementVNode"])("h2",null,Object(a["toDisplayString"])(e.translate("UsersManager_AreYouSure")),1),e.theUser.superuser_access?(Object(a["openBlock"])(),Object(a["createElementBlock"])("p",bt,Object(a["toDisplayString"])(e.translate("UsersManager_RemoveSuperuserAccessConfirm")),1)):Object(a["createCommentVNode"])("",!0),e.theUser.superuser_access?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createElementBlock"])("p",pt,Object(a["toDisplayString"])(e.translate("UsersManager_AddSuperuserAccessConfirm")),1))]),_:1},8,["modelValue","onConfirmed"])])):Object(a["createCommentVNode"])("",!0),"superuser"===e.currentUserRole?Object(a["withDirectives"])((Object(a["openBlock"])(),Object(a["createElementBlock"])("div",ht,[Object(a["createElementVNode"])("p",null,Object(a["toDisplayString"])(e.translate("UsersManager_ResetTwoFactorAuthenticationInfo")),1),Object(a["createElementVNode"])("div",gt,[Object(a["createVNode"])(l,{saving:e.isResetting2FA,onConfirm:t[16]||(t[16]=t=>e.confirmReset2FA()),value:e.translate("UsersManager_ResetTwoFactorAuthentication")},null,8,["saving","value"])]),Object(a["createVNode"])(d,{modelValue:e.showPasswordConfirmationFor2FA,"onUpdate:modelValue":t[17]||(t[17]=t=>e.showPasswordConfirmationFor2FA=t),onConfirmed:e.reset2FA},{default:Object(a["withCtx"])(()=>[Object(a["createElementVNode"])("h2",null,Object(a["toDisplayString"])(e.translate("UsersManager_AreYouSure")),1)]),_:1},8,["modelValue","onConfirmed"])],512)),[[a["vShow"],"2fa"===e.activeTab]]):Object(a["createCommentVNode"])("",!0)])])),[[p]]),Object(a["createVNode"])(d,{modelValue:e.isShowingPasswordConfirm,"onUpdate:modelValue":t[18]||(t[18]=t=>e.isShowingPasswordConfirm=t),onConfirmed:e.updateUser},{default:Object(a["withCtx"])(()=>[Object(a["createElementVNode"])("h2",{innerHTML:e.$sanitize(e.changePasswordTitle)},null,8,Ot),e.user&&e.isPending?(Object(a["openBlock"])(),Object(a["createBlock"])(u,{key:0,context:"info",noclear:!0},{default:Object(a["withCtx"])(()=>[Object(a["createElementVNode"])("strong",{innerHTML:e.$sanitize(e.translate("UsersManager_InviteEmailChange"))},null,8,jt)]),_:1})):Object(a["createCommentVNode"])("",!0)]),_:1},8,["modelValue","onConfirmed"])]),_:1},8,["class","content-title"])}const vt={login:"",superuser_access:!1,uses_2fa:!1,password:"",email:"",invite_status:""};var Ct=Object(a["defineComponent"])({props:{user:Object,currentUserRole:{type:String,required:!0},accessLevels:{type:Array,required:!0},filterAccessLevels:{type:Array,required:!0},activatedPlugins:{type:Array,required:!0},passwordStrengthValidationRules:{type:Array,default:()=>[]}},components:{Notification:h["Notification"],ContentBlock:h["ContentBlock"],Field:g["Field"],SaveButton:g["SaveButton"],UserPermissionsEdit:De,PasswordConfirmation:g["PasswordConfirmation"]},directives:{Form:g["Form"],AutoClearPassword:h["AutoClearPassword"]},data(){return{theUser:this.user||Object.assign({},vt),activeTab:"basic",permissionsForIdSite:1,isSavingUserInfo:!1,userHasAccess:!0,isUserModified:!1,isPasswordModified:!1,superUserAccessChecked:null,showPasswordConfirmationForSuperUser:!1,showPasswordConfirmationFor2FA:!1,isResetting2FA:!1,isShowingPasswordConfirm:!1}},emits:["done","updated","resendInvite"],watch:{user(e){this.onUserChange(e)}},created(){this.onUserChange(Object.assign({},this.user))},methods:{onUserChange(e){this.theUser=e||Object.assign({},vt),this.theUser.password||this.resetPasswordVar(),this.setSuperUserAccessChecked()},confirmSuperUserChange(){this.showPasswordConfirmationForSuperUser=!0},confirmReset2FA(){this.showPasswordConfirmationFor2FA=!0},toggleSuperuserAccess(e){this.isSavingUserInfo=!0,h["AjaxHelper"].post({method:"UsersManager.setSuperUserAccess"},{userLogin:this.theUser.login,hasSuperUserAccess:this.theUser.superuser_access?"0":"1",passwordConfirmation:e}).then(()=>{this.theUser=Object.assign(Object.assign({},this.theUser),{},{superuser_access:!this.theUser.superuser_access})}).catch(()=>{}).finally(()=>{this.isSavingUserInfo=!1,this.setSuperUserAccessChecked()})},resendRequestedUser(){this.$emit("resendInvite",{user:this.user})},resetPasswordVar(){this.theUser.password="XXXXXXXX"},showUserSavedNotification(){h["NotificationsStore"].show({message:Object(h["translate"])("General_YourChangesHaveBeenSaved"),context:"success",type:"toast"})},reset2FA(e){return this.isResetting2FA=!0,h["AjaxHelper"].post({method:"TwoFactorAuth.resetTwoFactorAuth"},{userLogin:this.theUser.login,passwordConfirmation:e}).catch(e=>{throw this.isResetting2FA=!1,e}).then(()=>{this.isResetting2FA=!1,this.theUser.uses_2fa=!1,this.activeTab="basic",this.showUserSavedNotification()})},updateUser(e){return this.isSavingUserInfo=!0,h["AjaxHelper"].post({method:"UsersManager.updateUser"},{userLogin:this.theUser.login,password:this.isPasswordModified&&this.theUser.password?this.theUser.password:void 0,passwordConfirmation:e,email:this.theUser.email}).then(()=>{this.isSavingUserInfo=!1,this.isUserModified=!0,this.isPasswordModified=!1,this.resetPasswordVar(),this.showUserSavedNotification(),this.$emit("updated",{user:this.theUser})}).catch(()=>{this.isSavingUserInfo=!1})},setSuperUserAccessChecked(){this.superUserAccessChecked=!!this.theUser.superuser_access},onDoneEditing(){this.$emit("done",{isUserModified:this.isUserModified})},translateSuperUserRiskString(e){return Object(h["translate"])("UsersManager_SuperUserRisk"+e,"<strong>","</strong>")}},computed:{isPending(){return!this.user||!("pending"!==this.user.invite_status&&!Number.isInteger(this.user.invite_status))},changePasswordTitle(){return Object(h["translate"])("UsersManager_AreYouSureChangeDetails",`<strong>${this.theUser.login}</strong>`)},isPluginsAdminEnabled(){return h["Matomo"].config.enable_plugins_admin},isActivityLogPluginEnabled(){return this.activatedPlugins.includes("ActivityLog")},isMarketplacePluginEnabled(){return this.activatedPlugins.includes("Marketplace")},isProfessionalServicesPluginEnabled(){return this.activatedPlugins.includes("ProfessionalServices")},accountabilityRisk(){const e=this.translateSuperUserRiskString("Accountability");let t="";return this.isPluginsAdminEnabled&&this.isProfessionalServicesPluginEnabled&&(this.isActivityLogPluginEnabled?t=Object(h["translate"])("UsersManager_SuperUserRiskAccountabilityCheckActivityLog",'<a href="?module=ActivityLog&action=index" rel="noreferrer noopener" target="_blank">',"</a>"):this.isMarketplacePluginEnabled&&(t=Object(h["translate"])("UsersManager_SuperUserRiskAccountabilityGetActivityLogPlugin",Object(h["externalLink"])("https://plugins.matomo.org/ActivityLog"),"</a>"))),t?`${e} ${t}`:e},isCurrentUser(){return this.theUser.login===h["Matomo"].userLogin},superUserAccessTooltipText(){return this.isCurrentUser?Object(h["translate"])("UsersManager_CannotRevokeOwnSuperuserAccess"):""}}});Ct.render=ft;var kt=Ct;const yt={class:"row"},St={class:"col s12 m6 invite-notes"},Nt={class:"form-help"},Ut=["innerHTML"],Vt={class:"col m10"},Et={class:"email-input"},wt={class:"form-group row",style:{position:"relative"}},Tt={class:"col s12 m6 save-button"},At={class:"entityCancel"},Mt=Object(a["createElementVNode"])("span",{class:"icon icon-arrow-left"},"  ",-1);function Bt(e,t,s,n,r,i){const o=Object(a["resolveComponent"])("Field"),l=Object(a["resolveComponent"])("SaveButton"),c=Object(a["resolveComponent"])("PasswordConfirmation"),d=Object(a["resolveComponent"])("ContentBlock"),u=Object(a["resolveDirective"])("form");return Object(a["openBlock"])(),Object(a["createBlock"])(d,{class:"userInviteForm","content-title":e.translate("UsersManager_InviteNewUser")},{default:Object(a["withCtx"])(()=>[Object(a["withDirectives"])((Object(a["openBlock"])(),Object(a["createElementBlock"])("div",yt,[Object(a["createElementVNode"])("div",St,[Object(a["createElementVNode"])("div",Nt,[Object(a["createElementVNode"])("span",{innerHTML:e.$sanitize(e.translate("UsersManager_InviteSuccessNotification",[e.inviteTokenExpiryDays]))},null,8,Ut)])]),Object(a["createElementVNode"])("div",Vt,[Object(a["createElementVNode"])("div",null,[Object(a["createVNode"])(o,{modelValue:e.theUser.login,"onUpdate:modelValue":t[0]||(t[0]=t=>e.theUser.login=t),disabled:e.isInvitingUser,autocomplete:"off",uicontrol:"text",name:"user_login",maxlength:100,title:e.translate("General_Username")},null,8,["modelValue","disabled","title"])]),Object(a["createElementVNode"])("div",Et,[Object(a["createVNode"])(o,{modelValue:e.theUser.email,"onUpdate:modelValue":t[1]||(t[1]=t=>e.theUser.email=t),disabled:e.isInvitingUser,uicontrol:"text",name:"user_email",autocomplete:"off",maxlength:100,title:e.translate("UsersManager_Email")},null,8,["modelValue","disabled","title"])]),Object(a["createElementVNode"])("div",null,[Object(a["createVNode"])(o,{modelValue:e.firstSiteAccess,"onUpdate:modelValue":t[2]||(t[2]=t=>e.firstSiteAccess=t),disabled:e.isInvitingUser,uicontrol:"site",name:"user_site","ui-control-attributes":{onlySitesWithAdminAccess:!0},title:e.translate("UsersManager_FirstWebsitePermission"),"inline-help":e.translate("UsersManager_FirstSiteInlineHelp")},null,8,["modelValue","disabled","title","inline-help"])]),Object(a["createElementVNode"])("div",null,[Object(a["createElementVNode"])("div",wt,[Object(a["createElementVNode"])("div",Tt,[Object(a["createVNode"])(l,{value:e.translate("UsersManager_InviteUser"),disabled:!e.firstSiteAccess||!e.firstSiteAccess.id||!e.theUser.login||!e.theUser.email,saving:e.isInvitingUser,onConfirm:t[3]||(t[3]=t=>e.showPasswordConfirmation=!0)},null,8,["value","disabled","saving"])])]),Object(a["createVNode"])(c,{modelValue:e.showPasswordConfirmation,"onUpdate:modelValue":t[4]||(t[4]=t=>e.showPasswordConfirmation=t),onConfirmed:e.inviteUser},null,8,["modelValue","onConfirmed"])]),Object(a["createElementVNode"])("div",At,[Object(a["createElementVNode"])("a",{href:"",class:"entityCancelLink",onClick:t[5]||(t[5]=Object(a["withModifiers"])(t=>e.abort(),["prevent"]))},[Mt,Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.translate("UsersManager_BackToUser")),1)])])])])),[[u]])]),_:1},8,["content-title"])}const _t={login:"",superuser_access:!1,uses_2fa:!1,password:"",email:"",invite_status:""};var xt=Object(a["defineComponent"])({props:{initialSiteId:{type:[String,Number],required:!0},initialSiteName:{type:String,required:!0},inviteTokenExpiryDays:{type:String,required:!0}},components:{ContentBlock:h["ContentBlock"],Field:g["Field"],SaveButton:g["SaveButton"],PasswordConfirmation:g["PasswordConfirmation"]},directives:{Form:g["Form"],AutoClearPassword:h["AutoClearPassword"]},data(){return{theUser:Object.assign({},_t),isInvitingUser:!1,firstSiteAccess:{id:this.initialSiteId,name:this.initialSiteName},showPasswordConfirmation:!1}},emits:["aborted","invited"],methods:{inviteUser(e){return this.isInvitingUser=!0,h["AjaxHelper"].post({method:"UsersManager.inviteUser"},{userLogin:this.theUser.login,email:this.theUser.email,initialIdSite:this.firstSiteAccess?this.firstSiteAccess.id:void 0,passwordConfirmation:e}).then(()=>{this.firstSiteAccess={id:this.initialSiteId,name:this.initialSiteName},this.theUser.invite_status="pending",this.showUserInvitedNotification(),this.$emit("invited",{user:this.theUser}),this.theUser=_t}).finally(()=>{this.isInvitingUser=!1})},showUserInvitedNotification(){h["NotificationsStore"].show({message:Object(h["translate"])("UsersManager_InviteSuccess"),context:"success",type:"toast"})},abort(){this.theUser=_t,this.firstSiteAccess=null,this.$emit("aborted")}}});xt.render=Bt;var Dt=xt;const Lt={class:"resend-invite-confirm-modal modal",ref:"resendInviteConfirmModal"},Rt=Object(a["createElementVNode"])("div",{class:"btn-close modal-close"},[Object(a["createElementVNode"])("i",{class:"icon-close"})],-1),Pt={class:"modal-content"},Ht={class:"modal-title"},It=["innerHTML"],Ft={class:"modal-footer"},$t={key:0,class:"success-copied"},qt=Object(a["createElementVNode"])("i",{class:"icon-success"},null,-1);function zt(e,t,s,n,r,i){var o,l;const c=Object(a["resolveComponent"])("PasswordConfirmation");return Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],null,[Object(a["createVNode"])(c,{modelValue:e.showPasswordConfirmationForInviteAction,"onUpdate:modelValue":t[0]||(t[0]=t=>e.showPasswordConfirmationForInviteAction=t),onConfirmed:e.onInviteAction},null,8,["modelValue","onConfirmed"]),Object(a["createElementVNode"])("div",Lt,[Rt,Object(a["createElementVNode"])("div",Pt,[Object(a["createElementVNode"])("h2",Ht,Object(a["toDisplayString"])(e.translate("UsersManager_ResendInvite")),1),Object(a["createElementVNode"])("p",{innerHTML:e.$sanitize(e.translate("UsersManager_InviteConfirmMessage",[`<strong>${null===(o=e.user)||void 0===o?void 0:o.login}</strong>`,`<strong>${null===(l=e.user)||void 0===l?void 0:l.email}</strong>`]))},null,8,It),Object(a["createElementVNode"])("p",null,[Object(a["createElementVNode"])("strong",null,Object(a["toDisplayString"])(e.translate("UsersManager_InviteActionNotes",e.inviteTokenExpiryDays)),1)])]),Object(a["createElementVNode"])("div",Ft,[e.copied?(Object(a["openBlock"])(),Object(a["createElementBlock"])("span",$t,[qt,Object(a["createTextVNode"])(" "+Object(a["toDisplayString"])(e.translate("UsersManager_LinkCopied")),1)])):Object(a["createCommentVNode"])("",!0),Object(a["createElementVNode"])("button",{onClick:t[1]||(t[1]=t=>e.showInviteActionPasswordConfirm("copy")),class:"btn btn-copy-link modal-action",style:{"margin-right":"3.5px"}},Object(a["toDisplayString"])(e.translate("UsersManager_CopyLink")),1),Object(a["createElementVNode"])("button",{class:"btn btn-resend modal-action modal-no",onClick:t[2]||(t[2]=t=>e.showInviteActionPasswordConfirm("send"))},Object(a["toDisplayString"])(e.translate("UsersManager_ResendInvite")),1)])],512)],64)}var Gt=Object(a["defineComponent"])({props:{user:{type:Object,required:!1},inviteTokenExpiryDays:{type:String,required:!0}},components:{PasswordConfirmation:g["PasswordConfirmation"]},data(){return{copied:!1,showPasswordConfirmationForInviteAction:!1,inviteAction:"",loading:!1}},emits:["close"],watch:{user(e){e&&($(this.$refs.resendInviteConfirmModal).modal({dismissible:!1,onCloseEnd:()=>this.$emit("close")}).modal("open"),this.copied=!1)}},methods:{showInviteActionPasswordConfirm(e){this.loading||(this.showPasswordConfirmationForInviteAction=!0,this.inviteAction=e)},onInviteAction(e){"send"===this.inviteAction?this.onResendInvite(e):this.generateInviteLink(e)},onResendInvite(e){""!==e&&h["AjaxHelper"].post({method:"UsersManager.resendInvite",userLogin:this.user.login},{passwordConfirmation:e}).then(()=>{$(this.$refs.resendInviteConfirmModal).modal("close");const e=h["NotificationsStore"].show({message:Object(h["translate"])("UsersManager_InviteSuccess"),id:"resendInvite",context:"success",type:"transient"});h["NotificationsStore"].scrollToNotification(e)})},async generateInviteLink(e){if(!this.loading){this.loading=!0;try{const t=await h["AjaxHelper"].post({method:"UsersManager.generateInviteLink"},{userLogin:this.user.login,passwordConfirmation:e});await this.copyToClipboard(t.value)}catch(t){}this.loading=!1}},async copyToClipboard(e){try{const t=document.createElement("input");t.style.top="-100px",t.style.left="0",t.style.position="fixed",t.value=e,document.body.appendChild(t),t.select(),"https:"!==window.location.protocol?document.execCommand("copy"):await navigator.clipboard.writeText(t.value),document.body.removeChild(t),this.copied=!0}catch(t){const s=h["NotificationsStore"].show({message:`<strong>${Object(h["translate"])("UsersManager_CopyDenied")}</strong><br>\n${Object(h["translate"])("UsersManager_CopyDeniedHints",[`<br><span class="invite-link">${e}</span>`])}`,id:"copyError",context:"error",type:"transient"});h["NotificationsStore"].scrollToNotification(s)}}}});Gt.render=zt;var Wt=Gt;const Yt={class:"userListFilters row"},Xt={class:"col s12 m12 l8"},Kt={class:"input-field col s12 m3 l3"},Jt={id:"user-list-bulk-actions",class:"dropdown-content"},Qt={class:"dropdown-trigger","data-target":"bulk-set-access"},Zt={id:"bulk-set-access",class:"dropdown-content"},es=["onClick"],ts={key:0},ss={class:"input-field col s12 m3 l3"},ns={class:"permissions-for-selector"},rs={class:"input-field col s12 m3 l3"},as={class:"input-field col s12 m3 l3"},is={key:0,class:"input-field col s12 m12 l4 users-list-pagination-container"},os={class:"usersListPagination"},ls={class:"pointer"},cs={class:"counter"},ds={class:"pointer"},us={key:0,class:"roles-help-notification"},ms=["innerHTML"],bs={class:"select-cell"},ps={class:"checkbox-container"},hs=Object(a["createElementVNode"])("span",null,null,-1),gs={class:"first"},Os={class:"role_header"},js={style:{"margin-right":"3.5px"}},fs=Object(a["createElementVNode"])("span",{class:"icon-help"},null,-1),vs=[fs],Cs={key:0},ks=["title"],ys={key:2},Ss={class:"actions-cell-header"},Ns={key:0,class:"select-all-row"},Us={colspan:"8"},Vs={key:0},Es=["innerHTML"],ws=["innerHTML"],Ts={key:1},As=["innerHTML"],Ms=["innerHTML"],Bs=["id"],_s={class:"select-cell"},xs={class:"checkbox-container"},Ds=["id","onUpdate:modelValue"],Ls=Object(a["createElementVNode"])("span",null,null,-1),Rs={id:"userLogin"},Ps={class:"access-cell"},Hs={key:0,id:"email"},Is={key:1,id:"twofa"},Fs={key:0,class:"icon-ok"},$s={key:1,class:"icon-close"},qs={key:2,id:"last_seen"},zs={id:"status"},Gs=["title"],Ws={class:"center actions-cell"},Ys=["onClick"],Xs=Object(a["createElementVNode"])("span",{class:"icon-email"},null,-1),Ks=[Xs],Js=["onClick"],Qs=Object(a["createElementVNode"])("span",{class:"icon-edit"},null,-1),Zs=[Qs],en=["onClick"],tn=Object(a["createElementVNode"])("span",{class:"icon-delete"},null,-1),sn=[tn],nn=["innerHTML"],rn=["innerHTML"],an=["innerHTML"],on=["innerHTML"],ln=["innerHTML"],cn={class:"change-user-role-confirm-modal modal",ref:"changeUserRoleConfirmModal"},dn={class:"modal-content"},un=["innerHTML"],mn=["innerHTML"],bn={class:"modal-footer"};function pn(e,t,s,n,r,i){const o=Object(a["resolveComponent"])("Field"),l=Object(a["resolveComponent"])("ActivityIndicator"),c=Object(a["resolveComponent"])("Notification"),d=Object(a["resolveComponent"])("ContentBlock"),u=Object(a["resolveComponent"])("PasswordConfirmation"),m=Object(a["resolveDirective"])("dropdown-menu"),b=Object(a["resolveDirective"])("content-table");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",{class:Object(a["normalizeClass"])(["pagedUsersList",{loading:e.isLoadingUsers}])},[Object(a["createElementVNode"])("div",Yt,[Object(a["createElementVNode"])("div",Xt,[Object(a["createElementVNode"])("div",Kt,[Object(a["withDirectives"])((Object(a["openBlock"])(),Object(a["createElementBlock"])("a",{class:Object(a["normalizeClass"])(["dropdown-trigger btn bulk-actions",{disabled:e.isBulkActionsDisabled}]),href:"","data-target":"user-list-bulk-actions"},[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.translate("UsersManager_BulkActions")),1)],2)),[[m]]),Object(a["createElementVNode"])("ul",Jt,[Object(a["createElementVNode"])("li",null,[Object(a["withDirectives"])((Object(a["openBlock"])(),Object(a["createElementBlock"])("a",Qt,[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.translate("UsersManager_SetPermission")),1)])),[[m]]),Object(a["createElementVNode"])("ul",Zt,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(e.bulkActionAccessLevels,t=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("li",{key:t.key},[Object(a["createElementVNode"])("a",{href:"",onClick:Object(a["withModifiers"])(s=>{e.userToChange=null,e.roleToChangeTo=t.key,e.showAccessChangeConfirm()},["prevent"])},Object(a["toDisplayString"])(t.value),9,es)]))),128))])]),Object(a["createElementVNode"])("li",null,[Object(a["createElementVNode"])("a",{href:"",onClick:t[0]||(t[0]=Object(a["withModifiers"])(t=>{e.userToChange=null,e.roleToChangeTo="noaccess",e.showAccessChangeConfirm()},["prevent"]))},Object(a["toDisplayString"])(e.translate("UsersManager_RemovePermissions")),1)]),"superuser"===e.currentUserRole?(Object(a["openBlock"])(),Object(a["createElementBlock"])("li",ts,[Object(a["createElementVNode"])("a",{href:"",onClick:t[1]||(t[1]=Object(a["withModifiers"])(t=>e.showDeleteConfirm(),["prevent"]))},Object(a["toDisplayString"])(e.translate("UsersManager_DeleteUsers")),1)])):Object(a["createCommentVNode"])("",!0)])]),Object(a["createElementVNode"])("div",ss,[Object(a["createElementVNode"])("div",ns,[Object(a["createVNode"])(o,{"model-value":e.userTextFilter,"onUpdate:modelValue":t[2]||(t[2]=t=>e.onUserTextFilterChange(t)),name:"user-text-filter",uicontrol:"text","full-width":!0,placeholder:e.translate("UsersManager_UserSearch")},null,8,["model-value","placeholder"])])]),Object(a["createElementVNode"])("div",rs,[Object(a["createElementVNode"])("div",null,[Object(a["createVNode"])(o,{"model-value":e.accessLevelFilter,"onUpdate:modelValue":t[3]||(t[3]=t=>{e.accessLevelFilter=t,e.changeSearch({filter_access:e.accessLevelFilter,offset:0})}),name:"access-level-filter",uicontrol:"select",options:e.filterAccessLevels,"full-width":!0,placeholder:e.translate("UsersManager_FilterByAccess")},null,8,["model-value","options","placeholder"])])]),Object(a["createElementVNode"])("div",as,[Object(a["createElementVNode"])("div",null,[Object(a["createVNode"])(o,{"model-value":e.statusLevelFilter,"onUpdate:modelValue":t[4]||(t[4]=t=>{e.statusLevelFilter=t,e.changeSearch({filter_status:e.statusLevelFilter,offset:0})}),name:"status-level-filter",uicontrol:"select",options:e.filterStatusLevels,"full-width":!0,placeholder:e.translate("UsersManager_FilterByStatus")},null,8,["model-value","options","placeholder"])])])]),e.totalEntries>e.searchParams.limit?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",is,[Object(a["createElementVNode"])("div",os,[Object(a["createElementVNode"])("a",{class:Object(a["normalizeClass"])(["btn prev",{disabled:e.searchParams.offset<=0}]),onClick:t[5]||(t[5]=Object(a["withModifiers"])(t=>e.gotoPreviousPage(),["prevent"]))},[Object(a["createElementVNode"])("span",ls,"« "+Object(a["toDisplayString"])(e.translate("General_Previous")),1)],2),Object(a["createElementVNode"])("div",cs,[Object(a["createElementVNode"])("span",{class:Object(a["normalizeClass"])({visibility:e.isLoadingUsers?"hidden":"visible"})},Object(a["toDisplayString"])(e.translate("General_Pagination",e.paginationLowerBound,e.paginationUpperBound,e.totalEntries)),3),Object(a["createVNode"])(l,{loading:e.isLoadingUsers},null,8,["loading"])]),Object(a["createElementVNode"])("a",{class:Object(a["normalizeClass"])(["btn next",{disabled:e.searchParams.offset+e.searchParams.limit>=e.totalEntries}]),onClick:t[6]||(t[6]=Object(a["withModifiers"])(t=>e.gotoNextPage(),["prevent"]))},[Object(a["createElementVNode"])("span",ds,Object(a["toDisplayString"])(e.translate("General_Next"))+" »",1)],2)])])):Object(a["createCommentVNode"])("",!0)]),e.isRoleHelpToggled?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",us,[Object(a["createVNode"])(c,{context:"info",type:"persistent",noclear:!0},{default:Object(a["withCtx"])(()=>[Object(a["createElementVNode"])("span",{innerHTML:e.$sanitize(e.rolesHelpText)},null,8,ms)]),_:1})])):Object(a["createCommentVNode"])("",!0),Object(a["createVNode"])(d,null,{default:Object(a["withCtx"])(()=>[Object(a["withDirectives"])((Object(a["openBlock"])(),Object(a["createElementBlock"])("table",{id:"manageUsersTable",class:Object(a["normalizeClass"])({loading:e.isLoadingUsers})},[Object(a["createElementVNode"])("thead",null,[Object(a["createElementVNode"])("tr",null,[Object(a["createElementVNode"])("th",bs,[Object(a["createElementVNode"])("span",ps,[Object(a["createElementVNode"])("label",null,[Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{type:"checkbox",id:"paged_users_select_all",checked:"checked","onUpdate:modelValue":t[7]||(t[7]=t=>e.isAllCheckboxSelected=t),onChange:t[8]||(t[8]=t=>e.onAllCheckboxChange())},null,544),[[a["vModelCheckbox"],e.isAllCheckboxSelected]]),hs])])]),Object(a["createElementVNode"])("th",gs,Object(a["toDisplayString"])(e.translate("UsersManager_Username")),1),Object(a["createElementVNode"])("th",Os,[Object(a["createElementVNode"])("span",js,Object(a["toDisplayString"])(e.translate("UsersManager_RoleFor")),1),Object(a["createElementVNode"])("a",{href:"",class:Object(a["normalizeClass"])(["helpIcon",{sticky:e.isRoleHelpToggled}]),onClick:t[9]||(t[9]=Object(a["withModifiers"])(t=>e.isRoleHelpToggled=!e.isRoleHelpToggled,["prevent"]))},vs,2),Object(a["createElementVNode"])("div",null,[Object(a["createVNode"])(o,{class:"permissions-for-selector","model-value":e.permissionsForSite,"onUpdate:modelValue":t[10]||(t[10]=t=>{e.onPermissionsForUpdate(t)}),uicontrol:"site","ui-control-attributes":{onlySitesWithAdminAccess:"superuser"!==e.currentUserRole}},null,8,["model-value","ui-control-attributes"])])]),"superuser"===e.currentUserRole?(Object(a["openBlock"])(),Object(a["createElementBlock"])("th",Cs,Object(a["toDisplayString"])(e.translate("UsersManager_Email")),1)):Object(a["createCommentVNode"])("",!0),"superuser"===e.currentUserRole?(Object(a["openBlock"])(),Object(a["createElementBlock"])("th",{key:1,title:e.translate("UsersManager_UsesTwoFactorAuthentication")},Object(a["toDisplayString"])(e.translate("UsersManager_2FA")),9,ks)):Object(a["createCommentVNode"])("",!0),"superuser"===e.currentUserRole?(Object(a["openBlock"])(),Object(a["createElementBlock"])("th",ys,Object(a["toDisplayString"])(e.translate("UsersManager_LastSeen")),1)):Object(a["createCommentVNode"])("",!0),Object(a["createElementVNode"])("th",null,Object(a["toDisplayString"])(e.translate("UsersManager_Status")),1),Object(a["createElementVNode"])("th",Ss,[Object(a["createElementVNode"])("div",null,Object(a["toDisplayString"])(e.translate("General_Actions")),1)])])]),Object(a["createElementVNode"])("tbody",null,[e.isAllCheckboxSelected&&e.users.length&&e.users.length<e.totalEntries?(Object(a["openBlock"])(),Object(a["createElementBlock"])("tr",Ns,[Object(a["createElementVNode"])("td",Us,[e.areAllResultsSelected?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Vs,[Object(a["createElementVNode"])("span",{innerHTML:e.$sanitize(e.translate("UsersManager_TheDisplayedUsersAreSelected",`<strong>${e.users.length}</strong>`)),style:{"margin-right":"3.5px"}},null,8,Es),Object(a["createElementVNode"])("a",{class:"toggle-select-all-in-search",href:"#",onClick:t[11]||(t[11]=Object(a["withModifiers"])(t=>e.areAllResultsSelected=!e.areAllResultsSelected,["prevent"])),innerHTML:e.$sanitize(e.translate("UsersManager_ClickToSelectAll",`<strong>${e.totalEntries}</strong>`))},null,8,ws)])),e.areAllResultsSelected?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Ts,[Object(a["createElementVNode"])("span",{innerHTML:e.$sanitize(e.translate("UsersManager_AllUsersAreSelected",`<strong>${e.totalEntries}</strong>`)),style:{"margin-right":"3.5px"}},null,8,As),Object(a["createElementVNode"])("a",{class:"toggle-select-all-in-search",href:"#",onClick:t[12]||(t[12]=Object(a["withModifiers"])(t=>e.areAllResultsSelected=!e.areAllResultsSelected,["prevent"])),innerHTML:e.$sanitize(e.translate("UsersManager_ClickToSelectDisplayedUsers",`<strong>${e.users.length}</strong>`))},null,8,Ms)])):Object(a["createCommentVNode"])("",!0)])])):Object(a["createCommentVNode"])("",!0),(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(e.users,(s,n)=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("tr",{id:"row"+n,key:s.login},[Object(a["createElementVNode"])("td",_s,[Object(a["createElementVNode"])("span",xs,[Object(a["createElementVNode"])("label",null,[Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{type:"checkbox",id:"paged_users_select_row"+n,"onUpdate:modelValue":t=>e.selectedRows[n]=t,onClick:t[13]||(t[13]=t=>e.onRowSelected())},null,8,Ds),[[a["vModelCheckbox"],e.selectedRows[n]]]),Ls])])]),Object(a["createElementVNode"])("td",Rs,Object(a["toDisplayString"])(s.login),1),Object(a["createElementVNode"])("td",Ps,[Object(a["createElementVNode"])("div",null,[Object(a["createVNode"])(o,{"model-value":s.role,"onUpdate:modelValue":t=>{e.userToChange=s,e.roleToChangeTo=t.value,e.showAccessChangeConfirm(),t.abort()},"model-modifiers":{abortable:!0},disabled:"superuser"===s.role,uicontrol:"select",options:"anonymous"===s.login?e.anonymousAccessLevels:"noaccess"===s.role?e.onlyRoleAccessLevels:e.accessLevels},null,8,["model-value","onUpdate:modelValue","disabled","options"])])]),"superuser"===e.currentUserRole?(Object(a["openBlock"])(),Object(a["createElementBlock"])("td",Hs,Object(a["toDisplayString"])(s.email),1)):Object(a["createCommentVNode"])("",!0),"superuser"===e.currentUserRole?(Object(a["openBlock"])(),Object(a["createElementBlock"])("td",Is,[s.uses_2fa?(Object(a["openBlock"])(),Object(a["createElementBlock"])("span",Fs)):Object(a["createCommentVNode"])("",!0),s.uses_2fa?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createElementBlock"])("span",$s))])):Object(a["createCommentVNode"])("",!0),"superuser"===e.currentUserRole?(Object(a["openBlock"])(),Object(a["createElementBlock"])("td",qs,Object(a["toDisplayString"])(s.last_seen_ago?e.translate("UsersManager_XAgo",s.last_seen_ago):"-"),1)):Object(a["createCommentVNode"])("",!0),Object(a["createElementVNode"])("td",zs,[Object(a["createElementVNode"])("span",{class:Object(a["normalizeClass"])(Number.isInteger(s.invite_status)?"pending":s.invite_status),title:"expired"===s.invite_status?e.translate("UsersManager_ExpiredInviteAutomaticallyRemoved","3"):""},Object(a["toDisplayString"])(e.getInviteStatus(s.invite_status)),11,Gs)]),Object(a["createElementVNode"])("td",Ws,[("superuser"===e.currentUserRole||"admin"===e.currentUserRole&&s.invited_by===e.currentUserLogin)&&"active"!==s.invite_status?(Object(a["openBlock"])(),Object(a["createElementBlock"])("button",{key:0,class:"resend table-action",title:"Resend/Copy Invite Link",onClick:t=>{e.userToChange=s,e.resendRequestedUser()}},Ks,8,Ys)):Object(a["createCommentVNode"])("",!0),"anonymous"!==s.login?(Object(a["openBlock"])(),Object(a["createElementBlock"])("button",{key:1,class:"edituser table-action",title:"Edit",onClick:t=>e.$emit("editUser",{user:s})},Zs,8,Js)):Object(a["createCommentVNode"])("",!0),("superuser"===e.currentUserRole||"admin"===e.currentUserRole&&s.invited_by===e.currentUserLogin&&"active"!==s.invite_status)&&"anonymous"!==s.login?(Object(a["openBlock"])(),Object(a["createElementBlock"])("button",{key:2,class:"deleteuser table-action",title:"Delete",onClick:t=>{e.userToChange=s,e.showDeleteConfirm()}},sn,8,en)):Object(a["createCommentVNode"])("",!0)])],8,Bs))),128))])],2)),[[b]])]),_:1}),Object(a["createVNode"])(u,{modelValue:e.showPasswordConfirmationForUserRemoval,"onUpdate:modelValue":t[14]||(t[14]=t=>e.showPasswordConfirmationForUserRemoval=t),onConfirmed:e.deleteRequestedUsers,onAborted:e.resetUserAndRoleToChange},{default:Object(a["withCtx"])(()=>[e.userToChange?(Object(a["openBlock"])(),Object(a["createElementBlock"])("h2",{key:0,innerHTML:e.$sanitize(e.translate("UsersManager_DeleteUserConfirmSingle",`<strong>${e.userToChange.login}</strong>`))},null,8,nn)):Object(a["createCommentVNode"])("",!0),e.userToChange?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createElementBlock"])("h2",{key:1,innerHTML:e.$sanitize(e.translate("UsersManager_DeleteUserConfirmMultiple",`<strong>${e.affectedUsersCount}</strong>`))},null,8,rn))]),_:1},8,["modelValue","onConfirmed","onAborted"]),Object(a["createVNode"])(u,{modelValue:e.showPasswordConfirmationForAnonymousAccess,"onUpdate:modelValue":t[15]||(t[15]=t=>e.showPasswordConfirmationForAnonymousAccess=t),onConfirmed:e.changeUserRole,onAborted:e.resetUserAndRoleToChange},{default:Object(a["withCtx"])(()=>[e.userToChange?(Object(a["openBlock"])(),Object(a["createElementBlock"])("h3",{key:0,innerHTML:e.$sanitize(e.deleteUserPermConfirmSingleText)},null,8,an)):Object(a["createCommentVNode"])("",!0),e.userToChange?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createElementBlock"])("h3",{key:1,innerHTML:e.$sanitize(e.deleteUserPermConfirmMultipleText)},null,8,on)),Object(a["createElementVNode"])("h3",null,[Object(a["createElementVNode"])("em",null,[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.translate("General_Note"))+": ",1),Object(a["createElementVNode"])("span",{innerHTML:e.$sanitize(e.translate("UsersManager_AnonymousUserRoleChangeWarning","anonymous",e.getRoleDisplay(e.roleToChangeTo)))},null,8,ln)])])]),_:1},8,["modelValue","onConfirmed","onAborted"]),Object(a["createElementVNode"])("div",cn,[Object(a["createElementVNode"])("div",dn,[e.userToChange?(Object(a["openBlock"])(),Object(a["createElementBlock"])("h3",{key:0,innerHTML:e.$sanitize(e.deleteUserPermConfirmSingleText)},null,8,un)):Object(a["createCommentVNode"])("",!0),e.userToChange?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createElementBlock"])("p",{key:1,innerHTML:e.$sanitize(e.deleteUserPermConfirmMultipleText)},null,8,mn))]),Object(a["createElementVNode"])("div",bn,[Object(a["createElementVNode"])("a",{href:"",class:"modal-action modal-close btn",onClick:t[16]||(t[16]=Object(a["withModifiers"])(t=>e.changeUserRole(),["prevent"])),style:{"margin-right":"3.5px"}},Object(a["toDisplayString"])(e.translate("General_Yes")),1),Object(a["createElementVNode"])("a",{href:"",class:"modal-action modal-close modal-no",onClick:t[17]||(t[17]=Object(a["withModifiers"])(t=>e.resetUserAndRoleToChange(),["prevent"]))},Object(a["toDisplayString"])(e.translate("General_No")),1)])],512)],2)}const{$:hn}=window;var gn=Object(a["defineComponent"])({props:{initialSiteId:{type:[String,Number],required:!0},initialSiteName:{type:String,required:!0},currentUserRole:String,isLoadingUsers:Boolean,accessLevels:{type:Array,required:!0},filterAccessLevels:{type:Array,required:!0},filterStatusLevels:{type:Array,required:!0},totalEntries:Number,users:{type:Array,required:!0},searchParams:{type:Object,required:!0}},components:{Field:g["Field"],ActivityIndicator:h["ActivityIndicator"],Notification:h["Notification"],ContentBlock:h["ContentBlock"],PasswordConfirmation:g["PasswordConfirmation"]},directives:{DropdownMenu:h["DropdownMenu"],ContentTable:h["ContentTable"]},data(){return{areAllResultsSelected:!1,selectedRows:{},isAllCheckboxSelected:!1,isBulkActionsDisabled:!0,userToChange:null,roleToChangeTo:null,accessLevelFilter:null,statusLevelFilter:null,isRoleHelpToggled:!1,userTextFilter:"",permissionsForSite:{id:this.initialSiteId,name:this.initialSiteName},showPasswordConfirmationForUserRemoval:!1,showPasswordConfirmationForAnonymousAccess:!1}},emits:["editUser","changeUserRole","deleteUser","searchChange","resendInvite"],created(){this.onUserTextFilterChange=Object(h["debounce"])(this.onUserTextFilterChange,300)},watch:{users(){this.clearSelection()}},methods:{getInviteStatus(e){return Number.isInteger(e)?Object(h["translate"])("UsersManager_InviteDayLeft",e):"expired"===e?Object(h["translate"])("UsersManager_Expired"):Object(h["translate"])("UsersManager_Active")},onPermissionsForUpdate(e){this.permissionsForSite=e,this.changeSearch({idSite:this.permissionsForSite.id})},clearSelection(){this.selectedRows={},this.areAllResultsSelected=!1,this.isBulkActionsDisabled=!0,this.isAllCheckboxSelected=!1,this.userToChange=null},resetUserAndRoleToChange(){this.userToChange=null,this.roleToChangeTo=null},onAllCheckboxChange(){if(this.isAllCheckboxSelected){for(let e=0;e!==this.users.length;e+=1)this.selectedRows[e]=!0;this.isBulkActionsDisabled=!1}else this.clearSelection()},changeUserRole(e){this.$emit("changeUserRole",{users:this.userOperationSubject,role:this.roleToChangeTo,password:e})},onRowSelected(){const e=this.selectedCount;this.isBulkActionsDisabled=0===e,this.isAllCheckboxSelected=e===this.users.length},deleteRequestedUsers(e){this.$emit("deleteUser",{users:this.userOperationSubject,password:e})},resendRequestedUser(){this.$emit("resendInvite",{user:this.userToChange})},showDeleteConfirm(){this.showPasswordConfirmationForUserRemoval=!0},showAccessChangeConfirm(){const e="all"===this.userOperationSubject||Array.isArray(this.userOperationSubject)&&this.userOperationSubject.filter(e=>"anonymous"===e.login).length;e&&"view"===this.roleToChangeTo?this.showPasswordConfirmationForAnonymousAccess=!0:hn(this.$refs.changeUserRoleConfirmModal).modal({dismissible:!1}).modal("open")},getRoleDisplay(e){let t=null;return this.accessLevels.forEach(s=>{s.key===e&&(t=s.value)}),t},changeSearch(e){const t=Object.assign(Object.assign({},this.searchParams),e);this.$emit("searchChange",{params:t})},gotoPreviousPage(){this.changeSearch({offset:Math.max(0,this.searchParams.offset-this.searchParams.limit)})},gotoNextPage(){const e=this.searchParams.offset+this.searchParams.limit;e>=this.totalEntries||this.changeSearch({offset:e})},onUserTextFilterChange(e){this.userTextFilter=e,this.changeSearch({filter_search:e,offset:0})}},computed:{currentUserLogin(){return h["Matomo"].userLogin},paginationLowerBound(){return this.searchParams.offset+1},paginationUpperBound(){if(null===this.totalEntries)return"?";const e=this.searchParams;return Math.min(e.offset+e.limit,this.totalEntries)},userOperationSubject(){return this.userToChange?[this.userToChange]:this.areAllResultsSelected?"all":this.selectedUsers},selectedUsers(){const e=this.users,t=[];return Object.keys(this.selectedRows).forEach(s=>{const n=parseInt(s,10);this.selectedRows[s]&&e[n]&&t.push(e[n])}),t},rolesHelpText(){return Object(h["translate"])("UsersManager_RolesHelp",Object(h["externalLink"])("https://matomo.org/faq/general/faq_70/"),"</a>",Object(h["externalLink"])("https://matomo.org/faq/general/faq_69/"),"</a>")},affectedUsersCount(){return this.areAllResultsSelected?this.totalEntries||0:this.selectedCount},selectedCount(){let e=0;return Object.keys(this.selectedRows).forEach(t=>{this.selectedRows[t]&&(e+=1)}),e},deleteUserPermConfirmSingleText(){var e,t;return Object(h["translate"])("UsersManager_DeleteUserPermConfirmSingle",`<strong>${(null===(e=this.userToChange)||void 0===e?void 0:e.login)||""}</strong>`,`<strong>${this.getRoleDisplay(this.roleToChangeTo)}</strong>`,`<strong>${h["Matomo"].helper.htmlEntities((null===(t=this.permissionsForSite)||void 0===t?void 0:t.name)||"")}</strong>`)},deleteUserPermConfirmMultipleText(){var e;return Object(h["translate"])("UsersManager_DeleteUserPermConfirmMultiple",`<strong>${this.affectedUsersCount}</strong>`,`<strong>${this.getRoleDisplay(this.roleToChangeTo)}</strong>`,`<strong>${h["Matomo"].helper.htmlEntities((null===(e=this.permissionsForSite)||void 0===e?void 0:e.name)||"")}</strong>`)},bulkActionAccessLevels(){return this.accessLevels.filter(e=>"noaccess"!==e.key&&"superuser"!==e.key)},anonymousAccessLevels(){return this.accessLevels.filter(e=>"noaccess"===e.key||"view"===e.key)},onlyRoleAccessLevels(){return this.accessLevels.filter(e=>"role"===e.type)}}});gn.render=pn;var On=gn;const jn={class:"usersManager"},fn={key:0},vn={key:1},Cn={class:"row add-user-container"},kn={class:"col s12"},yn={class:"input-field",style:{"margin-right":"3.5px"}},Sn={key:0,class:"input-field"},Nn={key:0},Un={class:"add-existing-user-modal modal",ref:"addExistingUserModal"},Vn={class:"modal-content"},En={class:"modal-footer"};function wn(e,t,s,n,r,i){const o=Object(a["resolveComponent"])("EnrichedHeadline"),l=Object(a["resolveComponent"])("PagedUsersList"),c=Object(a["resolveComponent"])("UserEditForm"),d=Object(a["resolveComponent"])("Field"),u=Object(a["resolveDirective"])("content-intro"),m=Object(a["resolveDirective"])("tooltips");return Object(a["withDirectives"])((Object(a["openBlock"])(),Object(a["createElementBlock"])("div",jn,[Object(a["withDirectives"])(Object(a["createElementVNode"])("div",null,[Object(a["withDirectives"])((Object(a["openBlock"])(),Object(a["createElementBlock"])("div",null,[Object(a["createElementVNode"])("h2",null,[Object(a["createVNode"])(o,{"help-url":e.externalRawLink("https://matomo.org/docs/manage-users/"),"feature-name":"Users Management"},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.translate("UsersManager_ManageUsers")),1)]),_:1},8,["help-url"])]),"superuser"===e.currentUserRole?(Object(a["openBlock"])(),Object(a["createElementBlock"])("p",fn,Object(a["toDisplayString"])(e.translate("UsersManager_ManageUsersDesc")),1)):Object(a["createCommentVNode"])("",!0),"admin"===e.currentUserRole?(Object(a["openBlock"])(),Object(a["createElementBlock"])("p",vn,Object(a["toDisplayString"])(e.translate("UsersManager_ManageUsersAdminDesc")),1)):Object(a["createCommentVNode"])("",!0),Object(a["createElementVNode"])("div",Cn,[Object(a["createElementVNode"])("div",kn,[Object(a["createElementVNode"])("div",yn,[Object(a["createElementVNode"])("a",{class:"btn add-new-user",onClick:t[0]||(t[0]=t=>e.onAddNewUser())},Object(a["toDisplayString"])(e.translate("UsersManager_InviteNewUser")),1)]),"superuser"!==e.currentUserRole?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Sn,[Object(a["createElementVNode"])("a",{class:"btn add-existing-user",onClick:t[1]||(t[1]=t=>e.showAddExistingUserModal())},Object(a["toDisplayString"])(e.translate("UsersManager_AddExistingUser")),1)])):Object(a["createCommentVNode"])("",!0)])]),Object(a["createVNode"])(l,{onEditUser:t[2]||(t[2]=t=>e.onEditUser(t.user)),onChangeUserRole:t[3]||(t[3]=t=>e.onChangeUserRole(t.users,t.role,t.password)),onDeleteUser:t[4]||(t[4]=t=>e.onDeleteUser(t.users,t.password)),onSearchChange:t[5]||(t[5]=t=>{e.searchParams=t.params,e.fetchUsers()}),onResendInvite:t[6]||(t[6]=t=>e.triggerResendInviteForUser=t.user),"initial-site-id":e.initialSiteId,"initial-site-name":e.initialSiteName,"is-loading-users":e.isLoadingUsers,"current-user-role":e.currentUserRole,"access-levels":e.accessLevels,"filter-access-levels":e.filterAccessLevels,"filter-status-levels":e.filterStatusLevels,"search-params":e.searchParams,users:e.users,"total-entries":e.totalEntries},null,8,["initial-site-id","initial-site-name","is-loading-users","current-user-role","access-levels","filter-access-levels","filter-status-levels","search-params","users","total-entries"])])),[[u]])],512),[[a["vShow"],!e.isEditing&&!e.isInviting]]),Object(a["withDirectives"])(Object(a["createElementVNode"])("div",null,[(Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(e.usedInviteComponent),{"invite-token-expiry-days":e.inviteTokenExpiryDays,"initial-site-id":e.initialSiteId,"initial-site-name":e.initialSiteName,onAborted:t[7]||(t[7]=t=>e.isInviting=!1),onInvited:t[8]||(t[8]=t=>e.onInvite(t.user))},null,40,["invite-token-expiry-days","initial-site-id","initial-site-name"]))],512),[[a["vShow"],e.isInviting]]),(Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(e.usedResendInviteComponent),{user:e.triggerResendInviteForUser,"invite-token-expiry-days":e.inviteTokenExpiryDays,onClose:t[9]||(t[9]=t=>e.triggerResendInviteForUser=null)},null,40,["user","invite-token-expiry-days"])),e.isEditing?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Nn,[Object(a["createVNode"])(c,{onDone:t[10]||(t[10]=t=>e.onDoneEditing(t.isUserModified)),user:e.userBeingEdited,"current-user-role":e.currentUserRole,"access-levels":e.accessLevels,"filter-access-levels":e.filterAccessLevels,"activated-plugins":e.activatedPlugins,"password-strength-validation-rules":e.passwordStrengthValidationRules,onResendInvite:t[11]||(t[11]=t=>e.triggerResendInviteForUser=t.user),onUpdated:t[12]||(t[12]=t=>e.userBeingEdited=t.user)},null,8,["user","current-user-role","access-levels","filter-access-levels","activated-plugins","password-strength-validation-rules"])])):Object(a["createCommentVNode"])("",!0),Object(a["createElementVNode"])("div",Un,[Object(a["createElementVNode"])("div",Vn,[Object(a["createElementVNode"])("h3",null,Object(a["toDisplayString"])(e.translate("UsersManager_AddExistingUser")),1),Object(a["createElementVNode"])("p",null,Object(a["toDisplayString"])(e.translate("UsersManager_EnterUsernameOrEmail"))+":",1),Object(a["createElementVNode"])("div",null,[Object(a["createVNode"])(d,{modelValue:e.addNewUserLoginEmail,"onUpdate:modelValue":t[13]||(t[13]=t=>e.addNewUserLoginEmail=t),name:"add-existing-user-email",uicontrol:"text"},null,8,["modelValue"])])]),Object(a["createElementVNode"])("div",En,[Object(a["createElementVNode"])("a",{href:"",class:"modal-action modal-close btn",onClick:t[14]||(t[14]=Object(a["withModifiers"])(t=>e.addExistingUser(),["prevent"])),style:{"margin-right":"3.5px"}},Object(a["toDisplayString"])(e.translate("General_Add")),1),Object(a["createElementVNode"])("a",{href:"",class:"modal-action modal-close modal-no",onClick:t[15]||(t[15]=Object(a["withModifiers"])(t=>e.addNewUserLoginEmail=null,["prevent"]))},Object(a["toDisplayString"])(e.translate("General_Cancel")),1)])],512)])),[[m]])}const Tn=20,{$:An}=window;var Mn=Object(a["defineComponent"])({props:{currentUserRole:{type:String,required:!0},initialSiteName:{type:String,required:!0},initialSiteId:{type:String,required:!0},accessLevels:{type:Array,required:!0},filterAccessLevels:{type:Array,required:!0},filterStatusLevels:{type:Array,required:!0},activatedPlugins:{type:Array,required:!0},inviteTokenExpiryDays:{type:String,required:!0},passwordStrengthValidationRules:{type:Array,default:()=>[]},inviteComponent:{type:Object,required:!1,default:null},resendInviteComponent:{type:Object,required:!1,default:null}},components:{EnrichedHeadline:h["EnrichedHeadline"],PagedUsersList:On,UserEditForm:kt,Field:g["Field"]},directives:{ContentIntro:h["ContentIntro"],Tooltips:h["Tooltips"]},data(){return{isEditing:!!h["MatomoUrl"].urlParsed.value.showadduser,isInviting:!1,isCurrentUserSuperUser:!0,users:[],totalEntries:null,searchParams:{offset:0,limit:Tn,filter_search:"",filter_access:"",filter_status:"",idSite:this.initialSiteId},isLoadingUsers:!1,userBeingEdited:null,addNewUserLoginEmail:"",loading:!1,triggerResendInviteForUser:null}},created(){this.fetchUsers()},watch:{limit(){this.fetchUsers()}},methods:{onInvite(e){this.isInviting=!1,this.userBeingEdited=e,this.isEditing=!0,this.fetchUsers()},onEditUser(e){h["Matomo"].helper.lazyScrollToContent(),this.isEditing=!0,this.userBeingEdited=e},onDoneEditing(e){this.isEditing=!1,e&&this.fetchUsers()},showAddExistingUserModal(){An(this.$refs.addExistingUserModal).modal({dismissible:!1}).modal("open")},onChangeUserRole(e,t,s){this.isLoadingUsers=!0,Promise.resolve().then(()=>"all"===e?this.getAllUsersInSearch():e).then(e=>e.filter(e=>"superuser"!==e.role).map(e=>e.login)).then(e=>{const n=this.accessLevels.filter(e=>e.key===t).map(e=>e.type);let r;return r=n.length&&"capability"===n[0]?e.map(e=>({method:"UsersManager.addCapabilities",userLogin:e,capabilities:t,idSites:this.searchParams.idSite,passwordConfirmation:s})):e.map(e=>({method:"UsersManager.setUserAccess",userLogin:e,access:t,idSites:this.searchParams.idSite,passwordConfirmation:s})),h["AjaxHelper"].fetch(r,{createErrorNotification:!0})}).catch(()=>{}).finally(()=>this.fetchUsers())},getAllUsersInSearch(){return h["AjaxHelper"].fetch({method:"UsersManager.getUsersPlusRole",filter_search:this.searchParams.filter_search,filter_access:this.searchParams.filter_access,filter_status:this.searchParams.filter_status,idSite:this.searchParams.idSite,filter_limit:"-1"})},onDeleteUser(e,t){this.isLoadingUsers=!0,Promise.resolve().then(()=>"all"===e?this.getAllUsersInSearch():e).then(e=>e.map(e=>e.login)).then(e=>{const s=e.map(e=>({method:"UsersManager.deleteUser",userLogin:e,passwordConfirmation:t}));return h["AjaxHelper"].fetch(s,{createErrorNotification:!0})}).then(()=>{h["NotificationsStore"].scrollToNotification(h["NotificationsStore"].show({id:"removeUserSuccess",message:Object(h["translate"])("UsersManager_DeleteSuccess"),context:"success",type:"toast"})),this.fetchUsers()},()=>{"all"!==e&&e.length>1&&h["NotificationsStore"].show({id:"removeUserSuccess",message:Object(h["translate"])("UsersManager_DeleteNotSuccessful"),context:"warning",type:"toast"}),this.fetchUsers()})},fetchUsers(){return this.isLoadingUsers=!0,h["AjaxHelper"].fetch(Object.assign(Object.assign({},this.searchParams),{},{method:"UsersManager.getUsersPlusRole"}),{returnResponseObject:!0}).then(e=>{const t=e.getRequestHandle();this.totalEntries=parseInt(t.getResponseHeader("x-matomo-total-results")||"0",10),this.users=t.responseJSON,this.isLoadingUsers=!1}).catch(()=>{this.isLoadingUsers=!1})},addExistingUser(){return this.isLoadingUsers=!0,h["AjaxHelper"].fetch({method:"UsersManager.userExists",userLogin:this.addNewUserLoginEmail}).then(e=>e&&e.value?this.addNewUserLoginEmail:h["AjaxHelper"].fetch({method:"UsersManager.getUserLoginFromUserEmail",userEmail:this.addNewUserLoginEmail}).then(e=>e.value)).then(e=>h["AjaxHelper"].post({method:"UsersManager.setUserAccess"},{userLogin:e,access:"view",idSites:this.searchParams.idSite})).then(()=>this.fetchUsers()).catch(()=>{this.isLoadingUsers=!1})},onAddNewUser(){const e={isAllowed:!0};h["Matomo"].postEvent("UsersManager.initAddUser",e),e&&!e.isAllowed||(this.isInviting=!0,this.userBeingEdited=null)}},computed:{usedInviteComponent(){if(this.inviteComponent){const[e,t]=this.inviteComponent.split(".");return Object(h["useExternalPluginComponent"])(e,t)}return Object(h["useExternalPluginComponent"])("UsersManager","UserInvite")},usedResendInviteComponent(){if(this.resendInviteComponent){const[e,t]=this.resendInviteComponent.split(".");return Object(h["useExternalPluginComponent"])(e,t)}return Object(h["useExternalPluginComponent"])("UsersManager","ResendInviteModal")}}});Mn.render=wn;var Bn=Mn;const _n={key:0,class:"alert alert-info"},xn={key:1};function Dn(e,t,s,n,r,i){const o=Object(a["resolveComponent"])("Field"),l=Object(a["resolveComponent"])("SaveButton"),c=Object(a["resolveComponent"])("ContentBlock"),d=Object(a["resolveDirective"])("form");return Object(a["openBlock"])(),Object(a["createBlock"])(c,{"content-title":e.title},{default:Object(a["withCtx"])(()=>[0===e.anonymousSites.length?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",_n,Object(a["toDisplayString"])(e.translate("UsersManager_NoteNoAnonymousUserAccessSettingsWontBeUsed2")),1)):Object(a["createCommentVNode"])("",!0),e.anonymousSites.length>0?Object(a["withDirectives"])((Object(a["openBlock"])(),Object(a["createElementBlock"])("div",xn,[Object(a["createElementVNode"])("div",null,[Object(a["createVNode"])(o,{uicontrol:"radio",name:"anonymousDefaultReport",modelValue:e.defaultReport,"onUpdate:modelValue":t[0]||(t[0]=t=>e.defaultReport=t),introduction:e.translate("UsersManager_WhenUsersAreNotLoggedInAndVisitPiwikTheyShouldAccess"),options:e.defaultReportOptions},null,8,["modelValue","introduction","options"])]),Object(a["createElementVNode"])("div",null,[Object(a["createVNode"])(o,{uicontrol:"select",name:"anonymousDefaultReportWebsite",modelValue:e.defaultReportWebsite,"onUpdate:modelValue":t[1]||(t[1]=t=>e.defaultReportWebsite=t),options:e.anonymousSites},null,8,["modelValue","options"])]),Object(a["createElementVNode"])("div",null,[Object(a["createVNode"])(o,{uicontrol:"radio",name:"anonymousDefaultDate",modelValue:e.defaultDate,"onUpdate:modelValue":t[2]||(t[2]=t=>e.defaultDate=t),introduction:e.translate("UsersManager_ForAnonymousUsersReportDateToLoadByDefault"),options:e.availableDefaultDates},null,8,["modelValue","introduction","options"])]),Object(a["createVNode"])(l,{saving:e.loading,onConfirm:t[3]||(t[3]=t=>e.save())},null,8,["saving"])])),[[d]]):Object(a["createCommentVNode"])("",!0)]),_:1},8,["content-title"])}var Ln=Object(a["defineComponent"])({props:{title:{type:String,required:!0},anonymousSites:{type:Array,required:!0},anonymousDefaultReport:{type:[String,Number],required:!0},anonymousDefaultSite:{type:String,required:!0},anonymousDefaultDate:{type:String,required:!0},availableDefaultDates:{type:Object,required:!0},defaultReportOptions:{type:Object,required:!0}},components:{ContentBlock:h["ContentBlock"],SaveButton:g["SaveButton"],Field:g["Field"]},directives:{Form:g["Form"]},data(){return{loading:!1,defaultReport:""+this.anonymousDefaultReport,defaultReportWebsite:this.anonymousDefaultSite,defaultDate:this.anonymousDefaultDate}},methods:{save(){const e={anonymousDefaultReport:"1"===this.defaultReport?this.defaultReportWebsite:this.defaultReport,anonymousDefaultDate:this.defaultDate};this.loading=!0,h["AjaxHelper"].post({module:"UsersManager",action:"recordAnonymousUserSettings",format:"json"},e,{withTokenInUrl:!0}).then(()=>{const e=h["NotificationsStore"].show({message:Object(h["translate"])("CoreAdminHome_SettingsSaveSuccess"),id:"anonymousUserSettings",context:"success",type:"transient"});h["NotificationsStore"].scrollToNotification(e)}).finally(()=>{this.loading=!1})}}});Ln.render=Dn;var Rn=Ln;const Pn={id:"newsletterSignup"};function Hn(e,t,s,n,r,i){const o=Object(a["resolveComponent"])("Field"),l=Object(a["resolveComponent"])("SaveButton"),c=Object(a["resolveComponent"])("ContentBlock");return Object(a["withDirectives"])((Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Pn,[Object(a["createVNode"])(c,{"content-title":e.translate("UsersManager_NewsletterSignupTitle")},{default:Object(a["withCtx"])(()=>[Object(a["createElementVNode"])("div",null,[Object(a["createVNode"])(o,{uicontrol:"checkbox",name:"newsletterSignupCheckbox",id:"newsletterSignupCheckbox",modelValue:e.newsletterSignupCheckbox,"onUpdate:modelValue":t[0]||(t[0]=t=>e.newsletterSignupCheckbox=t),"full-width":!0,title:e.signupTitleText},null,8,["modelValue","title"])]),Object(a["createVNode"])(l,{id:"newsletterSignupBtn",onConfirm:t[1]||(t[1]=t=>e.signupForNewsletter()),disabled:!e.newsletterSignupCheckbox,value:e.newsletterSignupButtonTitle,saving:e.isProcessingNewsletterSignup},null,8,["disabled","value","saving"])]),_:1},8,["content-title"])],512)),[[a["vShow"],e.showNewsletterSignup]])}var In=Object(a["defineComponent"])({data(){return{showNewsletterSignup:!0,newsletterSignupCheckbox:!1,isProcessingNewsletterSignup:!1,newsletterSignupButtonTitle:Object(h["translate"])("General_Save")}},components:{ContentBlock:h["ContentBlock"],SaveButton:g["SaveButton"],Field:g["Field"]},computed:{signupTitleText(){return Object(h["translate"])("UsersManager_NewsletterSignupMessage",Object(h["externalLink"])("https://matomo.org/privacy-policy/"),"</a>")}},methods:{signupForNewsletter(){this.newsletterSignupButtonTitle=Object(h["translate"])("General_Loading"),this.isProcessingNewsletterSignup=!0,h["AjaxHelper"].fetch({module:"API",method:"UsersManager.newsletterSignup"},{withTokenInUrl:!0}).then(()=>{this.isProcessingNewsletterSignup=!1,this.showNewsletterSignup=!1;const e=h["NotificationsStore"].show({message:Object(h["translate"])("UsersManager_NewsletterSignupSuccessMessage"),id:"newslettersignup",context:"success",type:"transient"});h["NotificationsStore"].scrollToNotification(e)}).catch(()=>{this.isProcessingNewsletterSignup=!1;const e=h["NotificationsStore"].show({message:Object(h["translate"])("UsersManager_NewsletterSignupFailureMessage"),id:"newslettersignup",context:"error",type:"transient"});h["NotificationsStore"].scrollToNotification(e),this.newsletterSignupButtonTitle=Object(h["translate"])("General_PleaseTryAgain")})}}});In.render=Hn;var Fn=In;const $n={id:"userSettingsTable"},qn={key:0},zn={id:"languageHelp",class:"inline-help-node"},Gn=["href"],Wn={class:"sites_autocomplete"};function Yn(e,t,s,n,r,i){const o=Object(a["resolveComponent"])("Field"),l=Object(a["resolveComponent"])("SiteSelector"),c=Object(a["resolveComponent"])("SaveButton"),d=Object(a["resolveComponent"])("PasswordConfirmation"),u=Object(a["resolveComponent"])("ContentBlock"),m=Object(a["resolveDirective"])("form");return Object(a["openBlock"])(),Object(a["createBlock"])(u,{"content-title":e.title,feature:"true"},{default:Object(a["withCtx"])(()=>[Object(a["withDirectives"])((Object(a["openBlock"])(),Object(a["createElementBlock"])("form",$n,[Object(a["createElementVNode"])("div",null,[Object(a["createVNode"])(o,{uicontrol:"text",name:"username",title:e.translate("General_Username"),disabled:!0,modelValue:e.username,"onUpdate:modelValue":t[0]||(t[0]=t=>e.username=t),"inline-help":e.translate("UsersManager_YourUsernameCannotBeChanged")},null,8,["title","modelValue","inline-help"])]),e.isUsersAdminEnabled?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",qn,[Object(a["createVNode"])(o,{uicontrol:"text",name:"email","model-value":e.email,"onUpdate:modelValue":t[1]||(t[1]=t=>{e.email=t,e.doesRequirePasswordConfirmation=!0}),maxlength:100,title:e.translate("UsersManager_Email")},null,8,["model-value","title"])])):Object(a["createCommentVNode"])("",!0),Object(a["createElementVNode"])("div",zn,[Object(a["createElementVNode"])("a",{target:"_blank",rel:"noreferrer noopener",href:e.externalRawLink("https://matomo.org/translations/")},Object(a["toDisplayString"])(e.translate("LanguagesManager_AboutPiwikTranslations")),9,Gn)]),Object(a["createElementVNode"])("div",null,[Object(a["createVNode"])(o,{uicontrol:"select",name:"language",modelValue:e.language,"onUpdate:modelValue":t[2]||(t[2]=t=>e.language=t),title:e.translate("General_Language"),options:e.languageOptions,"inline-help":"#languageHelp"},null,8,["modelValue","title","options"])]),Object(a["createElementVNode"])("div",null,[Object(a["createVNode"])(o,{uicontrol:"select",name:"timeformat",modelValue:e.timeformat,"onUpdate:modelValue":t[3]||(t[3]=t=>e.timeformat=t),title:e.translate("General_TimeFormat"),options:e.timeFormats},null,8,["modelValue","title","options"])]),Object(a["createElementVNode"])("div",null,[Object(a["createVNode"])(o,{uicontrol:"radio",name:"defaultReport",modelValue:e.theDefaultReport,"onUpdate:modelValue":t[4]||(t[4]=t=>e.theDefaultReport=t),introduction:e.translate("UsersManager_ReportToLoadByDefault"),title:e.translate("General_AllWebsitesDashboard"),options:e.defaultReportOptions},null,8,["modelValue","introduction","title","options"])]),Object(a["createElementVNode"])("div",Wn,[Object(a["createVNode"])(l,{modelValue:e.site,"onUpdate:modelValue":t[5]||(t[5]=t=>e.site=t),"show-selected-site":!0,"switch-site-on-select":!1,"show-all-sites-item":!1,showselectedsite:!0,id:"defaultReportSiteSelector"},null,8,["modelValue"])]),Object(a["createElementVNode"])("div",null,[Object(a["createVNode"])(o,{uicontrol:"radio",name:"defaultDate",modelValue:e.theDefaultDate,"onUpdate:modelValue":t[6]||(t[6]=t=>e.theDefaultDate=t),introduction:e.translate("UsersManager_ReportDateToLoadByDefault"),options:e.availableDefaultDates},null,8,["modelValue","introduction","options"])]),Object(a["createVNode"])(c,{onConfirm:t[7]||(t[7]=t=>e.save()),saving:e.loading},null,8,["saving"]),Object(a["createVNode"])(d,{modelValue:e.showPasswordConfirmation,"onUpdate:modelValue":t[8]||(t[8]=t=>e.showPasswordConfirmation=t),onConfirmed:e.doSave},null,8,["modelValue","onConfirmed"])])),[[m]])]),_:1},8,["content-title"])}var Xn=Object(a["defineComponent"])({props:{isUsersAdminEnabled:{type:Boolean,required:!0},title:{type:String,required:!0},userLogin:{type:String,required:!0},userEmail:{type:String,required:!0},currentLanguageCode:{type:String,required:!0},languageOptions:{type:Object,required:!0},currentTimeformat:{type:Number,required:!0},timeFormats:{type:Object,required:!0},defaultReport:{type:[String,Number],required:!0},defaultReportOptions:{type:Object,required:!0},defaultReportIdSite:{type:[String,Number],required:!0},defaultReportSiteName:{type:String,required:!0},defaultDate:{type:String,required:!0},availableDefaultDates:{type:Object,required:!0}},components:{ContentBlock:h["ContentBlock"],SaveButton:g["SaveButton"],Field:g["Field"],SiteSelector:h["SiteSelector"],PasswordConfirmation:g["PasswordConfirmation"]},directives:{Form:g["Form"]},data(){return{doesRequirePasswordConfirmation:!1,username:this.userLogin,email:this.userEmail,language:this.currentLanguageCode,timeformat:this.currentTimeformat,theDefaultReport:this.defaultReport,site:{id:this.defaultReportIdSite,name:h["Matomo"].helper.htmlDecode(this.defaultReportSiteName)},theDefaultDate:this.defaultDate,loading:!1,showPasswordConfirmation:!1}},methods:{save(){this.doesRequirePasswordConfirmation?this.showPasswordConfirmation=!0:this.doSave()},doSave(e){const t={email:this.email,defaultReport:"MultiSites"===this.theDefaultReport?this.theDefaultReport:this.site.id,defaultDate:this.theDefaultDate,language:this.language,timeformat:this.timeformat};e&&(t.passwordConfirmation=e),this.loading=!0,h["AjaxHelper"].post({module:"UsersManager",action:"recordUserSettings",format:"json"},t,{withTokenInUrl:!0}).then(()=>{const e=h["NotificationsStore"].show({message:Object(h["translate"])("CoreAdminHome_SettingsSaveSuccess"),id:"PersonalSettingsSuccess",context:"success",type:"transient"});h["NotificationsStore"].scrollToNotification(e),this.doesRequirePasswordConfirmation=!1,this.loading=!1}).catch(()=>{this.loading=!1})}}});Xn.render=Yn;var Kn=Xn;const Jn={key:0},Qn={key:1,class:"alert alert-danger"},Zn={key:2,class:"alert alert-danger"},er=["action"],tr={style:{"margin-bottom":"2rem"}},sr={class:"form-group row tokenExpireDateTime"},nr={class:"col s12 m6"},rr={for:"token_expire_date",class:"active"},ar=["value","required"],ir={class:"col s12 m6"},or={class:"form-help"},lr={class:"inline-help"},cr=["innerHTML"],dr=["value"],ur=["value"],mr=["innerHTML"];function br(e,t,s,n,r,i){const o=Object(a["resolveComponent"])("Field"),l=Object(a["resolveComponent"])("ContentBlock");return Object(a["openBlock"])(),Object(a["createBlock"])(l,{"content-title":e.translate("UsersManager_AuthTokens")},{default:Object(a["withCtx"])(()=>[Object(a["createElementVNode"])("p",null,Object(a["toDisplayString"])(e.translate("UsersManager_TokenAuthIntro")),1),e.noDescription||e.invalidExpireDate?(Object(a["openBlock"])(),Object(a["createElementBlock"])("br",Jn)):Object(a["createCommentVNode"])("",!0),e.noDescription?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Qn,Object(a["toDisplayString"])(e.translate("General_Description"))+": "+Object(a["toDisplayString"])(e.translate("General_ValidatorErrorEmptyValue")),1)):Object(a["createCommentVNode"])("",!0),e.invalidExpireDate?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Zn,Object(a["toDisplayString"])(e.translate("UsersManager_TokenExpireDate"))+": "+Object(a["toDisplayString"])(e.translate("UsersManager_InvalidTokenExpireDateFormat")),1)):Object(a["createCommentVNode"])("",!0),Object(a["createElementVNode"])("form",{action:e.addNewTokenFormUrl,method:"post",class:"addTokenForm"},[Object(a["createVNode"])(o,{uicontrol:"text",name:"description",title:e.translate("General_Description"),maxlength:100,required:!0,"inline-help":e.translate("UsersManager_AuthTokenPurpose"),modelValue:e.tokenDescription,"onUpdate:modelValue":t[0]||(t[0]=t=>e.tokenDescription=t),autofocus:""},null,8,["title","inline-help","modelValue"]),Object(a["createVNode"])(o,{uicontrol:"checkbox",name:"secure_only",title:e.translate("UsersManager_OnlyAllowSecureRequests"),required:!1,"inline-help":e.secureOnlyHelp,modelValue:e.tokenSecureOnly,"onUpdate:modelValue":t[1]||(t[1]=t=>e.tokenSecureOnly=t),disabled:e.forceSecureOnlyCalc},null,8,["title","inline-help","modelValue","disabled"]),Object(a["createElementVNode"])("section",tr,[Object(a["createElementVNode"])("h3",null,Object(a["toDisplayString"])(e.translate("UsersManager_ExpireDate")),1),Object(a["createVNode"])(o,{uicontrol:"checkbox",name:"has_expiration",title:e.translate("UsersManager_TokenExpireDateCheckboxLabel"),required:!1,"inline-help":e.tokenExpireDateCheckboxHelpText,modelValue:e.tokenHasExpiration,"onUpdate:modelValue":t[2]||(t[2]=t=>e.tokenHasExpiration=t)},null,8,["title","inline-help","modelValue"]),Object(a["withDirectives"])(Object(a["createElementVNode"])("div",sr,[Object(a["createElementVNode"])("div",nr,[Object(a["createElementVNode"])("label",rr,Object(a["toDisplayString"])(e.translate("UsersManager_TokenExpireDate")),1),Object(a["createElementVNode"])("input",{type:"text",id:"token_expire_date",name:"token_expire_date",value:e.tokenExpireDate,required:e.tokenHasExpiration,onChange:t[3]||(t[3]=t=>e.onKeydownTokenExpireDate(t)),onKeydown:t[4]||(t[4]=t=>e.onKeydownTokenExpireDate(t))},null,40,ar)]),Object(a["createElementVNode"])("div",ir,[Object(a["createElementVNode"])("div",or,[Object(a["createElementVNode"])("span",lr,[Object(a["createElementVNode"])("span",null,[Object(a["createElementVNode"])("span",{innerHTML:e.$sanitize(e.tokenExpireDateHelpText)},null,8,cr)])])])])],512),[[a["vShow"],e.tokenHasExpiration]])]),Object(a["createElementVNode"])("input",{type:"hidden",value:e.formNonce,name:"nonce"},null,8,dr),Object(a["createElementVNode"])("input",{type:"submit",value:e.translate("UsersManager_CreateNewToken"),class:"btn",style:{"margin-right":"4px"}},null,8,ur),Object(a["createElementVNode"])("span",{innerHTML:e.$sanitize(e.cancelLink)},null,8,mr)],8,er)]),_:1},8,["content-title"])}const{$:pr}=window;var hr=Object(a["defineComponent"])({props:{formNonce:String,noDescription:Boolean,invalidExpireDate:Boolean,forceSecureOnly:Boolean,defaultExpirationDays:Number,expirationReminderDays:Number,initialExpireDate:String},components:{ContentBlock:h["ContentBlock"],Field:g["Field"]},data(){return{tokenDescription:"",tokenSecureOnly:!0,tokenHasExpiration:!0,tokenExpireDate:null,isSaving:!1}},mounted(){this.setInitialTokenExpirationDate()},computed:{addNewTokenFormUrl(){return"?"+h["MatomoUrl"].stringify(Object.assign(Object.assign({},h["MatomoUrl"].urlParsed.value),{},{module:"UsersManager",action:"addNewToken"}))},cancelLink(){const e="?"+h["MatomoUrl"].stringify(Object.assign(Object.assign({},h["MatomoUrl"].urlParsed.value),{},{module:"UsersManager",action:"userSecurity"}));return Object(h["translate"])("General_OrCancel",`<a class='entityCancelLink' href='${e}'>`,"</a>")},forceSecureOnlyCalc(){return this.forceSecureOnly},secureOnlyHelp(){return this.forceSecureOnly?Object(h["translate"])("UsersManager_AuthTokenSecureOnlyHelpForced"):Object(h["translate"])("UsersManager_AuthTokenSecureOnlyHelp")},tokenExpireDateHelpText(){return Object(h["translate"])("UsersManager_TokenExpireDateHelpText",this.defaultExpirationDays,this.expirationReminderDays)},tokenExpireDateCheckboxHelpText(){return Object(h["translate"])("UsersManager_TokenExpireDateCheckboxHelp",this.expirationReminderDays)}},methods:{setInitialTokenExpirationDate(){const e=new Date(this.initialExpireDate),t=h["Matomo"].getBaseDatePickerOptions(e),s=pr('[name="token_expire_date"]',this.$refs.root);setTimeout(()=>{this.tokenExpireDate=this.initialExpireDate,s.datepicker(t),s.datepicker("setDate",e)})},onKeydownTokenExpireDate(e){setTimeout(()=>{this.tokenExpireDate=e.target.value})}}});hr.render=br;var gr=hr;const Or=Object(a["createElementVNode"])("br",null,null,-1),jr={style:{"font-size":"40px"},class:"generatedTokenAuth"},fr=["href"];function vr(e,t,s,n,r,i){const o=Object(a["resolveComponent"])("ContentBlock"),l=Object(a["resolveDirective"])("copy-to-clipboard");return Object(a["openBlock"])(),Object(a["createBlock"])(o,{"content-title":e.translate("UsersManager_TokenSuccessfullyGenerated")},{default:Object(a["withCtx"])(()=>[Object(a["createElementVNode"])("p",null,[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.translate("UsersManager_PleaseStoreToken"))+" ",1),Or,Object(a["createTextVNode"])(" "+Object(a["toDisplayString"])(e.translate("UsersManager_DoNotStoreToken")),1)]),Object(a["createElementVNode"])("div",null,[Object(a["withDirectives"])((Object(a["openBlock"])(),Object(a["createElementBlock"])("pre",jr,[Object(a["createElementVNode"])("code",null,Object(a["toDisplayString"])(e.generatedToken),1)])),[[l,{}]])]),Object(a["createElementVNode"])("a",{href:e.userSecurityLink,class:"btn",style:{height:"auto"}},Object(a["toDisplayString"])(e.translate("UsersManager_ConfirmTokenCopied"))+" "+Object(a["toDisplayString"])(e.translate("UsersManager_GoBackSecurityPage")),9,fr)]),_:1},8,["content-title"])}var Cr=Object(a["defineComponent"])({props:{generatedToken:{type:String,required:!0}},components:{ContentBlock:h["ContentBlock"]},directives:{CopyToClipboard:h["CopyToClipboard"]},computed:{userSecurityLink(){return"?"+h["MatomoUrl"].stringify(Object.assign(Object.assign({},h["MatomoUrl"].urlParsed.value),{},{module:"UsersManager",action:"userSecurity"}))}}});Cr.render=vr;var kr=Cr;const yr=["action"],Sr=["value"],Nr={key:0},Ur=["innerHTML"],Vr=["value","disabled"],Er={key:1},wr={class:"alert alert-danger"},Tr=["innerHTML"],Ar={ref:"afterPassword"},Mr=Object(a["createElementVNode"])("a",{name:"authtokens",id:"authtokens"},null,-1),Br={class:"listAuthTokens"},_r={key:0},xr=["innerHTML"],Dr={class:"creationDate"},Lr=["action"],Rr=["value"],Pr=["value"],Hr=["title"],Ir=Object(a["createElementVNode"])("span",{class:"icon-delete"},null,-1),Fr=[Ir],$r={class:"tableActionBar"},qr=["href"],zr=Object(a["createElementVNode"])("span",{class:"icon-add"},null,-1),Gr=["action"],Wr=["value"],Yr=Object(a["createElementVNode"])("input",{name:"idtokenauth",type:"hidden",value:"all"},null,-1),Xr={type:"submit",class:"table-action delete-all-tokens"},Kr=Object(a["createElementVNode"])("span",{class:"icon-delete"},null,-1);function Jr(e,t,s,n,r,i){const o=Object(a["resolveComponent"])("Field"),l=Object(a["resolveComponent"])("ContentBlock"),c=Object(a["resolveDirective"])("auto-clear-password"),d=Object(a["resolveDirective"])("content-table");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",null,[e.isUsersAdminEnabled?(Object(a["openBlock"])(),Object(a["createBlock"])(l,{key:0,"content-title":e.translate("General_ChangePassword"),feature:"true"},{default:Object(a["withCtx"])(()=>[Object(a["createElementVNode"])("form",{id:"userSettingsTable",method:"post",action:e.recordPasswordChangeAction},[Object(a["createElementVNode"])("input",{type:"hidden",value:e.changePasswordNonce,name:"nonce"},null,8,Sr),e.isValidHost?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Nr,[Object(a["withDirectives"])(Object(a["createVNode"])(o,{uicontrol:"password",name:"password",autocomplete:"off",modelValue:e.password,"onUpdate:modelValue":t[0]||(t[0]=t=>e.password=t),title:e.translate("Login_NewPassword"),"inline-help":e.translate("UsersManager_IfYouWouldLikeToChangeThePasswordTypeANewOne"),"ui-control-attributes":{passwordStrengthValidationRules:e.passwordStrengthValidationRules},"onCheck:isValid":t[1]||(t[1]=t=>e.setPasswordStrengthValidation(t,"passwordStrengthMet"))},null,8,["modelValue","title","inline-help","ui-control-attributes"]),[[c]]),Object(a["withDirectives"])(Object(a["createVNode"])(o,{uicontrol:"password",name:"passwordBis",autocomplete:"off",modelValue:e.passwordBis,"onUpdate:modelValue":t[2]||(t[2]=t=>e.passwordBis=t),title:e.translate("Login_NewPasswordRepeat"),"inline-help":e.translate("UsersManager_TypeYourPasswordAgain"),"ui-control-attributes":{passwordStrengthValidationRules:e.passwordStrengthValidationRules},"onCheck:isValid":t[3]||(t[3]=t=>e.setPasswordStrengthValidation(t,"passwordBisStrengthMet"))},null,8,["modelValue","title","inline-help","ui-control-attributes"]),[[c]]),Object(a["withDirectives"])(Object(a["createVNode"])(o,{uicontrol:"password",name:"passwordConfirmation",autocomplete:"off",modelValue:e.passwordConfirmation,"onUpdate:modelValue":t[4]||(t[4]=t=>e.passwordConfirmation=t),title:e.translate("UsersManager_YourCurrentPassword"),"inline-help":e.translate("UsersManager_TypeYourCurrentPassword")},null,8,["modelValue","title","inline-help"]),[[c]]),Object(a["createElementVNode"])("div",{class:"alert alert-info",innerHTML:e.$sanitize(e.changePasswordInfoNotification)},null,8,Ur),Object(a["createElementVNode"])("input",{type:"submit",value:e.translate("General_Save"),class:"btn",disabled:!e.isPasswordChangeFormSubmitEnabled},null,8,Vr)])):Object(a["createCommentVNode"])("",!0),e.isValidHost?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Er,[Object(a["createElementVNode"])("div",wr,[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.translate("UsersManager_InjectedHostCannotChangePwd",e.invalidHost))+" ",1),e.isSuperUser?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createElementBlock"])("span",{key:0,innerHTML:e.$sanitize(e.emailYourAdminText)},null,8,Tr))])]))],8,yr)]),_:1},8,["content-title"])):Object(a["createCommentVNode"])("",!0),Object(a["createElementVNode"])("div",Ar,[e.isUsersAdminEnabled&&e.afterPasswordComponent?(Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(e.afterPasswordComponent),{key:0})):Object(a["createCommentVNode"])("",!0)],512),Mr,Object(a["createVNode"])(l,{"content-title":e.translate("UsersManager_AuthTokens")},{default:Object(a["withCtx"])(()=>{var t,s;return[Object(a["createElementVNode"])("p",null,Object(a["toDisplayString"])(e.translate("UsersManager_TokenAuthIntro"))+" "+Object(a["toDisplayString"])(e.translate("UsersManager_ExpiredTokensDeleteAutomatically")),1),Object(a["withDirectives"])((Object(a["openBlock"])(),Object(a["createElementBlock"])("table",Br,[Object(a["createElementVNode"])("thead",null,[Object(a["createElementVNode"])("tr",null,[Object(a["createElementVNode"])("th",null,Object(a["toDisplayString"])(e.translate("General_CreationDate")),1),Object(a["createElementVNode"])("th",null,Object(a["toDisplayString"])(e.translate("General_Description")),1),Object(a["createElementVNode"])("th",null,Object(a["toDisplayString"])(e.translate("UsersManager_LastUsed")),1),Object(a["createElementVNode"])("th",null,Object(a["toDisplayString"])(e.translate("UsersManager_SecureUseOnly")),1),Object(a["createElementVNode"])("th",null,Object(a["toDisplayString"])(e.translate("UsersManager_ExpireDate")),1),Object(a["createElementVNode"])("th",null,Object(a["toDisplayString"])(e.translate("General_Actions")),1)])]),Object(a["createElementVNode"])("tbody",null,[null!==(t=e.tokens)&&void 0!==t&&t.length?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createElementBlock"])("tr",_r,[Object(a["createElementVNode"])("td",{colspan:5,innerHTML:e.$sanitize(e.noTokenCreatedYetText)},null,8,xr)])),(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(e.tokens||[],t=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("tr",{key:t.idusertokenauth},[Object(a["createElementVNode"])("td",null,[Object(a["createElementVNode"])("span",Dr,Object(a["toDisplayString"])(t.date_created),1)]),Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(t.description),1),Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(t.last_used?t.last_used:e.translate("General_Never")),1),Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(1===parseInt(t.secure_only,10)?e.translate("General_Yes"):e.translate("General_No")),1),Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(t.date_expired?t.date_expired:e.translate("General_Never")),1),Object(a["createElementVNode"])("td",null,[Object(a["createElementVNode"])("form",{method:"post",action:e.deleteTokenAction,style:{display:"inline"}},[Object(a["createElementVNode"])("input",{name:"nonce",type:"hidden",value:e.deleteTokenNonce},null,8,Rr),Object(a["createElementVNode"])("input",{name:"idtokenauth",type:"hidden",value:t.idusertokenauth},null,8,Pr),Object(a["createElementVNode"])("button",{type:"submit",class:"table-action",title:e.translate("General_Delete")},Fr,8,Hr)],8,Lr)])]))),128))])])),[[d]]),Object(a["createElementVNode"])("div",$r,[Object(a["createElementVNode"])("a",{href:e.addNewTokenLink,class:"addNewToken"},[zr,Object(a["createTextVNode"])(" "+Object(a["toDisplayString"])(e.translate("UsersManager_CreateNewToken")),1)],8,qr),null!==(s=e.tokens)&&void 0!==s&&s.length?(Object(a["openBlock"])(),Object(a["createElementBlock"])("form",{key:0,method:"post",action:e.deleteTokenAction,style:{display:"inline"}},[Object(a["createElementVNode"])("input",{name:"nonce",type:"hidden",value:e.deleteTokenNonce},null,8,Wr),Yr,Object(a["createElementVNode"])("button",Xr,[Kr,Object(a["createTextVNode"])(" "+Object(a["toDisplayString"])(e.translate("UsersManager_DeleteAllTokens")),1)])],8,Gr)):Object(a["createCommentVNode"])("",!0)])]}),_:1},8,["content-title"])])}var Qr=Object(a["defineComponent"])({props:{deleteTokenNonce:String,tokens:Array,isUsersAdminEnabled:Boolean,changePasswordNonce:String,isValidHost:Boolean,isSuperUser:Boolean,invalidHost:String,afterPasswordEventContent:String,invalidHostMailLinkStart:String,passwordStrengthValidationRules:Array},components:{ContentBlock:h["ContentBlock"],Field:g["Field"]},directives:{ContentTable:h["ContentTable"],AutoClearPassword:h["AutoClearPassword"]},data(){return{password:"",passwordBis:"",passwordConfirmation:"",passwordStrengthMet:!1,passwordBisStrengthMet:!1}},mounted(){const e=this.$refs.afterPassword;h["Matomo"].helper.compileVueEntryComponents(e)},methods:{setPasswordStrengthValidation(e,t){"passwordStrengthMet"===t&&(this.passwordStrengthMet=e),"passwordBisStrengthMet"===t&&(this.passwordBisStrengthMet=e)}},computed:{recordPasswordChangeAction(){return"?"+h["MatomoUrl"].stringify(Object.assign(Object.assign({},h["MatomoUrl"].urlParsed.value),{},{module:"UsersManager",action:"recordPasswordChange"}))},emailYourAdminText(){return Object(h["translate"])("UsersManager_EmailYourAdministrator",this.invalidHostMailLinkStart||"","</a>")},noTokenCreatedYetText(){const e="?"+h["MatomoUrl"].stringify(Object.assign(Object.assign({},h["MatomoUrl"].urlParsed.value),{},{module:"UsersManager",action:"addNewToken"}));return Object(h["translate"])("UsersManager_NoTokenCreatedYetCreateNow",`<a href="${e}">`,"</a>")},changePasswordInfoNotification(){var e;const t=Object(h["translate"])("UsersManager_PasswordChangeTerminatesOtherSessions");let s="";return null!==(e=this.tokens)&&void 0!==e&&e.length&&(s=Object(h["translate"])("UsersManager_PasswordChangeDoesNotRevokeAuthTokens",`<a href="#authtokens">${Object(h["translate"])("UsersManager_AuthTokens")}</a>`)),[t,s].filter(e=>e).join("<br><br>")},deleteTokenAction(){return"?"+h["MatomoUrl"].stringify(Object.assign(Object.assign({},h["MatomoUrl"].urlParsed.value),{},{module:"UsersManager",action:"deleteToken"}))},addNewTokenLink(){return"?"+h["MatomoUrl"].stringify(Object.assign(Object.assign({},h["MatomoUrl"].urlParsed.value),{},{module:"UsersManager",action:"addNewToken"}))},afterPasswordComponent(){if(!this.afterPasswordEventContent)return null;const e=this.$refs.afterPassword;return Object(a["markRaw"])({template:this.afterPasswordEventContent,beforeUnmount(){h["Matomo"].helper.destroyVueComponent(e)}})},isPasswordChangeFormSubmitEnabled(){var e,t;return this.passwordConfirmation&&(!(null!==(e=this.passwordStrengthValidationRules)&&void 0!==e&&e.length)||(null===(t=this.passwordStrengthValidationRules)||void 0===t?void 0:t.length)&&this.passwordStrengthMet&&this.passwordBisStrengthMet)}}});Qr.render=Jr;var Zr=Qr;const ea=["innerHTML"],ta={style:{"margin-left":"20px"}},sa=["href"],na=Object(a["createElementVNode"])("br",null,null,-1);function ra(e,t,s,n,r,i){const o=Object(a["resolveComponent"])("PersonalSettings"),l=Object(a["resolveComponent"])("NewsletterSettings"),c=Object(a["resolveComponent"])("PluginSettings"),d=Object(a["resolveComponent"])("ContentBlock");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",null,[Object(a["createVNode"])(o,{"is-users-admin-enabled":e.isUsersAdminEnabled,title:e.translate("UsersManager_PersonalSettings"),"user-login":e.userLogin,"user-email":e.userEmail,"current-language-code":e.currentLanguageCode,"language-options":e.languageOptions,"current-timeformat":e.currentTimeformat,"time-formats":e.timeFormats,"default-report":e.defaultReport,"default-report-options":e.defaultReportOptions,"default-report-id-site":e.defaultReportIdSite,"default-report-site-name":e.defaultReportSiteName,"default-date":e.defaultDate,"available-default-dates":e.availableDefaultDates},null,8,["is-users-admin-enabled","title","user-login","user-email","current-language-code","language-options","current-timeformat","time-formats","default-report","default-report-options","default-report-id-site","default-report-site-name","default-date","available-default-dates"]),e.showNewsletterSignup?(Object(a["openBlock"])(),Object(a["createBlock"])(l,{key:0})):Object(a["createCommentVNode"])("",!0),Object(a["createVNode"])(c,{mode:"user"}),Object(a["createVNode"])(d,{"content-title":e.translate("UsersManager_ExcludeVisitsViaCookie"),class:"ignoreCookieSettings"},{default:Object(a["withCtx"])(()=>[Object(a["createElementVNode"])("p",{innerHTML:e.$sanitize(e.yourVisitsAreText)},null,8,ea),Object(a["createElementVNode"])("span",ta,[Object(a["createElementVNode"])("a",{href:e.setIgnoreCookieLink},[Object(a["createTextVNode"])(" › "+Object(a["toDisplayString"])(e.ignoreCookieSet?e.translate("UsersManager_ClickHereToDeleteTheCookie"):e.translate("UsersManager_ClickHereToSetTheCookieOnDomain",e.piwikHost))+" ",1),na],8,sa)])]),_:1},8,["content-title"])])}var aa=Object(a["defineComponent"])({props:{isUsersAdminEnabled:{type:Boolean,required:!0},userLogin:{type:String,required:!0},userEmail:{type:String,required:!0},currentLanguageCode:{type:String,required:!0},languageOptions:{type:Object,required:!0},currentTimeformat:{type:Number,required:!0},timeFormats:{type:Object,required:!0},defaultReport:{type:[String,Number],required:!0},defaultReportOptions:{type:Object,required:!0},defaultReportIdSite:{type:[String,Number],required:!0},defaultReportSiteName:{type:String,required:!0},defaultDate:{type:String,required:!0},availableDefaultDates:{type:Object,required:!0},showNewsletterSignup:Boolean,ignoreCookieSet:Boolean,setIgnoreCookieNonce:String,piwikHost:{type:String,required:!0}},components:{ContentBlock:h["ContentBlock"],PersonalSettings:Kn,NewsletterSettings:Fn,PluginSettings:g["PluginSettings"]},computed:{yourVisitsAreText(){return this.ignoreCookieSet?Object(h["translate"])("UsersManager_YourVisitsAreIgnoredOnDomain","<strong>",this.piwikHost,"</strong>"):Object(h["translate"])("UsersManager_YourVisitsAreNotIgnored","<strong>","</strong>")},setIgnoreCookieLink(){return`?${h["MatomoUrl"].stringify({module:"UsersManager",action:"setIgnoreCookie",nonce:this.setIgnoreCookieNonce})}#excludeCookie`}}});aa.render=ra;var ia=aa;
/*!
 * Matomo - free/libre analytics platform
 *
 * @link    https://matomo.org
 * @license https://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */}})}));
//# sourceMappingURL=UsersManager.umd.min.js.map