(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t(require("vue")):"function"===typeof define&&define.amd?define([],t):"object"===typeof exports?exports["CoreHome"]=t(require("vue")):e["CoreHome"]=t(e["Vue"])})("undefined"!==typeof self?self:this,(function(e){return function(e){var t={};function o(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,o),n.l=!0,n.exports}return o.m=e,o.c=t,o.d=function(e,t,i){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(i,n,function(t){return e[t]}.bind(null,n));return i},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="plugins/CoreHome/vue/dist/",o(o.s="fae3")}({2342:function(e,t,o){"use strict";
/*!
 * Matomo - free/libre analytics platform
 *
 * @link    https://matomo.org
 * @license https://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */window.hasBlockedContent=!1},"8bbf":function(t,o){t.exports=e},fae3:function(e,t,o){"use strict";if(o.r(t),o.d(t,"createVueApp",(function(){return de})),o.d(t,"importPluginUmd",(function(){return ge})),o.d(t,"useExternalPluginComponent",(function(){return be})),o.d(t,"DirectiveUtilities",(function(){return ve})),o.d(t,"debounce",(function(){return je})),o.d(t,"clone",(function(){return ye})),o.d(t,"VueEntryContainer",(function(){return Ce})),o.d(t,"ActivityIndicator",(function(){return Fe})),o.d(t,"MatomoLoader",(function(){return Me})),o.d(t,"translate",(function(){return a})),o.d(t,"translateOrDefault",(function(){return r})),o.d(t,"externalRawLink",(function(){return ie})),o.d(t,"externalLink",(function(){return ne})),o.d(t,"Alert",(function(){return Re})),o.d(t,"AjaxHelper",(function(){return W})),o.d(t,"setCookie",(function(){return X})),o.d(t,"getCookie",(function(){return Z})),o.d(t,"deleteCookie",(function(){return ee})),o.d(t,"MatomoUrl",(function(){return _})),o.d(t,"Matomo",(function(){return x})),o.d(t,"Periods",(function(){return c})),o.d(t,"Day",(function(){return f})),o.d(t,"Week",(function(){return O})),o.d(t,"Month",(function(){return y})),o.d(t,"Year",(function(){return k})),o.d(t,"Range",(function(){return C})),o.d(t,"format",(function(){return d})),o.d(t,"getToday",(function(){return u})),o.d(t,"parseDate",(function(){return m})),o.d(t,"todayIsInRange",(function(){return p})),o.d(t,"getWeekNumber",(function(){return h})),o.d(t,"datesAreInTheSamePeriod",(function(){return g})),o.d(t,"NumberFormatter",(function(){return J})),o.d(t,"formatNumber",(function(){return ae})),o.d(t,"formatPercent",(function(){return re})),o.d(t,"formatCurrency",(function(){return se})),o.d(t,"formatEvolution",(function(){return le})),o.d(t,"calculateAndFormatEvolution",(function(){return ce})),o.d(t,"DropdownMenu",(function(){return He})),o.d(t,"FocusAnywhereButHere",(function(){return Ge})),o.d(t,"FocusIf",(function(){return Je})),o.d(t,"Tooltips",(function(){return Ze})),o.d(t,"MatomoDialog",(function(){return it})),o.d(t,"ExpandOnClick",(function(){return ut})),o.d(t,"ExpandOnHover",(function(){return ft})),o.d(t,"ShowSensitiveData",(function(){return Ot})),o.d(t,"DropdownButton",(function(){return yt})),o.d(t,"SelectOnFocus",(function(){return Et})),o.d(t,"CopyToClipboard",(function(){return Tt})),o.d(t,"SideNav",(function(){return Vt})),o.d(t,"EnrichedHeadline",(function(){return Gt})),o.d(t,"ContentBlock",(function(){return no})),o.d(t,"Comparisons",(function(){return Do})),o.d(t,"ComparisonsStore",(function(){return So})),o.d(t,"ComparisonsStoreInstance",(function(){return Co})),o.d(t,"MenuItemsDropdown",(function(){return Ro})),o.d(t,"DatePicker",(function(){return zo})),o.d(t,"DateRangePicker",(function(){return Zo})),o.d(t,"PeriodDatePicker",(function(){return ni})),o.d(t,"Notification",(function(){return hi})),o.d(t,"NotificationGroup",(function(){return Si})),o.d(t,"NotificationsStore",(function(){return wi})),o.d(t,"ShowHelpLink",(function(){return Vi})),o.d(t,"SitesStore",(function(){return Bi})),o.d(t,"SiteSelector",(function(){return en})),o.d(t,"QuickAccess",(function(){return vn})),o.d(t,"FieldArray",(function(){return Cn})),o.d(t,"MultiPairField",(function(){return In})),o.d(t,"PeriodSelector",(function(){return ga})),o.d(t,"ReportingMenu",(function(){return Qa})),o.d(t,"ReportingMenuStore",(function(){return qa})),o.d(t,"ReportingPagesStore",(function(){return Fa})),o.d(t,"ReportMetadataStore",(function(){return er})),o.d(t,"WidgetsStore",(function(){return Ya})),o.d(t,"WidgetLoader",(function(){return mr})),o.d(t,"WidgetContainer",(function(){return fr})),o.d(t,"WidgetByDimensionContainer",(function(){return Dr})),o.d(t,"Widget",(function(){return Ir})),o.d(t,"ReportingPage",(function(){return Gr})),o.d(t,"ReportExport",(function(){return vs})),o.d(t,"Sparkline",(function(){return ws})),o.d(t,"Progressbar",(function(){return Ts})),o.d(t,"ContentIntro",(function(){return Vs})),o.d(t,"ContentTable",(function(){return Ns})),o.d(t,"AjaxForm",(function(){return Ls})),o.d(t,"Passthrough",(function(){return _s})),o.d(t,"DataTableActions",(function(){return _l})),o.d(t,"VersionInfoHeaderMessage",(function(){return Xl})),o.d(t,"MobileLeftMenu",(function(){return sc})),o.d(t,"scrollToAnchorInUrl",(function(){return gc})),o.d(t,"SearchFiltersPersistenceStore",(function(){return dr})),o.d(t,"AutoClearPassword",(function(){return vc})),o.d(t,"PasswordStrength",(function(){return wc})),o.d(t,"EntityDuplicatorModal",(function(){return $c})),o.d(t,"EntityDuplicatorAction",(function(){return zc})),o.d(t,"EntityDuplicatorStore",(function(){return Kc})),o.d(t,"BaseDuplicatorAdapter",(function(){return Yc})),"undefined"!==typeof window){var i=window.document.currentScript,n=i&&i.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);n&&(o.p=n[1])}o("2342");
/*!
 * Matomo - free/libre analytics platform
 *
 * @link    https://matomo.org
 * @license https://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */
function a(e,...t){if(!e)return"";let o=t;return 1===t.length&&t[0]&&Array.isArray(t[0])&&([o]=t),window._pk_translate(e,o)}function r(e,...t){return e&&window.piwik_translations[e]?a(e,...t):e}function s(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}
/*!
 * Matomo - free/libre analytics platform
 *
 * @link    https://matomo.org
 * @license https://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */class l{constructor(){s(this,"periods",{}),s(this,"periodOrder",[])}addCustomPeriod(e,t){if(this.periods[e])throw new Error(`The "${e}" period already exists! It cannot be overridden.`);this.periods[e]=t,this.periodOrder.push(e)}getAllLabels(){return Array().concat(this.periodOrder)}get(e){const t=this.periods[e];if(!t)throw new Error("Invalid period label: "+e);return t}parse(e,t){return this.get(e).parse(t)}isRecognizedPeriod(e){return!!this.periods[e]}}var c=new l;
/*!
 * Matomo - free/libre analytics platform
 *
 * @link    https://matomo.org
 * @license https://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */function d(e){return $.datepicker.formatDate("yy-mm-dd",e)}function u(){const e=new Date(Date.now());return e.setTime(e.getTime()+60*e.getTimezoneOffset()*1e3),e.setHours(e.getHours()+(window.piwik.timezoneOffset||0)/3600),e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e}function m(e){if(e instanceof Date)return e;const t=decodeURIComponent(e).trim();if(""===t)throw new Error("Invalid date, empty string.");if("today"===t||"now"===t)return u();if("yesterday"===t||"yesterdaySameTime"===t){const e=u();return e.setDate(e.getDate()-1),e}if(t.match(/last[ -]?week/i)){const e=u();return e.setDate(e.getDate()-7),e}if(t.match(/last[ -]?month/i)){const e=u();return e.setDate(1),e.setMonth(e.getMonth()-1),e}if(t.match(/last[ -]?year/i)){const e=u();return e.setFullYear(e.getFullYear()-1),e}return $.datepicker.parseDate("yy-mm-dd",t)}function p(e){return 2===e.length&&(u()>=e[0]&&u()<=e[1])}function h(e){const t=new Date(e.valueOf()),o=(e.getDay()+6)%7;t.setDate(t.getDate()-o+3);const i=t.valueOf();if(t.setMonth(0,1),4!==t.getDay()){const e=(4-t.getDay()+7)%7;t.setMonth(0,1+e)}return 1+Math.ceil((i-t.valueOf())/6048e5)}function g(e,t,o){const i=e.getFullYear(),n=e.getMonth(),a=e.getDate(),r=h(e),s=t.getFullYear(),l=t.getMonth(),c=t.getDate(),d=h(t);switch(o){case"day":return i===s&&n===l&&a===c;case"week":return i===s&&r===d;case"month":return i===s&&n===l;case"year":return i===s;default:return!1}}function b(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}
/*!
 * Matomo - free/libre analytics platform
 *
 * @link    https://matomo.org
 * @license https://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */class f{constructor(e){b(this,"dateInPeriod",void 0),this.dateInPeriod=e}static parse(e){return new f(m(e))}static getDisplayText(){return a("Intl_PeriodDay")}getPrettyString(){return d(this.dateInPeriod)}getDateRange(){return[new Date(this.dateInPeriod.getTime()),new Date(this.dateInPeriod.getTime())]}containsToday(){return p(this.getDateRange())}}function v(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}
/*!
 * Matomo - free/libre analytics platform
 *
 * @link    https://matomo.org
 * @license https://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */c.addCustomPeriod("day",f);class O{constructor(e){v(this,"dateInPeriod",void 0),this.dateInPeriod=e}static parse(e){return new O(m(e))}static getDisplayText(){return a("Intl_PeriodWeek")}getPrettyString(){const e=this.getDateRange(),t=d(e[0]),o=d(e[1]);return a("General_DateRangeFromTo",[t,o])}getDateRange(){const e=(this.dateInPeriod.getDay()+6)%7,t=new Date(this.dateInPeriod.getTime());t.setDate(this.dateInPeriod.getDate()-e);const o=new Date(t.getTime());return o.setDate(t.getDate()+6),[t,o]}containsToday(){return p(this.getDateRange())}}function j(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}
/*!
 * Matomo - free/libre analytics platform
 *
 * @link    https://matomo.org
 * @license https://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */c.addCustomPeriod("week",O);class y{constructor(e){j(this,"dateInPeriod",void 0),this.dateInPeriod=e}static parse(e){return new y(m(e))}static getDisplayText(){return a("Intl_PeriodMonth")}getPrettyString(){const e=a("Intl_Month_Long_StandAlone_"+(this.dateInPeriod.getMonth()+1));return`${e} ${this.dateInPeriod.getFullYear()}`}getDateRange(){const e=new Date(this.dateInPeriod.getTime());e.setDate(1);const t=new Date(this.dateInPeriod.getTime());return t.setDate(1),t.setMonth(t.getMonth()+1),t.setDate(0),[e,t]}containsToday(){return p(this.getDateRange())}}function w(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}
/*!
 * Matomo - free/libre analytics platform
 *
 * @link    https://matomo.org
 * @license https://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */c.addCustomPeriod("month",y);class k{constructor(e){w(this,"dateInPeriod",void 0),this.dateInPeriod=e}static parse(e){return new k(m(e))}static getDisplayText(){return a("Intl_PeriodYear")}getPrettyString(){return this.dateInPeriod.getFullYear().toString()}getDateRange(){const e=new Date(this.dateInPeriod.getTime());e.setMonth(0),e.setDate(1);const t=new Date(this.dateInPeriod.getTime());return t.setMonth(12),t.setDate(0),[e,t]}containsToday(){return p(this.getDateRange())}}function S(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}
/*!
 * Matomo - free/libre analytics platform
 *
 * @link    https://matomo.org
 * @license https://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */c.addCustomPeriod("year",k);class C{constructor(e,t,o){S(this,"startDate",void 0),S(this,"endDate",void 0),S(this,"childPeriodType",void 0),this.startDate=e,this.endDate=t,this.childPeriodType=o}static getLastNRange(e,t,o){const i=Math.max(parseInt(t.toString(),10)-1,0);if(Number.isNaN(i))throw new Error("Invalid range strAmount");let n=o?m(o):u(),a=new Date(n.getTime());if("day"===e)a.setDate(a.getDate()-i);else if("week"===e)a.setDate(a.getDate()-7*i);else if("month"===e)a.setDate(1),a.setMonth(a.getMonth()-i);else{if("year"!==e)throw new Error(`Unknown period type '${e}'.`);a.setFullYear(a.getFullYear()-i)}if("day"!==e){const t=c.periods[e].parse(a),o=c.periods[e].parse(n);[a]=t.getDateRange(),[,n]=o.getDateRange()}const r=new Date(1991,7,6);if(a.getTime()-r.getTime()<0)switch(e){case"year":a=new Date(1992,0,1);break;case"month":a=new Date(1991,8,1);break;case"week":a=new Date(1991,8,12);break;case"day":default:a=r;break}return new C(a,n,e)}static getLastNRangeChild(e,t,o){const i=t?m(t):u();let n=new Date(i.getTime()),a=new Date(i.getTime());if("day"===e)n.setDate(n.getDate()-o),a.setDate(a.getDate()-o);else if("week"===e)n.setDate(n.getDate()-7*o),a.setDate(a.getDate()-7*o);else if("month"===e)n.setDate(1),n.setMonth(n.getMonth()-o),a.setDate(1),a.setMonth(a.getMonth()-o);else{if("year"!==e)throw new Error(`Unknown period type '${e}'.`);n.setFullYear(n.getFullYear()-o),a.setFullYear(a.getFullYear()-o)}if("day"!==e){const t=c.periods[e].parse(n),o=c.periods[e].parse(a);[n]=t.getDateRange(),[,a]=o.getDateRange()}const r=new Date(1991,7,6);if(n.getTime()-r.getTime()<0)switch(e){case"year":n=new Date(1992,0,1);break;case"month":n=new Date(1991,8,1);break;case"week":n=new Date(1991,8,12);break;case"day":default:n=r;break}return new C(n,a,e)}static parse(e,t="day"){if(/^previous/.test(e)){const o=C.getLastNRange(t,"2").startDate;return C.getLastNRange(t,e.substring(8),o)}if(/^last/.test(e))return C.getLastNRange(t,e.substring(4));const o=decodeURIComponent(e).split(",");return new C(m(o[0]),m(o[1]),t)}static getDisplayText(){return a("General_DateRangeInPeriodList")}getPrettyString(){const e=d(this.startDate),t=d(this.endDate);return a("General_DateRangeFromTo",[e,t])}getDateRange(){return[this.startDate,this.endDate]}containsToday(){return p(this.getDateRange())}getDayCount(){return Math.ceil((this.endDate.getTime()-this.startDate.getTime())/864e5)+1}}c.addCustomPeriod("range",C);var E=o("8bbf");
/*!
 * Matomo - free/libre analytics platform
 *
 * @link    https://matomo.org
 * @license https://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */let D;const{piwik:P,broadcast:T,piwikHelper:V}=window;P.helper=V,P.broadcast=T,P.updateDateInTitle=function(e,t){if($(".top_controls #periodString").length&&(D=D||document.title,0===D.indexOf(P.siteName))){const o=` - ${c.parse(t,e).getPrettyString()} `;document.title=`${P.siteName}${o}${D.slice(P.siteName.length)}`}},P.hasUserCapability=function(e){return Array.isArray(P.userCapabilities)&&-1!==P.userCapabilities.indexOf(e)},P.on=function(e,t){function o(e){t(...e.detail)}t.wrapper=o,window.addEventListener(e,o)},P.off=function(e,t){t.wrapper&&window.removeEventListener(e,t.wrapper)},P.postEvent=function(e,...t){const o=new CustomEvent(e,{detail:t});window.dispatchEvent(o)};const N=P;var x=N;
/*!
 * Matomo - free/libre analytics platform
 *
 * @link    https://matomo.org
 * @license https://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */function B(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}
/*!
 * Matomo - free/libre analytics platform
 *
 * @link    https://matomo.org
 * @license https://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */const{piwik:I,broadcast:M}=window;function L(e,t){try{return c.parse(e,t),!0}catch(o){return!1}}class F{constructor(){B(this,"url",Object(E["ref"])(null)),B(this,"urlQuery",Object(E["computed"])(()=>this.url.value?this.url.value.search.replace(/^\?/,""):"")),B(this,"hashQuery",Object(E["computed"])(()=>this.url.value?this.url.value.hash.replace(/^[#/?]+/,""):"")),B(this,"urlParsed",Object(E["computed"])(()=>Object(E["readonly"])(this.parse(this.urlQuery.value)))),B(this,"hashParsed",Object(E["computed"])(()=>Object(E["readonly"])(this.parse(this.hashQuery.value)))),B(this,"parsed",Object(E["computed"])(()=>Object(E["readonly"])(Object.assign(Object.assign({},this.urlParsed.value),this.hashParsed.value)))),this.url.value=new URL(window.location.href),window.addEventListener("hashchange",e=>{this.url.value=new URL(e.newURL),this.updatePeriodParamsFromUrl()}),this.updatePeriodParamsFromUrl()}updateHashToUrl(e){const t="#"+e;window.location.hash===t?window.dispatchEvent(new HashChangeEvent("hashchange",{newURL:window.location.href,oldURL:window.location.href})):window.location.hash=t}updateHash(e){const t=this.getFinalHashParams(e),o=this.stringify(t);this.updateHashToUrl("?"+o)}updateUrl(e,t={}){const o="string"!==typeof e?this.stringify(e):e,i=Object.keys(t).length?this.getFinalHashParams(t,e):{},n=this.stringify(i);let a="?"+o;n.length&&(a=`${a}#?${n}`),window.broadcast.propagateNewPage("",void 0,void 0,void 0,a)}getFinalHashParams(e,t={}){const o="string"!==typeof e?e:this.parse(e),i="string"!==typeof e?t:this.parse(t);return Object.assign({period:i.period||this.parsed.value.period,date:i.date||this.parsed.value.date,segment:i.segment||this.parsed.value.segment},o)}updateLocation(e){x.helper.isReportingPage()?this.updateHash(e):this.updateUrl(e)}getSearchParam(e){const t=window.location.href.split("#"),o=new RegExp(e+"(\\[]|=)");if(t&&t[1]&&o.test(decodeURIComponent(t[1]))){const t=window.broadcast.getValueFromHash(e,window.location.href);if(t||"date"!==e&&"period"!==e&&"idSite"!==e)return t}return window.broadcast.getValueFromUrl(e,window.location.search)}parse(e){return M.getValuesFromUrl("?"+e,!0)}stringify(e){const t=Object.fromEntries(Object.entries(e).filter(([,e])=>""!==e&&null!==e&&void 0!==e));return $.param(t).replace(/%5B%5D/g,"[]").replace(/%2C/g,",").replace(/\+/g,"%20")}updatePeriodParamsFromUrl(){let e=this.getSearchParam("date");const t=this.getSearchParam("period");if(!L(t,e))return;if(I.period===t&&I.currentDateString===e)return;I.period=t;const o=c.parse(t,e).getDateRange();I.startDateString=d(o[0]),I.endDateString=d(o[1]),I.updateDateInTitle(e,t),"range"===I.period&&(e=`${I.startDateString},${I.endDateString}`),I.currentDateString=e}}const A=new F;var _=A;function R(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}
/*!
 * Matomo - free/libre analytics platform
 *
 * @link    https://matomo.org
 * @license https://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */I.updatePeriodParamsFromUrl=A.updatePeriodParamsFromUrl.bind(A);const{$:H}=window;function U(e,t){"abort"!==t&&e&&0!==e.status&&("undefined"!==typeof Piwik_Popover?Piwik_Popover.isOpen()&&e&&500===e.status?H(document.body).html(piwikHelper.escape(e.responseText)):H("#loadingError").show():console.log("Request failed: "+e.responseText))}window.globalAjaxQueue=[],window.globalAjaxQueue.active=0,window.globalAjaxQueue.clean=function(){for(let e=this.length;e>=0;e-=1)this[e]&&4!==this[e].readyState||this.splice(e,1)},window.globalAjaxQueue.push=function(...e){return this.active+=e.length,this.clean(),Array.prototype.push.call(this,...e)},window.globalAjaxQueue.abort=function(){this.forEach(e=>e&&e.abort&&e.abort()),this.splice(0,this.length),this.active=0};class q extends Error{}class W{static fetch(e,t={}){const o=new W;t.withTokenInUrl&&o.withTokenInUrl(),t.errorElement&&o.setErrorElement(t.errorElement),t.redirectOnSuccess&&o.redirectOnSuccess(!0!==t.redirectOnSuccess?t.redirectOnSuccess:void 0),o.setFormat(t.format||"json"),Array.isArray(e)?o.setBulkRequests(...e):(Object.keys(e).forEach(e=>{if(/password/i.test(e))throw new Error(`Password parameters are not allowed to be sent as GET parameter. Please send ${e} as POST parameter instead.`)}),o.addParams(Object.assign(Object.assign({module:"API",format:t.format||"json"},e),{},{segment:e.segment?encodeURIComponent(e.segment):void 0}),"get")),t.postParams&&o.addParams(t.postParams,"post"),t.headers&&(o.headers=Object.assign(Object.assign({},o.headers),t.headers));let i=!0;return"undefined"===typeof t.createErrorNotification||t.createErrorNotification||(o.useCallbackInCaseOfError(),o.setErrorCallback(null),i=!1),t.abortController&&(o.abortController=t.abortController),t.returnResponseObject&&(o.resolveWithHelper=!0),!1===t.abortable&&(o.abortable=!1),o.send().then(e=>{const t=e instanceof W?e.requestHandle.responseJSON:e,i="API.getBulkRequest"===o.postParams.method&&Array.isArray(t)?t:[t],n=i.filter(e=>"error"===e.result).map(e=>e.message);if(n.length)throw new q(n.filter(e=>e.length).join("\n"));return e}).catch(e=>{if(i||e instanceof q)throw e;let t="Something went wrong";throw 504===e.status&&(t="Request was possibly aborted"),429===e.status&&(t="Rate Limit was exceed"),new Error(t)})}static post(e,t={},o={}){return W.fetch(e,Object.assign(Object.assign({},o),{},{postParams:t}))}static oneAtATime(e,t){let o=null;return(i,n)=>(o&&o.abort(),o=new AbortController,W.post(Object.assign(Object.assign({},i),{},{method:e}),n,Object.assign(Object.assign({},t),{},{abortController:o})).finally(()=>{o=null}))}constructor(){R(this,"format","json"),R(this,"timeout",null),R(this,"callback",null),R(this,"useRegularCallbackInCaseOfError",!1),R(this,"errorCallback",void 0),R(this,"withToken",!1),R(this,"completeCallback",void 0),R(this,"getParams",{}),R(this,"getUrl","?"),R(this,"postParams",{}),R(this,"loadingElement",null),R(this,"errorElement","#ajaxError"),R(this,"headers",{"X-Requested-With":"XMLHttpRequest"}),R(this,"requestHandle",null),R(this,"abortController",null),R(this,"abortable",!0),R(this,"defaultParams",["idSite","period","date","segment"]),R(this,"resolveWithHelper",!1),this.errorCallback=U}addParams(e,t){const o="string"===typeof e?window.broadcast.getValuesFromUrl(e):e,i=["compareSegments","comparePeriods","compareDates"];Object.keys(o).forEach(e=>{let n=o[e];(-1===i.indexOf(e)||n)&&("boolean"===typeof n&&(n=n?1:0),"get"===t.toLowerCase()?this.getParams[e]=n:"post"===t.toLowerCase()&&(this.postParams[e]=n))})}withTokenInUrl(){this.withToken=!0}setUrl(e){this.addParams(broadcast.getValuesFromUrl(e),"GET")}setBulkRequests(...e){const t=e.map(e=>"string"===typeof e?e:H.param(e));this.addParams({module:"API",method:"API.getBulkRequest",urls:t,format:"json"},"post")}setTimeout(e){this.timeout=e}setCallback(e){this.callback=e}useCallbackInCaseOfError(){this.useRegularCallbackInCaseOfError=!0}redirectOnSuccess(e){this.setCallback(()=>{piwikHelper.redirect(e)})}setErrorCallback(e){this.errorCallback=e}setCompleteCallback(e){this.completeCallback=e}setFormat(e){this.format=e}setLoadingElement(e){this.loadingElement=e||"#ajaxLoadingDiv"}setErrorElement(e){e&&(this.errorElement=e)}useGETDefaultParameter(e){if(e&&this.defaultParams)for(let t=0;t<this.defaultParams.length;t+=1)if(this.defaultParams[t]===e)return!0;return!1}removeDefaultParameter(e){if(e&&this.defaultParams)for(let t=0;t<this.defaultParams.length;t+=1)this.defaultParams[t]===e&&this.defaultParams.splice(t,1)}send(){H(this.errorElement).length&&H(this.errorElement).hide(),this.loadingElement&&H(this.loadingElement).fadeIn(),this.requestHandle=this.buildAjaxCall(),this.abortable&&window.globalAjaxQueue.push(this.requestHandle),this.abortController&&this.abortController.signal.addEventListener("abort",()=>{this.requestHandle&&this.requestHandle.abort()});const e=new Promise((e,t)=>{this.requestHandle.then(t=>{this.resolveWithHelper?e(this):e(t)}).fail(e=>{if(429===e.status)return console.log(`Warning: the '${H.param(this.getParams)}' request was rate limited!`),void t(e);"abort"!==e.statusText&&0!==e.status&&(console.log(`Warning: the ${H.param(this.getParams)} request failed!`),t(e))})});return e}abort(){this.requestHandle&&"function"===typeof this.requestHandle.abort&&(this.requestHandle.abort(),this.requestHandle=null)}buildAjaxCall(){const e=this,t=this.mixinDefaultGetParams(this.getParams);let o=this.getUrl;"?"!==o[o.length-1]&&(o+="&"),t.segment&&(o=`${o}segment=${t.segment}&`,delete t.segment),t.date&&(o=`${o}date=${decodeURIComponent(t.date.toString())}&`,delete t.date),o+=H.param(t);const i={type:"POST",async:!0,url:o,dataType:this.format||"json",complete:this.completeCallback,headers:this.headers?this.headers:void 0,error:function(...t){e.abortable&&(window.globalAjaxQueue.active-=1),e.errorCallback&&e.errorCallback.apply(this,t)},success:(t,o,i)=>{this.loadingElement&&H(this.loadingElement).hide();const n="API.getBulkRequest"===this.postParams.method&&Array.isArray(t)?t:[t],a=n.filter(e=>"error"===e.result).map(e=>e.message).filter(e=>e.length).reduce((e,t)=>(e[t]=(e[t]||0)+1,e),{});if(a&&Object.keys(a).length&&!this.useRegularCallbackInCaseOfError){let e="";Object.keys(a).forEach(t=>{e.length&&(e+="<br />"),a[t]>1?e+=`${t} (${a[t]}x)`:e+=t});let t=null,o="toast";H(this.errorElement).length&&e.length&&(H(this.errorElement).show(),t=this.errorElement,o=null);const i=!document.querySelector("#login_form");if(e&&i){const i=window["require"]("piwik/UI"),n=new i.Notification;n.show(e,{placeat:t,context:"error",type:o,id:"ajaxHelper"}),n.scrollToNotification()}}else this.callback&&this.callback(t,o,i);e.abortable&&(window.globalAjaxQueue.active-=1),x.ajaxRequestFinished&&x.ajaxRequestFinished()},data:this.mixinDefaultPostParams(this.postParams),timeout:null!==this.timeout?this.timeout:void 0};return H.ajax(i)}isRequestToApiMethod(){return this.getParams&&"API"===this.getParams.module&&this.getParams.method||this.postParams&&"API"===this.postParams.module&&this.postParams.method}isWidgetizedRequest(){return"Widgetize"===broadcast.getValueFromUrl("module")}getDefaultPostParams(){return this.withToken||this.isRequestToApiMethod()||x.shouldPropagateTokenAuth?{token_auth:x.token_auth,force_api_session:broadcast.isWidgetizeRequestWithoutSession()?0:1}:{}}mixinDefaultPostParams(e){const t=this.getDefaultPostParams(),o=Object.assign(Object.assign({},t),e);return o}mixinDefaultGetParams(e){const t=_.getSearchParam("segment"),o={idSite:x.idSite?x.idSite.toString():broadcast.getValueFromUrl("idSite"),period:x.period||broadcast.getValueFromUrl("period"),segment:t},i=e;return i.token_auth&&(i.token_auth=null,delete i.token_auth),Object.keys(o).forEach(e=>{!this.useGETDefaultParameter(e)||null!==i[e]&&"undefined"!==typeof i[e]&&""!==i[e]||null!==this.postParams[e]&&"undefined"!==typeof this.postParams[e]&&""!==this.postParams[e]||!o[e]||(i[e]=o[e])}),!this.useGETDefaultParameter("date")||i.date||this.postParams.date||(i.date=x.currentDateString),i}getRequestHandle(){return this.requestHandle}}function z(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}
/*!
 * Matomo - free/libre analytics platform
 *
 * @link    https://matomo.org
 * @license https://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */window.ajaxHelper=W;const{$:G}=window;class Y{constructor(){z(this,"defaultMinFractionDigits",0),z(this,"defaultMaxFractionDigits",2)}format(e,t,o,i){if(!G.isNumeric(e))return String(e);let n=e,a=t||x.numbers.patternNumber;const r=a.split(";");1===r.length&&r.push("-"+r[0]);const s=n<0;if(a=s?r[1]:r[0],n=Math.abs(n),o>=0){const e=10**o;n=Math.round(n*e)/e}const l=n.toString().split(".");let c=l[0],d=l[1]||"";const u=-1!==a.indexOf(",");if(u){const e=a.match(/#+0/),t=(null===e||void 0===e?void 0:e[0].length)||0;let o=(null===e||void 0===e?void 0:e[0].length)||0;const i=a.split(",");i.length>2&&(o=i[1].length);const n=c.split("").reverse();let r=[];r.push(n.splice(0,t).reverse().join(""));while(n.length)r.push(n.splice(0,o).reverse().join(""));r=r.reverse(),c=r.join(",")}if(i>0&&(d=d.replace(/0+$/,""),d.length<i&&d.length<o)){const e=i-d.length;d+=new Array(e+1).join("0")}let m=d?`${c}.${d}`:c;return m=a.replace(/#(?:[.,]#+)*0(?:[,.][0#]+)*/,m),this.replaceSymbols(m)}replaceSymbols(e){const t={".":x.numbers.symbolDecimal,",":x.numbers.symbolGroup,"+":x.numbers.symbolPlus,"-":x.numbers.symbolMinus,"%":x.numbers.symbolPercent};let o="";const i=e.split("");return i.forEach(e=>{let i=e;Object.entries(t).some(([e,t])=>-1!==i.indexOf(e)&&(i=i.replace(e,t),!0)),o+=i}),o}valOrDefault(e,t){return"undefined"===typeof e?t:e}getMaxFractionDigitsForCompactFormat(e){return 1===e?1:0}determineCorrectCompactPattern(e,t){let o=0,i=0,n="";if(Math.round(t)<1e3)return["0",1];for(o=1e3;o<=1e19;o*=10){const r=o+"One",s=o+"Other";if(1===Math.round(t/o)&&""!==(null===e||void 0===e?void 0:e[r])?(i=o,n=r):Math.round(t/o)>=1&&""!==(null===e||void 0===e?void 0:e[s])&&(i=o,n=s),null!==e&&void 0!==e&&e[n]){var a;const i=(null===e||void 0===e||null===(a=e[n].match(/0/g))||void 0===a?void 0:a.length)||1;if(Math.round(t*10**i/(10*o))<10**i)break}}return[(null===e||void 0===e?void 0:e[n])||"0",i]}formatCompact(e,t,o){var i;const n=(null===(i=e.match(/0/g))||void 0===i?void 0:i.length)||0;let a=t;n>1&&(a/=10**(n-1));const r=this.getMaxFractionDigitsForCompactFormat(n),s=10**r,l=Math.round(o/a*s)/s,c=this.formatNumber(l,r,0);return e.replace(/(0+)/,c).replace(/('\.')/,".")}parseFormattedNumber(e){const t=e.indexOf(x.numbers.symbolMinus)>-1||e.startsWith("-"),o=e.split(x.numbers.symbolDecimal);return o.forEach((e,t)=>{o[t]=e.replace(/[^0-9]/g,"")}),(t?-1:1)*parseFloat(o.join("."))}formatNumber(e,t,o){return this.format(e,x.numbers.patternNumber,this.valOrDefault(t,this.defaultMaxFractionDigits),this.valOrDefault(o,this.defaultMinFractionDigits))}formatPercent(e,t,o){return this.format(e,x.numbers.patternPercent,this.valOrDefault(t,this.defaultMaxFractionDigits),this.valOrDefault(o,this.defaultMinFractionDigits))}formatCurrency(e,t,o,i){const n=this.format(e,x.numbers.patternCurrency,this.valOrDefault(o,this.defaultMaxFractionDigits),this.valOrDefault(i,this.defaultMinFractionDigits));return n.replace("¤",t)}formatNumberCompact(e){const t=e,[o,i]=this.determineCorrectCompactPattern(x.numbers.patternsCompactNumber||[],t);return Math.round(t)<1e3||"0"===o?this.formatNumber(t,this.getMaxFractionDigitsForCompactFormat(Math.round(t)),0):this.formatCompact(o,i,t)}formatCurrencyCompact(e,t){const o=e,[i,n]=this.determineCorrectCompactPattern(x.numbers.patternsCompactCurrency||[],o);return Math.round(o)<1e3||"0"===i?this.formatCurrency(o,t,this.getMaxFractionDigitsForCompactFormat(Math.round(o)),0):this.formatCompact(i,n,o).replace("¤",t)}formatEvolution(e,t,o,i){if(i)return this.formatPercent(Math.abs(e),t,o);const n=this.formatPercent(e,t,o);return`${e>0?x.numbers.symbolPlus:""}${n}`}calculateAndFormatEvolution(e,t,o){const i=parseInt(t,10),n=parseInt(e,10)-i;let a;a=0===n||Number.isNaN(n)?0:0===i||Number.isNaN(i)?100:n/i*100;let r=3;return Math.abs(a)>100?r=0:Math.abs(a)>10?r=1:Math.abs(a)>1&&(r=2),this.formatEvolution(a,r,0,o)}}var J=new Y;window.NumberFormatter=J;
/*!
 * Matomo - free/libre analytics platform
 *
 * @link    https://matomo.org
 * @license https://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */
const{$:K}=window;class Q{constructor(){this.setup()}setup(){Object(E["watch"])(()=>_.parsed.value.popover,()=>this.onPopoverParamChanged()),_.parsed.value.popover&&this.onPopoverParamChangedInitial()}onPopoverParamChangedInitial(){K(()=>{setTimeout(()=>{this.openOrClose()})})}onPopoverParamChanged(){K(()=>{this.openOrClose()})}openOrClose(){this.close();const e=_.parsed.value.popover;e?this.open(e):window.broadcast.resetPopoverStack()}close(){window.Piwik_Popover.close()}open(e){let t=decodeURIComponent(e);t=t.replace(/\$/g,"%"),t=decodeURIComponent(t);const o=t.split(":"),i=o[0];o.shift();const n=o.join(":");"undefined"===typeof window.broadcast.popoverHandlers[i]||window.broadcast.isLoginPage()||window.broadcast.popoverHandlers[i](n)}}new Q;function X(e,t,o){const i=new Date;o||(o=432e4),i.setTime(i.getTime()+o),document.cookie=`${e}=${t}; expires=${i.toUTCString()}; path=/`}function Z(e){const t="; "+document.cookie,o=t.split(`; ${e}=`);if(2==o.length){const e=o.pop().split(";").shift();if("undefined"!==typeof e)return e}return null}function ee(e){const t=new Date;t.setTime(t.getTime()+-864e5),document.cookie=`${e}=; expires=${t.toUTCString()}; path=/`}
/*!
 * Matomo - free/libre analytics platform
 *
 * @link    https://matomo.org
 * @license https://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */const{$:te}=window;function oe(){let e=!!parseInt(Z("zenMode"),10);const t=te(".top_controls .icon-arrowup");function o(){e?(te("body").addClass("zenMode"),t.addClass("icon-arrowdown").removeClass("icon-arrowup"),t.prop("title",a("CoreHome_ExitZenMode"))):(te("body").removeClass("zenMode"),t.removeClass("icon-arrowdown").addClass("icon-arrowup"),t.prop("title",a("CoreHome_EnterZenMode")))}x.helper.registerShortcut("z",a("CoreHome_ShortcutZenMode"),t=>{t.altKey||(e=!e,X("zenMode",e?"1":"0"),o())}),t.click(()=>{window.Mousetrap.trigger("z")}),o()}
/*!
 * Matomo - free/libre analytics platform
 *
 * @link    https://matomo.org
 * @license https://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */
function ie(e,...t){const o=t;return window._pk_externalRawLink?window._pk_externalRawLink(e,o):e}function ne(e,...t){if(!e)return"";const o=t.length>0&&t[0]?t[0]:null,i=t.length>1&&t[1]?t[1]:null,n=t.length>2&&t[2]?t[2]:null,a=ie(e,o,i,n);return'<a target="_blank" rel="noreferrer noopener" href="'+a+'">'}
/*!
 * Matomo - free/libre analytics platform
 *
 * @link    https://matomo.org
 * @license https://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */function ae(e,t,o){return J.formatNumber(e,t,o)}function re(e,t,o){return J.formatPercent(e,t,o)}function se(e,t,o,i){return J.formatCurrency(e,t,o,i)}function le(e,t,o,i){return J.formatEvolution(e,t,o,i)}function ce(e,t,o){return J.calculateAndFormatEvolution(e,t,o)}
/*!
 * Matomo - free/libre analytics platform
 *
 * @link    https://matomo.org
 * @license https://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */
/*!
 * Matomo - free/libre analytics platform
 *
 * @link    https://matomo.org
 * @license https://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */function de(...e){const t=Object(E["createApp"])(...e);return t.config.globalProperties.$sanitize=window.vueSanitize,t.config.globalProperties.translate=a,t.config.globalProperties.translateOrDefault=r,t.config.globalProperties.externalLink=ne,t.config.globalProperties.externalRawLink=ie,t.config.globalProperties.formatNumber=ae,t.config.globalProperties.formatPercent=re,t.config.globalProperties.formatCurrency=se,t.config.globalProperties.formatEvolution=le,t.config.globalProperties.calculateAndFormatEvolution=ce,t}
/*!
 * Matomo - free/libre analytics platform
 *
 * @link    https://matomo.org
 * @license https://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */x.on("Matomo.topControlsRendered",()=>{oe()});const ue={},me=120,pe=50,he=1e3;function ge(e){if(ue[e])return ue[e];if(window[e])return Promise.resolve(window[e]);const t="?module=Proxy&action=getPluginUmdJs&plugin="+e;let o,i;const n=document.createElement("script");let a;n.charset="utf-8",n.timeout=me,n.src=t;const r=new Error,s=t=>{n.onerror=null,n.onload=null,clearTimeout(a);let s=0;function l(){if(s+=pe,o&&i)if(window[e]&&i)try{i(window[e])}finally{o=void 0,i=void 0}else if(s>he)try{const n=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;r.message=`Loading plugin ${e} on demand failed.\n(${n}: ${a})`,r.name="PluginOnDemandLoadError",r.type=n,r.request=a,o(r)}finally{o=void 0,i=void 0}else setTimeout(l,pe)}setTimeout(l,pe)};return a=setTimeout(()=>{s({type:"timeout",target:n})},me),n.onerror=s,n.onload=s,document.head.appendChild(n),new Promise((e,t)=>{i=e,o=t})}
/*!
 * Matomo - free/libre analytics platform
 *
 * @link    https://matomo.org
 * @license https://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */function be(e,t){return Object(E["defineAsyncComponent"])(()=>ge(e).then(e=>(e||resolve(null),e[t])))}
/*!
 * Matomo - free/libre analytics platform
 *
 * @link    https://matomo.org
 * @license https://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */function fe(e,t){var o;return e instanceof HTMLElement?e:null===(o=t.instance)||void 0===o?void 0:o.$refs[e]}var ve={getRef:fe};const Oe=300;function je(e,t=Oe){let o;return function(...i){o&&clearTimeout(o),o=setTimeout(()=>{e.call(this,...i)},t)}}
/*!
 * Matomo - free/libre analytics platform
 *
 * @link    https://matomo.org
 * @license https://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */function ye(e){return"undefined"===typeof e?e:JSON.parse(JSON.stringify(e))}const we={ref:"root"};function ke(e,t,o,i,n,a){return Object(E["openBlock"])(),Object(E["createElementBlock"])("div",we,[e.componentWrapper?(Object(E["openBlock"])(),Object(E["createBlock"])(Object(E["resolveDynamicComponent"])(e.componentWrapper),{key:0})):Object(E["createCommentVNode"])("",!0)],512)}var Se=Object(E["defineComponent"])({props:{html:String},mounted(){x.helper.compileVueEntryComponents(this.$refs.root)},beforeUnmount(){x.helper.destroyVueComponent(this.$refs.root)},computed:{componentWrapper(){return this.html?Object(E["markRaw"])({template:this.html}):null}}});Se.render=ke;var Ce=Se;const Ee={class:"loadingPiwik"};function De(e,t,o,i,n,a){const r=Object(E["resolveComponent"])("MatomoLoader");return Object(E["withDirectives"])((Object(E["openBlock"])(),Object(E["createElementBlock"])("div",Ee,[Object(E["createVNode"])(r),Object(E["createElementVNode"])("span",null,Object(E["toDisplayString"])(e.loadingMessage),1)],512)),[[E["vShow"],e.loading]])}const Pe={class:"matomo-loader"},Te=Object(E["createElementVNode"])("span",null,null,-1),Ve=Object(E["createElementVNode"])("span",null,null,-1),Ne=Object(E["createElementVNode"])("span",null,null,-1),xe=[Te,Ve,Ne];function Be(e,t,o,i,n,a){return Object(E["openBlock"])(),Object(E["createElementBlock"])("span",Pe,xe)}var Ie=Object(E["defineComponent"])({});Ie.render=Be;var Me=Ie,Le=Object(E["defineComponent"])({components:{MatomoLoader:Me},props:{loading:{type:Boolean,required:!0,default:!1},loadingMessage:{type:String,required:!1,default:a("General_LoadingData")}}});Le.render=De;var Fe=Le;function Ae(e,t,o,i,n,a){return Object(E["openBlock"])(),Object(E["createElementBlock"])("div",{class:Object(E["normalizeClass"])(["alert",{["alert-"+e.severity]:!0}])},[Object(E["renderSlot"])(e.$slots,"default")],2)}var _e=Object(E["defineComponent"])({props:{severity:{type:String,required:!0}}});_e.render=Ae;var Re=_e,He={mounted(e,t){let o={};$(e).addClass("matomo-dropdown-menu");const i=!!$(e).parent().closest(".dropdown-content").length;var n;i&&(o={hover:!0},$(e).addClass("submenu"),$((null===(n=t.value)||void 0===n?void 0:n.activates)||$(e).data("target")).addClass("submenu-dropdown-content"),$(e).parents(".dropdown-content").addClass("submenu-container"));$(e).dropdown(o)},updated(e){Object(E["nextTick"])(()=>{$(e).addClass("matomo-dropdown-menu")})}};
/*!
 * Matomo - free/libre analytics platform
 *
 * @link    https://matomo.org
 * @license https://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */
/*!
 * Matomo - free/libre analytics platform
 *
 * @link    https://matomo.org
 * @license https://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */
function $e(e,t,o){const i=t.value.isMouseDown&&t.value.hasScrolled;t.value.isMouseDown=!1,t.value.hasScrolled=!1,i||e.contains(o.target)||t.value&&t.value.blur()}function Ue(e,t){t.value.hasScrolled=!0}function qe(e,t){t.value.isMouseDown=!0,t.value.hasScrolled=!1}function We(e,t,o){27===o.which&&setTimeout(()=>{t.value.isMouseDown=!1,t.value.hasScrolled=!1,t.value.blur&&t.value.blur()},0)}const ze=document.documentElement;var Ge={mounted(e,t){t.value.isMouseDown=!1,t.value.hasScrolled=!1,t.value.onEscapeHandler=We.bind(null,e,t),t.value.onMouseDown=qe.bind(null,e,t),t.value.onClickOutsideElement=$e.bind(null,e,t),t.value.onScroll=Ue.bind(null,e,t),ze.addEventListener("keyup",t.value.onEscapeHandler),ze.addEventListener("mousedown",t.value.onMouseDown),ze.addEventListener("mouseup",t.value.onClickOutsideElement),ze.addEventListener("scroll",t.value.onScroll)},unmounted(e,t){ze.removeEventListener("keyup",t.value.onEscapeHandler),ze.removeEventListener("mousedown",t.value.onMouseDown),ze.removeEventListener("mouseup",t.value.onClickOutsideElement),ze.removeEventListener("scroll",t.value.onScroll)}};
/*!
 * Matomo - free/libre analytics platform
 *
 * @link    https://matomo.org
 * @license https://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */function Ye(e,t){var o,i;null===(o=t.value)||void 0===o||!o.focused||null!==(i=t.oldValue)&&void 0!==i&&i.focused||setTimeout(()=>{e.focus(),t.value.afterFocus&&t.value.afterFocus()},5)}var Je={mounted(e,t){Ye(e,t)},updated(e,t){Ye(e,t)}};
/*!
 * Matomo - free/libre analytics platform
 *
 * @link    https://matomo.org
 * @license https://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */const{$:Ke}=window;function Qe(){const e=Ke(this).attr("title")||"";return window.vueSanitize(e.replace(/\n/g,"<br />"))}function Xe(e,t){var o,i,n,a,r,s;Ke(e).tooltip({track:!0,content:(null===(o=t.value)||void 0===o?void 0:o.content)||Qe,show:"undefined"!==typeof(null===(i=t.value)||void 0===i?void 0:i.show)?null===(n=t.value)||void 0===n?void 0:n.show:{delay:(null===(a=t.value)||void 0===a?void 0:a.delay)||700,duration:(null===(r=t.value)||void 0===r?void 0:r.duration)||200},hide:!1,tooltipClass:null===(s=t.value)||void 0===s?void 0:s.tooltipClass})}var Ze={mounted(e,t){setTimeout(()=>Xe(e,t))},updated(e,t){setTimeout(()=>Xe(e,t))},beforeUnmount(e){try{window.$(e).tooltip("destroy")}catch(t){}}};const et={ref:"root"};function tt(e,t,o,i,n,a){return Object(E["withDirectives"])((Object(E["openBlock"])(),Object(E["createElementBlock"])("div",et,[Object(E["renderSlot"])(e.$slots,"default")],512)),[[E["vShow"],e.modelValue]])}var ot=Object(E["defineComponent"])({props:{modelValue:{type:Boolean,required:!0},options:{type:Object,required:!1,default:()=>({})}},emits:["yes","no","closeEnd","close","validation","update:modelValue"],activated(){this.$emit("update:modelValue",!1)},watch:{modelValue(e,t){if(e){const e=this.$refs.root.firstElementChild;x.helper.modalConfirm(e,{yes:()=>{this.$emit("yes")},no:()=>{this.$emit("no")},validation:()=>{this.$emit("validation")}},Object.assign({onCloseEnd:()=>{this.$refs.root.appendChild(e),this.$emit("update:modelValue",!1),this.$emit("closeEnd")}},this.options))}else!1===e&&!0===t&&($(".modal.open").modal("close"),this.$emit("close"))}}});ot.render=tt;var it=ot;
/*!
 * Matomo - free/libre analytics platform
 *
 * @link    https://matomo.org
 * @license https://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */function nt(e){e.classList.toggle("expanded");const t=e.querySelector(".dropdown.positionInViewport");t&&x.helper.setMarginLeftToBeInViewport(t)}function at(e,t,o){const i=t.value.isMouseDown&&t.value.hasScrolled;var n;(t.value.isMouseDown=!1,t.value.hasScrolled=!1,i)||(e.contains(o.target)||(e.classList.remove("expanded"),null!==(n=t.value)&&void 0!==n&&n.onClosed&&t.value.onClosed()))}function rt(e){e.value.hasScrolled=!0}function st(e){e.value.isMouseDown=!0,e.value.hasScrolled=!1}function lt(e,t,o){27===o.which&&(t.value.isMouseDown=!1,t.value.hasScrolled=!1,e.classList.remove("expanded"))}const ct=document.documentElement,{$:dt}=window;var ut={mounted(e,t){t.value.isMouseDown=!1,t.value.hasScrolled=!1,t.value.onExpand=nt.bind(null,e),t.value.onEscapeHandler=lt.bind(null,e,t),t.value.onMouseDown=st.bind(null,t),t.value.onClickOutsideElement=at.bind(null,e,t),t.value.onScroll=rt.bind(null,t),setTimeout(()=>{const e=ve.getRef(t.value.expander,t);e&&dt(e).on("click",t.value.onExpand)}),ct.addEventListener("keyup",t.value.onEscapeHandler),ct.addEventListener("mousedown",t.value.onMouseDown),ct.addEventListener("mouseup",t.value.onClickOutsideElement),ct.addEventListener("scroll",t.value.onScroll)},unmounted(e,t){const o=ve.getRef(t.value.expander,t);o&&dt(o).off("click",t.value.onExpand),ct.removeEventListener("keyup",t.value.onEscapeHandler),ct.removeEventListener("mousedown",t.value.onMouseDown),ct.removeEventListener("mouseup",t.value.onClickOutsideElement),ct.removeEventListener("scroll",t.value.onScroll)}};
/*!
 * Matomo - free/libre analytics platform
 *
 * @link    https://matomo.org
 * @license https://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */function mt(e){e.classList.add("expanded");const t=e.querySelector(".dropdown.positionInViewport");t&&x.helper.setMarginLeftToBeInViewport(t)}function pt(e){e.classList.remove("expanded")}function ht(e,t){e.contains(t.target)||e.classList.remove("expanded")}function gt(e,t){27===t.which&&e.classList.remove("expanded")}const bt=document.documentElement;var ft={mounted(e,t){t.value.onMouseEnter=mt.bind(null,e),t.value.onMouseLeave=pt.bind(null,e),t.value.onClickOutsideElement=ht.bind(null,e),t.value.onEscapeHandler=gt.bind(null,e),setTimeout(()=>{const e=ve.getRef(t.value.expander,t);e&&e.addEventListener("mouseenter",t.value.onMouseEnter)}),e.addEventListener("mouseleave",t.value.onMouseLeave),bt.addEventListener("keyup",t.value.onEscapeHandler),bt.addEventListener("mouseup",t.value.onClickOutsideElement)},unmounted(e,t){const o=ve.getRef(t.value.expander,t);o&&o.removeEventListener("mouseenter",t.value.onMouseEnter),e.removeEventListener("mouseleave",t.value.onMouseLeave),document.removeEventListener("keyup",t.value.onEscapeHandler),document.removeEventListener("mouseup",t.value.onClickOutsideElement)}};
/*!
 * Matomo - free/libre analytics platform
 *
 * @link    https://matomo.org
 * @license https://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */const{$:vt}=window;var Ot={mounted(e,t){const o=vt(e),{sensitiveData:i}=t.value,n=t.value.showCharacters||6,r=t.value.clickElementSelector||o;let s="";function l(){o.html(i),vt(r).css({cursor:""}),vt(r).tooltip("destroy")}n>0&&(s+=i.slice(0,n)),s+=i.slice(n).replace(/./g,"*"),o.html(s),vt(r).tooltip({content:a("CoreHome_ClickToSeeFullInformation"),items:"*",track:!0}),vt(r).one("click",l),vt(r).css({cursor:"pointer"})}};
/*!
 * Matomo - free/libre analytics platform
 *
 * @link    https://matomo.org
 * @license https://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */const{$:jt}=window;var yt={mounted(e){const t=jt(e);!t.attr("data-target")&&t.attr("data-activates")&&t.attr("data-target",t.attr("data-activates"));const o=t.attr("data-target");o&&jt("#"+o).length&&t.dropdown({inDuration:300,outDuration:225,constrainWidth:!1,belowOrigin:!0})}};
/*!
 * Matomo - free/libre analytics platform
 *
 * @link    https://matomo.org
 * @license https://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */const{$:wt}=window;function kt(e,t){e.value.focusedElement!==t.target&&(e.value.focusedElement=t.target,wt(t.target).select())}function St(e){const t=document.createRange();t.selectNode(e.target);const o=window.getSelection();o&&o.rangeCount>0&&o.removeAllRanges(),o&&o.addRange(t)}function Ct(e){delete e.value.focusedElement}var Et={mounted(e,t){const o=e.tagName.toLowerCase();t.value.elementSupportsSelect="textarea"===o,t.value.elementSupportsSelect?(t.value.onFocusHandler=kt.bind(null,t),t.value.onBlurHandler=Ct.bind(null,t),e.addEventListener("focus",t.value.onFocusHandler),e.addEventListener("blur",t.value.onBlurHandler)):(t.value.onClickHandler=St,e.addEventListener("click",t.value.onClickHandler))},unmounted(e,t){t.value.elementSupportsSelect?(e.removeEventListener("focus",t.value.onFocusHandler),e.removeEventListener("blur",t.value.onBlurHandler)):e.removeEventListener("click",t.value.onClickHandler)}};
/*!
 * Matomo - free/libre analytics platform
 *
 * @link    https://matomo.org
 * @license https://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */function Dt(e){if(e){const t=document.createElement("textarea");t.value=e.innerText,t.setAttribute("readonly",""),t.style.position="absolute",t.style.left="-9999px",document.body.appendChild(t),t.select(),t.focus(),document.execCommand("copy"),document.body.removeChild(t);const o=e.parentElement;if(o){const e=o.getElementsByTagName("i")[0];e&&(e.classList.remove("copyToClipboardIcon"),e.classList.add("copyToClipboardIconCheck"));const t=o.getElementsByClassName("copyToClipboardCopiedDiv")[0];t&&(t.style.display="inline-block",setTimeout(()=>{t.style.display="none"},2500))}}}function Pt(e,t){if(t.value.transitionOpen){const o=e.parentElement;if(o){const e=o.getElementsByTagName("i")[0];e&&(e.classList.remove("copyToClipboardIconCheck"),e.classList.add("copyToClipboardIcon"))}t.value.transitionOpen=!1}else t.value.transitionOpen=!0}var Tt={mounted(e,t){const o=e.tagName.toLowerCase();if("pre"===o){const o=document.createElement("button");o.setAttribute("type","button"),o.className="copyToClipboardButton";const i=document.createElement("div");i.className="copyToClipboardPositionDiv";const n=document.createElement("i");n.className="copyToClipboardIcon",o.appendChild(n);const r=document.createElement("span");r.className="copyToClipboardSpan",r.innerHTML=a("General_Copy"),o.appendChild(r),i.appendChild(o);const s=document.createElement("div");s.className="copyToClipboardCopiedDiv",s.innerHTML=a("General_CopiedToClipboard"),i.appendChild(s);const l=e.parentElement;l&&(l.classList.add("copyToClipboardWrapper"),l.appendChild(i)),t.value.onClickHandler=Dt.bind(null,e),o.addEventListener("click",t.value.onClickHandler),t.value.onTransitionEndHandler=Pt.bind(null,e,t),o.addEventListener("transitionend",t.value.onTransitionEndHandler)}},unmounted(e,t){e.removeEventListener("click",t.value.onClickHandler),e.removeEventListener("transitionend",t.value.onTransitionEndHandler)}},Vt={mounted(e,t){t.value.activator&&setTimeout(()=>{if(!t.value.initialized){t.value.initialized=!0;const e=ve.getRef(t.value.activator,t);if(e){window.$(e).show();const t=e.getAttribute("data-target");window.$("#"+t).sidenav({closeOnClick:!0})}}e.classList.contains("collapsible")&&window.$(e).collapsible()})}};
/*!
 * Matomo - free/libre analytics platform
 *
 * @link    https://matomo.org
 * @license https://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */const Nt={key:0,class:"title",tabindex:"6"},xt=["href","title"],Bt={class:"iconsBar"},It=["href","title"],Mt=Object(E["createElementVNode"])("span",{class:"icon-help"},null,-1),Lt=[Mt],Ft=["title"],At=Object(E["createElementVNode"])("span",{class:"icon-info"},null,-1),_t=[At],Rt={key:2,class:"ratingIcons"},Ht={class:"inlineHelp"},$t=["innerHTML"],Ut=["innerHTML"],qt=["href"];function Wt(e,t,o,i,n,a){return Object(E["openBlock"])(),Object(E["createElementBlock"])("div",{class:"enrichedHeadline",onMouseenter:t[1]||(t[1]=t=>e.showIcons=!0),onMouseleave:t[2]||(t[2]=t=>e.showIcons=!1),ref:"root"},[e.editUrl?Object(E["createCommentVNode"])("",!0):(Object(E["openBlock"])(),Object(E["createElementBlock"])("div",Nt,[Object(E["renderSlot"])(e.$slots,"default")])),e.editUrl?(Object(E["openBlock"])(),Object(E["createElementBlock"])("a",{key:1,class:"title",href:e.editUrl,title:e.translate("CoreHome_ClickToEditX",e.htmlEntities(e.actualFeatureName))},[Object(E["renderSlot"])(e.$slots,"default")],8,xt)):Object(E["createCommentVNode"])("",!0),Object(E["withDirectives"])(Object(E["createElementVNode"])("span",Bt,[e.helpUrl&&!e.actualInlineHelp?(Object(E["openBlock"])(),Object(E["createElementBlock"])("a",{key:0,rel:"noreferrer noopener",target:"_blank",class:"helpIcon",href:e.helpUrl,title:e.translate("CoreHome_ExternalHelp")},Lt,8,It)):Object(E["createCommentVNode"])("",!0),e.actualInlineHelp?(Object(E["openBlock"])(),Object(E["createElementBlock"])("a",{key:1,onClick:t[0]||(t[0]=t=>e.showInlineHelp=!e.showInlineHelp),class:Object(E["normalizeClass"])(["helpIcon",{active:e.showInlineHelp}]),title:e.translate(e.reportGenerated?"General_HelpReport":"General_Help")},_t,10,Ft)):Object(E["createCommentVNode"])("",!0),e.showRateFeature?(Object(E["openBlock"])(),Object(E["createElementBlock"])("div",Rt,[(Object(E["openBlock"])(),Object(E["createBlock"])(Object(E["resolveDynamicComponent"])(e.rateFeature),{title:e.actualFeatureName},null,8,["title"]))])):Object(E["createCommentVNode"])("",!0)],512),[[E["vShow"],e.showIcons||e.showInlineHelp]]),Object(E["withDirectives"])(Object(E["createElementVNode"])("div",Ht,[Object(E["createElementVNode"])("div",{innerHTML:e.$sanitize(e.actualInlineHelp)},null,8,$t),""!=e.reportGenerated?(Object(E["openBlock"])(),Object(E["createElementBlock"])("span",{key:0,class:"helpDate",innerHTML:e.$sanitize(e.reportGenerated)},null,8,Ut)):Object(E["createCommentVNode"])("",!0),e.helpUrl?(Object(E["openBlock"])(),Object(E["createElementBlock"])("a",{key:1,rel:"noreferrer noopener",target:"_blank",class:"readMore",href:e.helpUrl},Object(E["toDisplayString"])(e.translate("General_MoreDetails")),9,qt)):Object(E["createCommentVNode"])("",!0)],512),[[E["vShow"],e.showInlineHelp]])],544)}var zt=Object(E["defineComponent"])({props:{helpUrl:{type:String,default:""},editUrl:{type:String,default:""},reportGenerated:String,featureName:String,inlineHelp:String},data(){return{showIcons:!1,showInlineHelp:!1,actualFeatureName:this.featureName,actualInlineHelp:this.inlineHelp}},watch:{inlineHelp(e){this.actualInlineHelp=e},featureName(e){this.actualFeatureName=e}},mounted(){const e=this.$refs.root;if(!this.actualInlineHelp){var t;let i=e.querySelector(".title .inlineHelp");if(!i&&null!==(t=e.parentElement)&&void 0!==t&&t.nextElementSibling&&(i=e.parentElement.nextElementSibling.querySelector(".reportDocumentation")),i){var o;const e=null===(o=i.getAttribute("data-content"))||void 0===o?void 0:o.trim();e&&e.length&&(this.actualInlineHelp=`<p>${e}</p>`,setTimeout(()=>i.remove(),0))}}var i;this.actualFeatureName||(this.actualFeatureName=null===(i=e.querySelector(".title"))||void 0===i?void 0:i.textContent);if(x.period&&x.currentDateString){const t=c.parse(x.period,x.currentDateString);this.reportGenerated&&t.containsToday()&&window.$(e.querySelector(".report-generated")).tooltip({track:!0,content:this.reportGenerated,items:"div",show:!1,hide:!1})}},methods:{htmlEntities(e){return x.helper.htmlEntities(e)}},computed:{showRateFeature(){return"Feedback_SendFeedback"!==r("Feedback_SendFeedback")},rateFeature(){return this.showRateFeature?be("Feedback","RateFeature"):""}}});zt.render=Wt;var Gt=zt;const Yt={class:"card-content"},Jt={key:0,class:"card-title"},Kt={key:1,class:"card-title"},Qt={ref:"content"},Xt={key:0,class:"card-image hide-on-med-and-down"},Zt=["src","alt"];function eo(e,t,o,i,n,a){const r=Object(E["resolveComponent"])("EnrichedHeadline");return Object(E["openBlock"])(),Object(E["createElementBlock"])("div",{class:Object(E["normalizeClass"])({card:!0,"card-with-image":!!this.imageUrl}),ref:"root"},[Object(E["createElementVNode"])("div",Yt,[!e.contentTitle||e.actualFeature||e.helpUrl||e.actualHelpText||e.editUrl?Object(E["createCommentVNode"])("",!0):(Object(E["openBlock"])(),Object(E["createElementBlock"])("h2",Jt,Object(E["toDisplayString"])(e.decode(e.contentTitle)),1)),e.contentTitle&&(e.actualFeature||e.helpUrl||e.actualHelpText||e.editUrl)?(Object(E["openBlock"])(),Object(E["createElementBlock"])("h2",Kt,[Object(E["createVNode"])(r,{"feature-name":e.actualFeature,"help-url":e.helpUrl,"edit-url":e.editUrl,"inline-help":e.actualHelpText},{default:Object(E["withCtx"])(()=>[Object(E["createTextVNode"])(Object(E["toDisplayString"])(e.decode(e.contentTitle)),1)]),_:1},8,["feature-name","help-url","edit-url","inline-help"])])):Object(E["createCommentVNode"])("",!0),Object(E["createElementVNode"])("div",Qt,[Object(E["renderSlot"])(e.$slots,"default")],512)]),e.imageUrl?(Object(E["openBlock"])(),Object(E["createElementBlock"])("div",Xt,[Object(E["createElementVNode"])("img",{src:e.imageUrl,alt:e.actualImageAltText},null,8,Zt)])):Object(E["createCommentVNode"])("",!0)],2)}let to=null;const{$:oo}=window;var io=Object(E["defineComponent"])({props:{contentTitle:String,feature:String,helpUrl:String,editUrl:String,helpText:String,anchor:String,imageUrl:String,imageAltText:String},components:{EnrichedHeadline:Gt},data(){return{actualFeature:this.feature,actualHelpText:this.helpText,actualImageAltText:this.imageAltText?this.imageAltText:this.contentTitle}},watch:{feature(e){this.actualFeature=e},helpText(e){this.actualHelpText=e}},mounted(){const e=this.$refs.root,t=this.$refs.content;if(this.anchor&&e&&e.parentElement){const t=document.createElement("a");t.id=this.anchor,oo(e.parentElement).prepend(t)}setTimeout(()=>{const e=t.querySelector(".contentHelp");e&&(this.actualHelpText=e.innerHTML,e.remove())},0),this.actualFeature&&"true"===this.actualFeature&&(this.actualFeature=this.contentTitle),null===to&&(to=document.querySelector("#content.admin"));let o=null;if(to&&(o=to.offsetTop),o||0===o){const t=e.closest(".widgetLoader"),i=t?t.offsetTop:e.offsetTop;i-o<17&&(e.style.marginTop="0")}},methods:{decode(e){return x.helper.htmlDecode(e)}}});io.render=eo;var no=io;const ao={key:0,ref:"root",class:"matomo-comparisons"},ro={class:"comparison-type"},so=["title"],lo=["href"],co=["title"],uo={class:"comparison-period-label"},mo=["onClick"],po=["title"],ho={class:"loadingPiwik",style:{display:"none"}},go=["alt"];function bo(e,t,o,i,n,a){const r=Object(E["resolveDirective"])("tooltips");return e.isComparing?Object(E["withDirectives"])((Object(E["openBlock"])(),Object(E["createElementBlock"])("div",ao,[Object(E["createElementVNode"])("h3",null,Object(E["toDisplayString"])(e.translate("General_Comparisons")),1),(Object(E["openBlock"])(!0),Object(E["createElementBlock"])(E["Fragment"],null,Object(E["renderList"])(e.segmentComparisons,(t,o)=>(Object(E["openBlock"])(),Object(E["createElementBlock"])("div",{class:"comparison card",key:t.index},[Object(E["createElementVNode"])("div",ro,Object(E["toDisplayString"])(e.translate("General_Segment")),1),Object(E["createElementVNode"])("div",{class:"title",title:e.getTitleTooltip(t)},[Object(E["createElementVNode"])("a",{target:"_blank",href:e.getUrlToSegment(t.params.segment)},Object(E["toDisplayString"])(t.title),9,lo)],8,so),(Object(E["openBlock"])(!0),Object(E["createElementBlock"])(E["Fragment"],null,Object(E["renderList"])(e.periodComparisons,o=>(Object(E["openBlock"])(),Object(E["createElementBlock"])("div",{class:"comparison-period",key:o.index,title:e.getComparisonTooltip(t,o)},[Object(E["createElementVNode"])("span",{class:"comparison-dot",style:Object(E["normalizeStyle"])({"background-color":e.getSeriesColor(t,o)})},null,4),Object(E["createElementVNode"])("span",uo,Object(E["toDisplayString"])(o.title)+" ("+Object(E["toDisplayString"])(e.getComparisonPeriodType(o))+") ",1)],8,co))),128)),e.segmentComparisons.length>1?(Object(E["openBlock"])(),Object(E["createElementBlock"])("a",{key:0,class:"remove-button",onClick:t=>e.removeSegmentComparison(o)},[Object(E["createElementVNode"])("span",{class:"icon icon-close",title:e.translate("General_ClickToRemoveComp")},null,8,po)],8,mo)):Object(E["createCommentVNode"])("",!0)]))),128)),Object(E["createElementVNode"])("div",ho,[Object(E["createElementVNode"])("img",{src:"plugins/Morpheus/images/loading-blue.gif",alt:e.translate("General_LoadingData")},null,8,go),Object(E["createTextVNode"])(" "+Object(E["toDisplayString"])(e.translate("General_LoadingData")),1)])])),[[r,{duration:200,delay:200,content:e.transformTooltipContent}]]):Object(E["createCommentVNode"])("",!0)}function fo(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}
/*!
 * Matomo - free/libre analytics platform
 *
 * @link    https://matomo.org
 * @license https://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */class vo{get state(){return Object(E["readonly"])(this.segmentState)}constructor(){fo(this,"segmentState",Object(E["reactive"])({availableSegments:[]})),x.on("piwikSegmentationInited",()=>this.setSegmentState())}setSegmentState(){try{const e=$(".segmentEditorPanel").data("uiControlObject");this.segmentState.availableSegments=e.impl.availableSegments||[]}catch(e){}}}var Oo=new vo;function jo(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}
/*!
 * Matomo - free/libre analytics platform
 *
 * @link    https://matomo.org
 * @license https://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */const yo=8,wo=3;function ko(e){return e?Array.isArray(e)?e:[e]:[]}class So{constructor(){jo(this,"privateState",Object(E["reactive"])({comparisonsDisabledFor:[]})),jo(this,"state",Object(E["readonly"])(this.privateState)),jo(this,"colors",{}),jo(this,"segmentComparisons",Object(E["computed"])(()=>this.parseSegmentComparisons())),jo(this,"periodComparisons",Object(E["computed"])(()=>this.parsePeriodComparisons())),jo(this,"isEnabled",Object(E["computed"])(()=>this.checkEnabledForCurrentPage())),"complete"===document.readyState||"interactive"===document.readyState?this.loadComparisonsDisabledFor():document.addEventListener("DOMContentLoaded",()=>{this.loadComparisonsDisabledFor()}),$(()=>{this.colors=this.getAllSeriesColors()}),Object(E["watch"])(()=>this.getComparisons(),()=>x.postEvent("piwikComparisonsChanged"),{deep:!0})}getComparisons(){return this.getSegmentComparisons().concat(this.getPeriodComparisons())}isComparing(){return this.isComparisonEnabled()&&(this.segmentComparisons.value.length>1||this.periodComparisons.value.length>1)}isComparingPeriods(){return this.getPeriodComparisons().length>1}getSegmentComparisons(){return this.isComparisonEnabled()?this.segmentComparisons.value:[]}getPeriodComparisons(){return this.isComparisonEnabled()?this.periodComparisons.value:[]}getSeriesColor(e,t,o=0){const i=this.getComparisonSeriesIndex(t.index,e.index)%yo;if(0===o)return this.colors["series"+i];const n=o%wo;return this.colors[`series${i}-shade${n}`]}getSeriesColorName(e,t){let o="series"+e%yo;return t>0&&(o+="-shade"+t%wo),o}isComparisonEnabled(){return this.isEnabled.value}getIndividualComparisonRowIndices(e){const t=this.getSegmentComparisons().length,o=e%t,i=Math.floor(e/t);return{segmentIndex:o,periodIndex:i}}getComparisonSeriesIndex(e,t){const o=this.getSegmentComparisons().length;return e*o+t}getAllComparisonSeries(){const e=[];let t=0;return this.getPeriodComparisons().forEach(o=>{this.getSegmentComparisons().forEach(i=>{e.push({index:t,params:Object.assign(Object.assign({},i.params),o.params),color:this.colors["series"+t]}),t+=1})}),e}removeSegmentComparison(e){if(!this.isComparisonEnabled())throw new Error("Comparison disabled.");const t=[...this.segmentComparisons.value];t.splice(e,1);const o={};0===e&&(o.segment=t[0].params.segment),this.updateQueryParamsFromComparisons(t,this.periodComparisons.value,o)}addSegmentComparison(e){if(!this.isComparisonEnabled())throw new Error("Comparison disabled.");const t=this.segmentComparisons.value.concat([{params:e,index:-1,title:""}]);this.updateQueryParamsFromComparisons(t,this.periodComparisons.value)}updateQueryParamsFromComparisons(e,t,o={}){const i={},n={};let a=!1,r=!1;e.forEach(e=>{a?i[e.params.segment]=!0:a=!0}),t.forEach(e=>{r?n[`${e.params.period}|${e.params.date}`]=!0:r=!0});const s=[],l=[];Object.keys(n).forEach(e=>{const t=e.split("|");s.push(t[0]),l.push(t[1])});const c={compareSegments:Object.keys(i),comparePeriods:s,compareDates:l},d=x.helper.isReportingPage()?_.hashParsed.value:_.urlParsed.value;_.updateLocation(Object.assign(Object.assign(Object.assign({},d),c),o))}getAllSeriesColors(){const{ColorManager:e}=x;if(!e)return[];const t=[];for(let o=0;o<yo;o+=1){t.push("series"+o);for(let e=0;e<wo;e+=1)t.push(`series${o}-shade${e}`)}return e.getColors("comparison-series-color",t)}loadComparisonsDisabledFor(){const e=_.parsed.value.module;"CoreUpdater"===e||"Installation"===e||"Overlay"===e||window.piwik.isPagesComparisonApiDisabled||window.piwik.installation||window.broadcast.isLoginPage()?this.privateState.comparisonsDisabledFor=[]:W.fetch({module:"API",method:"API.getPagesComparisonsDisabledFor"}).then(e=>{this.privateState.comparisonsDisabledFor=e})}parseSegmentComparisons(){const{availableSegments:e}=Oo.state,t=[...ko(_.parsed.value.compareSegments)];t.unshift(_.parsed.value.segment||"");const o=[];return t.forEach((t,i)=>{let n;e.forEach(e=>{e.definition!==t&&e.definition!==decodeURIComponent(t)&&decodeURIComponent(e.definition)!==t||(n=e)});let r=n?n.name:a("General_Unknown");""===t.trim()&&(r=a("SegmentEditor_DefaultAllVisits")),o.push({params:{segment:t},title:x.helper.htmlDecode(r),index:i})}),o}parsePeriodComparisons(){const e=[...ko(_.parsed.value.comparePeriods)],t=[...ko(_.parsed.value.compareDates)];e.unshift(_.parsed.value.period),t.unshift(_.parsed.value.date);const o=[];for(let n=0;n<Math.min(t.length,e.length);n+=1){let r;try{r=c.parse(e[n],t[n]).getPrettyString()}catch(i){r=a("General_Error")}o.push({params:{date:t[n],period:e[n]},title:r,index:n})}return o}checkEnabledForCurrentPage(){const e=_.parsed.value.category||_.parsed.value.module,t=_.parsed.value.subcategory||_.parsed.value.action,o=`${e}.${t}`,i=-1===this.privateState.comparisonsDisabledFor.indexOf(o)&&-1===this.privateState.comparisonsDisabledFor.indexOf(e+".*");return document.documentElement.classList.toggle("comparisonsDisabled",!i),i}}var Co=new So,Eo=Object(E["defineComponent"])({props:{},directives:{Tooltips:Ze},data(){return{comparisonTooltips:null}},setup(){const e=Object(E["computed"])(()=>Co.isComparing()&&!window.broadcast.isNoDataPage()),t=Object(E["computed"])(()=>Co.getSegmentComparisons()),o=Object(E["computed"])(()=>Co.getPeriodComparisons()),i=Co.getSeriesColor.bind(Co);function n(){const e=window.$(this).attr("title");return e?window.vueSanitize(e.replace(/\n/g,"<br />")):e}return{isComparing:e,segmentComparisons:t,periodComparisons:o,getSeriesColor:i,transformTooltipContent:n}},methods:{comparisonHasSegment(e){return"undefined"!==typeof e.params.segment},removeSegmentComparison(e){window.$(this.$refs.root).tooltip("destroy"),Co.removeSegmentComparison(e)},getComparisonPeriodType(e){const{period:t}=e.params;if("range"===t)return a("CoreHome_PeriodRange");const o=a(`Intl_Period${t.substring(0,1).toUpperCase()}${t.substring(1)}`);return o.substring(0,1).toUpperCase()+o.substring(1)},getComparisonTooltip(e,t){if(this.comparisonTooltips&&Object.keys(this.comparisonTooltips).length)return(this.comparisonTooltips[t.index]||{})[e.index]},getTitleTooltip(e){return this.htmlentities(e.title)+"<br/>"+this.htmlentities(decodeURIComponent(e.params.segment))},getUrlToSegment(e){const t=Object.assign({},_.hashParsed.value);return delete t.comparePeriods,delete t.compareDates,delete t.compareSegments,t.segment=e,`${window.location.search}#?${_.stringify(t)}`},onComparisonsChanged(){if(this.comparisonTooltips=null,!Co.isComparing())return;const e=Co.getPeriodComparisons(),t=Co.getSegmentComparisons();W.fetch({method:"API.getProcessedReport",apiModule:"VisitsSummary",apiAction:"get",compare:"1",compareSegments:_.getSearchParam("compareSegments"),comparePeriods:_.getSearchParam("comparePeriods"),compareDates:_.getSearchParam("compareDates"),format_metrics:"1"}).then(o=>{this.comparisonTooltips={},e.forEach(e=>{this.comparisonTooltips[e.index]={},t.forEach(t=>{const i=this.generateComparisonTooltip(o,e,t);this.comparisonTooltips[e.index][t.index]=i})})})},generateComparisonTooltip(e,t,o){if(!e.reportData.comparisons)return"";const i=Co.getComparisonSeriesIndex(t.index,0),n=e.reportData.comparisons[i],r=Co.getComparisonSeriesIndex(t.index,o.index),s=e.reportData.comparisons[r],l=e.reportData.comparisons[o.index];let c='<div class="comparison-card-tooltip">',d=(s.nb_visits/n.nb_visits*100).toFixed(2);return d+="%",c+=a("General_ComparisonCardTooltip1",[`'${this.htmlentities(s.compareSegmentPretty)}'`,s.comparePeriodPretty,d,s.nb_visits.toString(),n.nb_visits.toString()]),t.index>0&&(c+="<br/><br/>",c+=a("General_ComparisonCardTooltip2",[s.nb_visits_change.toString(),this.htmlentities(l.compareSegmentPretty),l.comparePeriodPretty])),c+="</div>",c},htmlentities(e){return x.helper.htmlEntities(e)}},mounted(){x.on("piwikComparisonsChanged",()=>{this.onComparisonsChanged()}),this.onComparisonsChanged()}});Eo.render=bo;var Do=Eo;const Po={ref:"root",class:"menuDropdown"},To=["title"],Vo=["innerHTML"],No=Object(E["createElementVNode"])("span",{class:"icon-chevron-down reporting-menu-sub-icon"},null,-1),xo={class:"items"},Bo={key:0,class:"search"},Io=["placeholder"],Mo=["title"],Lo=["title"];function Fo(e,t,o,i,n,a){const r=Object(E["resolveDirective"])("focus-if"),s=Object(E["resolveDirective"])("focus-anywhere-but-here");return Object(E["withDirectives"])((Object(E["openBlock"])(),Object(E["createElementBlock"])("div",Po,[Object(E["createElementVNode"])("span",{class:"title",onClick:t[0]||(t[0]=t=>e.showItems=!e.showItems),title:e.tooltip},[Object(E["createElementVNode"])("span",{innerHTML:e.$sanitize(this.actualMenuTitle)},null,8,Vo),No],8,To),Object(E["withDirectives"])(Object(E["createElementVNode"])("div",xo,[e.showSearch&&e.showItems?(Object(E["openBlock"])(),Object(E["createElementBlock"])("div",Bo,[Object(E["withDirectives"])(Object(E["createElementVNode"])("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=t=>e.searchTerm=t),onKeydown:t[2]||(t[2]=t=>e.onSearchTermKeydown(t)),placeholder:e.translate("General_Search")},null,40,Io),[[E["vModelText"],e.searchTerm],[r,{focused:e.showItems}]]),Object(E["withDirectives"])(Object(E["createElementVNode"])("div",{class:"search_ico icon-search",title:e.translate("General_Search")},null,8,Mo),[[E["vShow"],!e.searchTerm]]),Object(E["withDirectives"])(Object(E["createElementVNode"])("div",{onClick:t[3]||(t[3]=t=>{e.searchTerm="",e.searchItems("")}),class:"reset icon-close",title:e.translate("General_Clear")},null,8,Lo),[[E["vShow"],e.searchTerm]])])):Object(E["createCommentVNode"])("",!0),Object(E["createElementVNode"])("div",{onClick:t[4]||(t[4]=t=>e.selectItem(t))},[Object(E["renderSlot"])(e.$slots,"default")])],512),[[E["vShow"],e.showItems]])])),[[s,{blur:e.lostFocus}]])}const{$:Ao}=window;var _o=Object(E["defineComponent"])({props:{menuTitle:String,tooltip:String,showSearch:Boolean,menuTitleChangeOnClick:Boolean},directives:{FocusAnywhereButHere:Ge,FocusIf:Je},emits:["afterSelect"],watch:{menuTitle(){this.actualMenuTitle=this.menuTitle}},data(){return{showItems:!1,searchTerm:"",actualMenuTitle:this.menuTitle}},methods:{lostFocus(){this.showItems=!1},selectItem(e){const t=e.target.classList;!t.contains("item")||t.contains("disabled")||t.contains("separator")||(this.menuTitleChangeOnClick&&(this.actualMenuTitle=(e.target.textContent||"").replace(/[\u0000-\u2666]/g,e=>`&#${e.charCodeAt(0)};`)),this.showItems=!1,Ao(this.$slots.default()[0].el).find(".item").removeClass("active"),t.add("active"),this.$emit("afterSelect",e.target))},onSearchTermKeydown(){setTimeout(()=>{this.searchItems(this.searchTerm)})},searchItems(e){const t=e.toLowerCase();Ao(this.$refs.root).find(".item").each((e,o)=>{const i=Ao(o);-1===i.text().toLowerCase().indexOf(t)?i.hide():i.show()})}}});_o.render=Fo;var Ro=_o;const Ho={ref:"root"};function $o(e,t,o,i,n,a){return Object(E["openBlock"])(),Object(E["createElementBlock"])("div",Ho,null,512)}const Uo=1,{$:qo}=window;var Wo=Object(E["defineComponent"])({props:{selectedDateStart:Date,selectedDateEnd:Date,highlightedDateStart:Date,highlightedDateEnd:Date,viewDate:[String,Date],stepMonths:Number,disableMonthDropdown:Boolean,options:Object},emits:["cellHover","cellHoverLeave","dateSelect"],setup(e,t){const o=Object(E["ref"])(null);function i(t,o){const i=t.children("a");if(e.selectedDateStart&&e.selectedDateEnd&&o>=e.selectedDateStart&&o<=e.selectedDateEnd?t.addClass("ui-datepicker-current-period"):t.removeClass("ui-datepicker-current-period"),e.highlightedDateStart&&e.highlightedDateEnd&&o>=e.highlightedDateStart&&o<=e.highlightedDateEnd){const e=i.length?i:t;e.addClass("ui-state-hover")}else t.removeClass("ui-state-hover"),i.removeClass("ui-state-hover")}function n(e,t,o){if(e.hasClass("ui-datepicker-other-month"))return a(e,t,o);const i=parseInt(e.children("a,span").text(),10);return new Date(o,t,i)}function a(e,t,o){let i;const a=e.parent(),r=a.children("td");if(a.is(":first-child")){const s=a.children("td:not(.ui-datepicker-other-month)").first();return i=n(s,t,o),i.setDate(r.index(e)-r.index(s)+1),i}const s=a.children("td:not(.ui-datepicker-other-month)").last();return i=n(s,t,o),i.setDate(i.getDate()+r.index(e)-r.index(s)),i}function r(){const e=qo(o.value),t=e.find("td[data-month]"),i=parseInt(t.attr("data-month"),10),n=parseInt(t.attr("data-year"),10);return[i,n]}function s(){const e=qo(o.value),t=e.find(".ui-datepicker-calendar"),a=r(),s=t.find("td"),l=s.first(),c=n(l,a[0],a[1]);s.each((function(){i(qo(this),c),c.setDate(c.getDate()+1)}))}function l(){if(!e.viewDate)return!1;let t;if("string"===typeof e.viewDate)try{t=m(e.viewDate)}catch(a){return!1}else t=e.viewDate;const i=qo(o.value),n=r();return(n[0]!==t.getMonth()||n[1]!==t.getFullYear())&&(i.datepicker("setDate",t),!0)}function c(){const e=qo(o.value);e.find("td[data-event]").off("click"),e.find(".ui-state-active").removeClass("ui-state-active"),e.find(".ui-datepicker-current-day").removeClass("ui-datepicker-current-day"),e.find(".ui-datepicker-prev,.ui-datepicker-next").attr("href","")}function d(){const t=qo(o.value),i=e.stepMonths||Uo;if(t.datepicker("option","stepMonths")===i)return!1;const n=qo(".ui-datepicker-month",t).val(),a=qo(".ui-datepicker-year",t).val();return t.datepicker("option","stepMonths",i).datepicker("setDate",new Date(a,n)),c(),!0}function u(){const t=qo(o.value),i=t.find(".ui-datepicker-month")[0];i&&(i.disabled=e.disableMonthDropdown)}function p(){if(!qo(this).hasClass("ui-state-hover"))return;const e=qo(this).parent(),t=e.parent();e.is(":first-child")?t.find("a").first().click():t.find("a").last().click()}function h(){u(),s()}return Object(E["watch"])(()=>Object.assign({},e),(e,t)=>{let o=!1;[e=>e.selectedDateStart,e=>e.selectedDateEnd,e=>e.highlightedDateStart,e=>e.highlightedDateEnd].forEach(i=>{if(o)return;const n=i(e),a=i(t);!n&&a&&(o=!0),n&&!a&&(o=!0),n&&a&&n.getTime()!==a.getTime()&&(o=!0)}),e.viewDate!==t.viewDate&&l()&&(o=!0),e.stepMonths!==t.stepMonths&&d(),e.disableMonthDropdown!==t.disableMonthDropdown&&u(),o&&s()}),Object(E["onMounted"])(()=>{const i=qo(o.value),a=e.options||{},m=Object.assign(Object.assign(Object.assign({},x.getBaseDatePickerOptions()),a),{},{onChangeMonthYear:()=>{setTimeout(()=>{c()})}});i.datepicker(m),i.on("mouseover","tbody td a",e=>{e.originalEvent&&s()}),i.on("mouseenter","tbody td",(function(){const e=r(),o=qo(this),i=n(o,e[0],e[1]);t.emit("cellHover",{date:i,$cell:o})})),i.on("mouseout","tbody td a",()=>{s()}),i.on("mouseleave","table",()=>t.emit("cellHoverLeave")).on("mouseenter","thead",()=>t.emit("cellHoverLeave")),i.on("click","tbody td.ui-datepicker-other-month",p),i.on("click",e=>{e.preventDefault();const t=qo(e.target).closest("a");(t.is(".ui-datepicker-next")||t.is(".ui-datepicker-prev"))&&h()}),i.on("click","td[data-month]",e=>{const o=qo(e.target).closest("td"),i=parseInt(o.attr("data-month"),10),n=parseInt(o.attr("data-year"),10),a=parseInt(o.children("a,span").text(),10);t.emit("dateSelect",{date:new Date(n,i,a)})});const g=d();l(),u(),g||c(),s()}),{root:o}}});Wo.render=$o;var zo=Wo;const Go={class:"dateRangePicker"},Yo={id:"calendarRangeFrom"},Jo={id:"calendarRangeTo"};function Ko(e,t,o,i,n,a){const r=Object(E["resolveComponent"])("DatePicker");return Object(E["openBlock"])(),Object(E["createElementBlock"])("div",Go,[Object(E["createElementVNode"])("div",Yo,[Object(E["createElementVNode"])("h6",null,[Object(E["createTextVNode"])(Object(E["toDisplayString"])(e.translate("General_DateRangeFrom"))+" ",1),Object(E["withDirectives"])(Object(E["createElementVNode"])("input",{type:"text",id:"inputCalendarFrom",name:"inputCalendarFrom",class:"browser-default","onUpdate:modelValue":t[0]||(t[0]=t=>e.startDateText=t),onKeydown:t[1]||(t[1]=t=>e.onRangeInputChanged("from",t)),onKeyup:t[2]||(t[2]=t=>e.handleEnterPress(t))},null,544),[[E["vModelText"],e.startDateText]])]),Object(E["createVNode"])(r,{id:"calendarFrom","view-date":e.startDate,"selected-date-start":e.fromPickerSelectedDates[0],"selected-date-end":e.fromPickerSelectedDates[1],"highlighted-date-start":e.fromPickerHighlightedDates[0],"highlighted-date-end":e.fromPickerHighlightedDates[1],onDateSelect:t[3]||(t[3]=t=>e.setStartRangeDate(t.date)),onCellHover:t[4]||(t[4]=t=>e.fromPickerHighlightedDates=e.getNewHighlightedDates(t.date,t.$cell)),onCellHoverLeave:t[5]||(t[5]=t=>e.fromPickerHighlightedDates=[null,null])},null,8,["view-date","selected-date-start","selected-date-end","highlighted-date-start","highlighted-date-end"])]),Object(E["createElementVNode"])("div",Jo,[Object(E["createElementVNode"])("h6",null,[Object(E["createTextVNode"])(Object(E["toDisplayString"])(e.translate("General_DateRangeTo"))+" ",1),Object(E["withDirectives"])(Object(E["createElementVNode"])("input",{type:"text",id:"inputCalendarTo",name:"inputCalendarTo",class:"browser-default","onUpdate:modelValue":t[6]||(t[6]=t=>e.endDateText=t),onKeydown:t[7]||(t[7]=t=>e.onRangeInputChanged("to",t)),onKeyup:t[8]||(t[8]=t=>e.handleEnterPress(t))},null,544),[[E["vModelText"],e.endDateText]])]),Object(E["createVNode"])(r,{id:"calendarTo","view-date":e.endDate,"selected-date-start":e.toPickerSelectedDates[0],"selected-date-end":e.toPickerSelectedDates[1],"highlighted-date-start":e.toPickerHighlightedDates[0],"highlighted-date-end":e.toPickerHighlightedDates[1],onDateSelect:t[9]||(t[9]=t=>e.setEndRangeDate(t.date)),onCellHover:t[10]||(t[10]=t=>e.toPickerHighlightedDates=e.getNewHighlightedDates(t.date,t.$cell)),onCellHoverLeave:t[11]||(t[11]=t=>e.toPickerHighlightedDates=[null,null])},null,8,["view-date","selected-date-start","selected-date-end","highlighted-date-start","highlighted-date-end"])])])}const Qo="YYYY-MM-DD";var Xo=Object(E["defineComponent"])({props:{startDate:String,endDate:String},components:{DatePicker:zo},data(){let e=null;try{this.startDate&&(e=m(this.startDate))}catch(o){}let t=null;try{this.endDate&&(t=m(this.endDate))}catch(o){}return{fromPickerSelectedDates:[e,e],toPickerSelectedDates:[t,t],fromPickerHighlightedDates:[null,null],toPickerHighlightedDates:[null,null],startDateText:this.startDate,endDateText:this.endDate,startDateInvalid:!1,endDateInvalid:!1}},emits:["rangeChange","submit"],watch:{startDate(){this.startDateText=this.startDate,this.setStartRangeDateFromStr(this.startDate)},endDate(){this.endDateText=this.endDate,this.setEndRangeDateFromStr(this.endDate)}},mounted(){this.rangeChanged()},methods:{setStartRangeDate(e){this.fromPickerSelectedDates=[e,e],this.rangeChanged()},setEndRangeDate(e){this.toPickerSelectedDates=[e,e],this.rangeChanged()},onRangeInputChanged(e,t){setTimeout(()=>{"from"===e?this.setStartRangeDateFromStr(t.target.value):this.setEndRangeDateFromStr(t.target.value)})},getNewHighlightedDates(e,t){return t.hasClass("ui-datepicker-unselectable")?null:[e,e]},handleEnterPress(e){13===e.keyCode&&this.$emit("submit",{start:this.startDate,end:this.endDate})},setStartRangeDateFromStr(e){this.startDateInvalid=!0;let t=null;try{e&&e.length===Qo.length&&(t=m(e))}catch(o){}t&&(this.fromPickerSelectedDates=[t,t],this.startDateInvalid=!1,this.rangeChanged())},setEndRangeDateFromStr(e){this.endDateInvalid=!0;let t=null;try{e&&e.length===Qo.length&&(t=m(e))}catch(o){}t&&(this.toPickerSelectedDates=[t,t],this.endDateInvalid=!1,this.rangeChanged())},rangeChanged(){this.$emit("rangeChange",{start:this.fromPickerSelectedDates[0]?d(this.fromPickerSelectedDates[0]):null,end:this.toPickerSelectedDates[0]?d(this.toPickerSelectedDates[0]):null})}}});Xo.render=Ko;var Zo=Xo;function ei(e,t,o,i,n,a){const r=Object(E["resolveComponent"])("DatePicker");return Object(E["openBlock"])(),Object(E["createBlock"])(r,{"selected-date-start":e.selectedDates[0],"selected-date-end":e.selectedDates[1],"highlighted-date-start":e.highlightedDates[0],"highlighted-date-end":e.highlightedDates[1],"view-date":e.viewDate,"step-months":"year"===e.period?12:1,"disable-month-dropdown":"year"===e.period,onCellHover:t[0]||(t[0]=t=>e.onHoverNormalCell(t.date,t.$cell)),onCellHoverLeave:t[1]||(t[1]=t=>e.onHoverLeaveNormalCells()),onDateSelect:t[2]||(t[2]=t=>e.onDateSelected(t.date))},null,8,["selected-date-start","selected-date-end","highlighted-date-start","highlighted-date-end","view-date","step-months","disable-month-dropdown"])}const ti=new Date(x.minDateYear,x.minDateMonth-1,x.minDateDay),oi=new Date(x.maxDateYear,x.maxDateMonth-1,x.maxDateDay);var ii=Object(E["defineComponent"])({props:{period:{type:String,required:!0},date:[String,Date]},components:{DatePicker:zo},emits:["select"],setup(e,t){const o=Object(E["ref"])(e.date),i=Object(E["ref"])([null,null]),n=Object(E["ref"])([null,null]);function a(t){const o=c.get(e.period).parse(t).getDateRange();return o[0]=ti<o[0]?o[0]:ti,o[1]=oi>o[1]?o[1]:oi,o}function r(t,o){const i=t<ti||t>oi,r=o.hasClass("ui-datepicker-other-month")&&("month"===e.period||"day"===e.period);n.value=i||r?[null,null]:a(t)}function s(){n.value=[null,null]}function l(e){t.emit("select",{date:e})}function d(){if(!e.period||!e.date)return i.value=[null,null],void(o.value=null);i.value=a(e.date),o.value=m(e.date)}return Object(E["watch"])(e,d),d(),{selectedDates:i,highlightedDates:n,viewDate:o,onHoverNormalCell:r,onHoverLeaveNormalCells:s,onDateSelected:l}}});ii.render=ei;var ni=ii;const ai={key:0},ri=["data-notification-instance-id"],si={key:1},li={class:"notification-body"},ci=["innerHTML"],di={key:1};function ui(e,t,o,i,n,a){return Object(E["openBlock"])(),Object(E["createBlock"])(E["Transition"],{name:"toast"===e.type?"slow-fade-out":void 0,onAfterLeave:t[1]||(t[1]=t=>e.toastClosed())},{default:Object(E["withCtx"])(()=>[e.deleted?Object(E["createCommentVNode"])("",!0):(Object(E["openBlock"])(),Object(E["createElementBlock"])("div",ai,[Object(E["createVNode"])(E["Transition"],{name:"toast"===e.type?"toast-slide-up":void 0,appear:""},{default:Object(E["withCtx"])(()=>[Object(E["createElementVNode"])("div",null,[Object(E["createVNode"])(E["Transition"],{name:e.animate?"fade-in":void 0,appear:""},{default:Object(E["withCtx"])(()=>[Object(E["createElementVNode"])("div",{class:Object(E["normalizeClass"])(["notification system",e.cssClasses]),style:Object(E["normalizeStyle"])(e.style),ref:"root","data-notification-instance-id":e.notificationInstanceId},[e.canClose?(Object(E["openBlock"])(),Object(E["createElementBlock"])("button",{key:0,type:"button",class:"close","data-dismiss":"alert",onClick:t[0]||(t[0]=t=>e.closeNotification(t))}," × ")):Object(E["createCommentVNode"])("",!0),e.title?(Object(E["openBlock"])(),Object(E["createElementBlock"])("strong",si,Object(E["toDisplayString"])(e.title),1)):Object(E["createCommentVNode"])("",!0),Object(E["createElementVNode"])("div",li,[e.message?(Object(E["openBlock"])(),Object(E["createElementBlock"])("div",{key:0,innerHTML:e.$sanitize(e.message)},null,8,ci)):Object(E["createCommentVNode"])("",!0),e.message?Object(E["createCommentVNode"])("",!0):(Object(E["openBlock"])(),Object(E["createElementBlock"])("div",di,[Object(E["renderSlot"])(e.$slots,"default")]))])],14,ri)]),_:3},8,["name"])])]),_:3},8,["name"])]))]),_:3},8,["name"])}const{$:mi}=window;var pi=Object(E["defineComponent"])({props:{notificationId:String,notificationInstanceId:String,title:String,context:String,type:String,noclear:Boolean,toastLength:{type:Number,default:12e3},style:[String,Object],animate:Boolean,message:String,cssClass:String},computed:{cssClasses(){const e={};return this.context&&(e["notification-"+this.context]=!0),this.cssClass&&(e[this.cssClass]=!0),e},canClose(){return"persistent"===this.type||!this.noclear}},emits:["closed"],data(){return{deleted:!1}},mounted(){const e=()=>{setTimeout(()=>{this.deleted=!0},this.toastLength)};"toast"===this.type&&e(),this.style&&mi(this.$refs.root).css(this.style)},methods:{toastClosed(){Object(E["nextTick"])(()=>{this.$emit("closed")})},closeNotification(e){this.canClose&&e&&e.target&&(this.deleted=!0,Object(E["nextTick"])(()=>{this.$emit("closed")})),this.markNotificationAsRead()},markNotificationAsRead(){this.notificationId&&W.post({module:"CoreHome",action:"markNotificationAsRead"},{notificationId:this.notificationId},{withTokenInUrl:!0})}}});pi.render=ui;var hi=pi;const gi={class:"notification-group"},bi=["innerHTML"];function fi(e,t,o,i,n,a){const r=Object(E["resolveComponent"])("Notification");return Object(E["openBlock"])(),Object(E["createElementBlock"])("div",gi,[(Object(E["openBlock"])(!0),Object(E["createElementBlock"])(E["Fragment"],null,Object(E["renderList"])(e.notifications,(t,o)=>(Object(E["openBlock"])(),Object(E["createBlock"])(r,{key:t.id||"no-id-"+o,"notification-id":t.id,title:t.title,context:t.context,type:t.type,noclear:t.noclear,"toast-length":t.toastLength,style:Object(E["normalizeStyle"])(t.style),animate:t.animate,message:t.message,"notification-instance-id":t.notificationInstanceId,"css-class":t.class,onClosed:o=>e.removeNotification(t.id)},{default:Object(E["withCtx"])(()=>[Object(E["createElementVNode"])("div",{innerHTML:e.$sanitize(t.message)},null,8,bi)]),_:2},1032,["notification-id","title","context","type","noclear","toast-length","style","animate","message","notification-instance-id","css-class","onClosed"]))),128))])}function vi(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}
/*!
 * Matomo - free/libre analytics platform
 *
 * @link    https://matomo.org
 * @license https://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */const{$:Oi}=window;class ji{constructor(){vi(this,"privateState",Object(E["reactive"])({notifications:[]})),vi(this,"nextNotificationId",0)}get state(){return Object(E["readonly"])(this.privateState)}appendNotification(e){this.checkMessage(e.message),e.id&&this.remove(e.id),this.privateState.notifications.push(e)}prependNotification(e){this.checkMessage(e.message),e.id&&this.remove(e.id),this.privateState.notifications.unshift(e)}remove(e){this.privateState.notifications=this.privateState.notifications.filter(t=>t.id!==e)}parseNotificationDivs(){const e=Oi('[data-role="notification"]'),t=[];e.each((o,i)=>{const n=Oi(i),a=n.data(),r=n.html();r&&t.push(Object.assign(Object.assign({},a),{},{message:r,animate:!1})),e.remove()}),t.forEach(e=>this.show(e))}clearTransientNotifications(){this.privateState.notifications=this.privateState.notifications.filter(e=>"transient"!==e.type)}show(e){this.checkMessage(e.message);let t=e.prepend?this.prependNotification:this.appendNotification,o="#notificationContainer";if(e.placeat)o=e.placeat;else{const e=".modal.open .modal-content",i=document.querySelector(e);i&&(i.querySelector("#modalNotificationContainer")||Oi(i).prepend('<div id="modalNotificationContainer"/>'),o=e+" #modalNotificationContainer",t=this.prependNotification)}const i=e.group||(o?o.toString():"");this.initializeNotificationContainer(o,i);const n=(this.nextNotificationId+=1).toString();return t.call(this,Object.assign(Object.assign({},e),{},{noclear:!!e.noclear,group:i,notificationId:e.id,notificationInstanceId:n,type:e.type||"transient"})),n}scrollToNotification(e){setTimeout(()=>{const t=document.querySelector(`[data-notification-instance-id='${e}']`);t&&x.helper.lazyScrollTo(t,250)})}toast(e){this.checkMessage(e.message);const t=e.placeat?Oi(e.placeat):void 0;if(!t||!t.length)throw new Error("A valid selector is required for the placeat option when using Notification.toast().");const o=document.createElement("div");o.style.position="absolute",o.style.top=t.offset().top+"px",o.style.left=t.offset().left+"px",o.style.zIndex="1000",document.body.appendChild(o);const i=de({render:()=>Object(E["createVNode"])(hi,Object.assign(Object.assign({},e),{},{notificationId:e.id,type:"toast",onClosed:()=>{i.unmount()}}))});i.mount(o)}initializeNotificationContainer(e,t){if(!e)return;const o=Oi(e);if(o.children(".notification-group").length)return;const i=window.CoreHome.NotificationGroup,n=de({template:'<NotificationGroup :group="group"></NotificationGroup>',data:()=>({group:t})});n.component("NotificationGroup",i),n.mount(o[0])}checkMessage(e){if(!e)throw new Error("No message given, cannot display notification")}}const yi=new ji;var wi=yi;Oi(()=>yi.parseNotificationDivs());var ki=Object(E["defineComponent"])({props:{group:String},components:{Notification:hi},computed:{notifications(){return wi.state.notifications.filter(e=>this.group?this.group===e.group:!e.group)}},methods:{removeNotification(e){wi.remove(e)}}});ki.render=fi;var Si=ki;
/*!
 * Matomo - free/libre analytics platform
 *
 * @link    https://matomo.org
 * @license https://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */const Ci=Object(E["createElementVNode"])("span",{class:"icon-help"},null,-1),Ei=[Ci];function Di(e,t,o,i,n,a){return Object(E["openBlock"])(),Object(E["createElementBlock"])("a",{class:"item-help-icon",tabindex:"5",href:"javascript:",onClick:t[0]||(t[0]=(...t)=>e.showHelp&&e.showHelp(...t))},Ei)}const Pi="reportingMenu-help";var Ti=Object(E["defineComponent"])({props:{message:{type:String,required:!0},name:{type:String,required:!0}},data(){return{currentName:""}},methods:{showHelp(){if(""!==this.currentName)return wi.remove(Pi),void(this.currentName="");wi.show({context:"info",id:Pi,type:"help",noclear:!0,class:"help-notification",message:this.message,placeat:"#notificationContainer",prepend:!0}),""!==this.name&&(this.currentName=this.name)}}});Ti.render=Di;var Vi=Ti;function Ni(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}
/*!
 * Matomo - free/libre analytics platform
 *
 * @link    https://matomo.org
 * @license https://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */class xi{constructor(){Ni(this,"state",Object(E["reactive"])({initialSites:[],isInitialized:!1})),Ni(this,"stateFiltered",Object(E["reactive"])({initialSites:[],isInitialized:!1,excludedSites:[],onlySitesWithAdminAccess:!1,onlySitesWithAtLeastWriteAccess:!1,siteTypesToExclude:[]})),Ni(this,"currentRequestAbort",null),Ni(this,"limitRequest",void 0),Ni(this,"initialSites",Object(E["computed"])(()=>Object(E["readonly"])(this.state.initialSites))),Ni(this,"initialSitesFiltered",Object(E["computed"])(()=>Object(E["readonly"])(this.stateFiltered.initialSites)))}isFiltered(e=!1,t=[],o=!1,i=[]){return t.length>0||e||o||i.length>0}matchesCurrentFilteredState(e=!1,t=[],o=!1,i=[]){return!this.stateFiltered.isInitialized&&!this.isFiltered(e,t,o,i)||this.stateFiltered.isInitialized&&t.length===this.stateFiltered.excludedSites.length&&t.every((e,t)=>e===this.stateFiltered.excludedSites[t])&&e===this.stateFiltered.onlySitesWithAdminAccess&&o===this.stateFiltered.onlySitesWithAtLeastWriteAccess&&i.length===this.stateFiltered.siteTypesToExclude.length&&i.every((e,t)=>e===this.stateFiltered.siteTypesToExclude[t])}loadInitialSites(e=!1,t=[],o=!1,i=[]){return this.state.isInitialized&&!this.isFiltered(e,t,o,i)?Promise.resolve(Object(E["readonly"])(this.state.initialSites)):this.stateFiltered.isInitialized&&this.matchesCurrentFilteredState(e,t,o,i)?Promise.resolve(Object(E["readonly"])(this.stateFiltered.initialSites)):this.isFiltered(e,t,o,i)?this.searchSite("%",e,t,o,i).then(n=>(this.stateFiltered.isInitialized=!0,this.stateFiltered.excludedSites=t,this.stateFiltered.onlySitesWithAdminAccess=e,this.stateFiltered.onlySitesWithAtLeastWriteAccess=o,this.stateFiltered.siteTypesToExclude=i,null!==n&&(this.stateFiltered.initialSites=n),n)):this.state.isInitialized?Promise.resolve(Object(E["readonly"])(this.state.initialSites)):this.searchSite("%",e,t,o,i).then(e=>(this.state.isInitialized=!0,null!==e&&(this.state.initialSites=e),e))}loadSite(e){"all"===e?_.updateUrl(Object.assign(Object.assign({},_.urlParsed.value),{},{module:"MultiSites",action:"index",date:_.parsed.value.date,period:_.parsed.value.period})):_.updateUrl(Object.assign(Object.assign({},_.urlParsed.value),{},{segment:"",idSite:e}),Object.assign(Object.assign({},_.hashParsed.value),{},{segment:"",idSite:e}))}searchSite(e,t=!1,o=[],i=!1,n=[]){return e?(this.currentRequestAbort&&this.currentRequestAbort.abort(),this.limitRequest||(this.limitRequest=W.fetch({method:"SitesManager.getNumWebsitesToDisplayPerPage"})),this.limitRequest.then(a=>{const r=a.value;let s="view";return t?s="admin":i&&(s="write"),this.currentRequestAbort=new AbortController,W.fetch({method:"SitesManager.getSitesWithMinimumAccess",permission:s,limit:r,pattern:e,sitesToExclude:o,siteTypesToExclude:n},{abortController:this.currentRequestAbort,abortable:!1})}).then(e=>e?this.processWebsitesList(e):null).finally(()=>{this.currentRequestAbort=null})):this.loadInitialSites(t,o,i,n)}processWebsitesList(e){let t=e;return t&&t.length?(t=t.map(e=>Object.assign(Object.assign({},e),{},{name:e.group?`[${e.group}] ${e.name}`:e.name})),t.sort((e,t)=>e.name.toLowerCase()<t.name.toLowerCase()?-1:e.name.toLowerCase()>t.name.toLowerCase()?1:0),t):[]}}var Bi=new xi;const Ii=["value","name"],Mi=["title"],Li=["textContent"],Fi={key:1,class:"placeholder"},Ai={class:"dropdown"},_i={class:"custom_select_search"},Ri=["placeholder"],Hi={key:0},$i={class:"custom_select_container"},Ui=["onClick"],qi=["innerHTML","href","title"],Wi={class:"custom_select_ul_list"},zi={class:"noresult"},Gi={key:1};function Yi(e,t,o,i,n,a){var r,s,l,c;const d=Object(E["resolveComponent"])("AllSitesLink"),u=Object(E["resolveDirective"])("tooltips"),m=Object(E["resolveDirective"])("focus-if"),p=Object(E["resolveDirective"])("focus-anywhere-but-here");return Object(E["withDirectives"])((Object(E["openBlock"])(),Object(E["createElementBlock"])("div",{class:Object(E["normalizeClass"])(["siteSelector piwikSelector borderedControl",{expanded:e.showSitesList,disabled:!e.hasMultipleSites}])},[e.name?(Object(E["openBlock"])(),Object(E["createElementBlock"])("input",{key:0,type:"hidden",value:null===(r=e.displayedModelValue)||void 0===r?void 0:r.id,name:e.name},null,8,Ii)):Object(E["createCommentVNode"])("",!0),Object(E["withDirectives"])((Object(E["openBlock"])(),Object(E["createElementBlock"])("a",{ref:"selectorLink",onClick:t[0]||(t[0]=(...t)=>e.onClickSelector&&e.onClickSelector(...t)),onKeydown:t[1]||(t[1]=t=>e.onPressEnter(t)),href:"javascript:void(0)",class:Object(E["normalizeClass"])([{loading:e.isLoading},"title"]),tabindex:"4",title:e.selectorLinkTitle},[Object(E["createElementVNode"])("span",{class:Object(E["normalizeClass"])(["icon icon-chevron-down",{iconHidden:e.isLoading,collapsed:!e.showSitesList}])},null,2),Object(E["createElementVNode"])("span",null,[null!==(s=e.displayedModelValue)&&void 0!==s&&s.name||!e.placeholder?(Object(E["openBlock"])(),Object(E["createElementBlock"])("span",{key:0,textContent:Object(E["toDisplayString"])((null===(l=e.displayedModelValue)||void 0===l?void 0:l.name)||e.firstSiteName)},null,8,Li)):Object(E["createCommentVNode"])("",!0),null!==(c=e.displayedModelValue)&&void 0!==c&&c.name||!e.placeholder?Object(E["createCommentVNode"])("",!0):(Object(E["openBlock"])(),Object(E["createElementBlock"])("span",Fi,Object(E["toDisplayString"])(e.placeholder),1))])],42,Mi)),[[u]]),Object(E["withDirectives"])(Object(E["createElementVNode"])("div",Ai,[Object(E["withDirectives"])(Object(E["createElementVNode"])("div",_i,[Object(E["withDirectives"])(Object(E["createElementVNode"])("input",{type:"text",onClick:t[2]||(t[2]=t=>{e.searchTerm="",e.loadInitialSites()}),"onUpdate:modelValue":t[3]||(t[3]=t=>e.searchTerm=t),tabindex:"4",class:"websiteSearch inp browser-default",placeholder:e.translate("General_Search")},null,8,Ri),[[E["vModelText"],e.searchTerm],[m,{focused:e.shouldFocusOnSearch}]]),Object(E["withDirectives"])(Object(E["createElementVNode"])("img",{title:"Clear",onClick:t[4]||(t[4]=t=>{e.searchTerm="",e.loadInitialSites()}),class:"reset",src:"plugins/CoreHome/images/reset_search.png"},null,512),[[E["vShow"],e.searchTerm]])],512),[[E["vShow"],e.autocompleteMinSites<=e.sites.length||e.searchTerm]]),"top"===e.allSitesLocation&&e.showAllSitesItem?(Object(E["openBlock"])(),Object(E["createElementBlock"])("div",Hi,[Object(E["createVNode"])(d,{href:e.urlAllSites,"all-sites-text":e.allSitesText,onClick:t[5]||(t[5]=t=>e.onAllSitesClick(t))},null,8,["href","all-sites-text"])])):Object(E["createCommentVNode"])("",!0),Object(E["withDirectives"])((Object(E["openBlock"])(),Object(E["createElementBlock"])("div",$i,[Object(E["createElementVNode"])("ul",{class:"custom_select_ul_list",onClick:t[7]||(t[7]=t=>e.showSitesList=!1)},[(Object(E["openBlock"])(!0),Object(E["createElementBlock"])(E["Fragment"],null,Object(E["renderList"])(e.sites,(o,i)=>Object(E["withDirectives"])((Object(E["openBlock"])(),Object(E["createElementBlock"])("li",{onClick:t=>e.switchSite(Object.assign(Object.assign({},o),{},{id:o.idsite}),t),key:i},[Object(E["createElementVNode"])("a",{onClick:t[6]||(t[6]=e=>e.preventDefault()),innerHTML:e.$sanitize(e.getMatchedSiteName(o.name)),tabindex:"4",href:e.getUrlForSiteId(o.idsite),title:o.name},null,8,qi)],8,Ui)),[[E["vShow"],!(!e.showSelectedSite&&""+e.activeSiteId===""+o.idsite)]])),128))]),Object(E["withDirectives"])(Object(E["createElementVNode"])("ul",Wi,[Object(E["createElementVNode"])("li",null,[Object(E["createElementVNode"])("div",zi,Object(E["toDisplayString"])(e.translate("SitesManager_NotFound")+" "+e.searchTerm),1)])],512),[[E["vShow"],!e.sites.length&&e.searchTerm]])])),[[u,{content:e.tooltipContent}]]),"bottom"===e.allSitesLocation&&e.showAllSitesItem?(Object(E["openBlock"])(),Object(E["createElementBlock"])("div",Gi,[Object(E["createVNode"])(d,{href:e.urlAllSites,"all-sites-text":e.allSitesText,onClick:t[8]||(t[8]=t=>e.onAllSitesClick(t))},null,8,["href","all-sites-text"])])):Object(E["createCommentVNode"])("",!0)],512),[[E["vShow"],e.showSitesList]])],2)),[[p,{blur:e.onBlur}]])}const Ji=["innerHTML","href"];function Ki(e,t,o,i,n,a){return Object(E["openBlock"])(),Object(E["createElementBlock"])("div",{onClick:t[1]||(t[1]=e=>this.onClick(e)),class:"custom_select_all"},[Object(E["createElementVNode"])("a",{onClick:t[0]||(t[0]=e=>e.preventDefault()),innerHTML:e.$sanitize(e.allSitesText),tabindex:"4",href:e.href},null,8,Ji)])}var Qi=Object(E["defineComponent"])({props:{href:String,allSitesText:String},emits:["click"],methods:{onClick(e){this.$emit("click",e)}}});Qi.render=Ki;var Xi=Qi,Zi=Object(E["defineComponent"])({props:{modelValue:Object,showSelectedSite:{type:Boolean,default:!1},showAllSitesItem:{type:Boolean,default:!0},switchSiteOnSelect:{type:Boolean,default:!0},onlySitesWithAdminAccess:{type:Boolean,default:!1},name:{type:String,default:""},allSitesText:{type:String,default:a("General_MultiSitesSummary")},allSitesLocation:{type:String,default:"bottom"},placeholder:String,defaultToFirstSite:Boolean,sitesToExclude:{type:Array,default:()=>[]},onlySitesWithAtLeastWriteAccess:{type:Boolean,default:!1},siteTypesToExclude:{type:Array,default:()=>[]}},emits:["update:modelValue","blur"],components:{AllSitesLink:Xi},directives:{FocusAnywhereButHere:Ge,FocusIf:Je,Tooltips:Ze},watch:{searchTerm(){this.onSearchTermChanged()}},data(){return{searchTerm:"",activeSiteId:""+x.idSite,showSitesList:!1,isLoading:!1,sites:[],autocompleteMinSites:parseInt(x.config.autocomplete_min_sites,10)}},created(){this.searchSite=je(this.searchSite),!this.modelValue&&x.idSite&&this.$emit("update:modelValue",{id:x.idSite,name:x.helper.htmlDecode(x.siteName)})},mounted(){window.initTopControls(),this.loadInitialSites().then(()=>{this.shouldDefaultToFirstSite&&this.$emit("update:modelValue",{id:this.sites[0].idsite,name:this.sites[0].name})});const e=a("CoreHome_ShortcutWebsiteSelector");x.helper.registerShortcut("w",e,e=>{if(e.altKey)return;e.preventDefault?e.preventDefault():e.returnValue=!1;const t=this.$refs.selectorLink;t&&(t.click(),t.focus())})},computed:{shouldFocusOnSearch(){return this.showSitesList&&this.autocompleteMinSites<=this.sites.length||this.searchTerm},selectorLinkTitle(){return this.hasMultipleSites&&this.displayedModelValue?a("CoreHome_ChangeCurrentWebsite",this.displayedModelValue.name):""},hasMultipleSites(){const e=Bi.matchesCurrentFilteredState(this.onlySitesWithAdminAccess,this.sitesToExclude?this.sitesToExclude:[],this.onlySitesWithAtLeastWriteAccess,this.siteTypesToExclude?this.siteTypesToExclude:[])&&Bi.initialSitesFiltered.value&&Bi.initialSitesFiltered.value.length?Bi.initialSitesFiltered.value:Bi.initialSites.value;return e&&e.length>1},firstSiteName(){const e=Bi.initialSitesFiltered.value&&Bi.initialSitesFiltered.value.length?Bi.initialSitesFiltered.value:Bi.initialSites.value;return e&&e.length>0?e[0].name:""},urlAllSites(){const e=_.stringify(Object.assign(Object.assign({},_.urlParsed.value),{},{module:"MultiSites",action:"index",date:_.parsed.value.date,period:_.parsed.value.period}));return"?"+e},shouldDefaultToFirstSite(){var e;return!(null!==(e=this.modelValue)&&void 0!==e&&e.id)&&(!this.hasMultipleSites||this.defaultToFirstSite)&&this.sites[0]},displayedModelValue(){return this.modelValue?this.modelValue:x.idSite?{id:x.idSite,name:x.helper.htmlDecode(x.siteName)}:this.shouldDefaultToFirstSite?{id:this.sites[0].idsite,name:this.sites[0].name}:null},tooltipContent(){return function(){const e=$(this).attr("title")||"";return x.helper.htmlEntities(e)}}},methods:{onSearchTermChanged(){this.searchTerm?(this.isLoading=!0,this.searchSite(this.searchTerm)):(this.isLoading=!1,this.loadInitialSites())},onAllSitesClick(e){this.switchSite({id:"all",name:this.$props.allSitesText},e),this.showSitesList=!1},switchSite(e,t){const o=-1!==navigator.userAgent.indexOf("Mac OS X")?t.metaKey:t.ctrlKey;t&&o&&t.target&&t.target.href?window.open(t.target.href,"_blank"):(this.$emit("update:modelValue",{id:e.id,name:e.name}),this.switchSiteOnSelect&&this.activeSiteId!==e.id&&Bi.loadSite(e.id))},onBlur(){this.showSitesList=!1,this.$emit("blur")},onClickSelector(){this.hasMultipleSites&&(this.showSitesList=!this.showSitesList,this.isLoading||this.searchTerm||this.loadInitialSites())},onPressEnter(e){"Enter"===e.key&&(e.preventDefault(),this.showSitesList=!this.showSitesList,this.showSitesList&&!this.isLoading&&this.loadInitialSites())},getMatchedSiteName(e){const t=e.toUpperCase().indexOf(this.searchTerm.toUpperCase());if(-1===t||this.isLoading)return this.htmlEntities(e);const o=this.htmlEntities(e.substring(0,t)),i=this.htmlEntities(e.substring(t+this.searchTerm.length));return`${o}<span class="autocompleteMatched">${this.searchTerm}</span>${i}`},loadInitialSites(){return Bi.loadInitialSites(this.onlySitesWithAdminAccess,this.sitesToExclude?this.sitesToExclude:[],this.onlySitesWithAtLeastWriteAccess,this.siteTypesToExclude?this.siteTypesToExclude:[]).then(e=>{this.sites=e||[]})},searchSite(e){this.isLoading=!0,Bi.searchSite(e,this.onlySitesWithAdminAccess,this.sitesToExclude?this.sitesToExclude:[],this.onlySitesWithAtLeastWriteAccess,this.siteTypesToExclude?this.siteTypesToExclude:[]).then(t=>{e===this.searchTerm&&t&&(this.sites=t)}).finally(()=>{this.isLoading=!1})},getUrlForSiteId(e){const t=_.stringify(Object.assign(Object.assign({},_.urlParsed.value),{},{segment:"",idSite:e})),o=_.stringify(Object.assign(Object.assign({},_.hashParsed.value),{},{segment:"",idSite:e}));return`?${t}#?${o}`},htmlEntities(e){return x.helper.htmlEntities(e)}}});Zi.render=Yi;var en=Zi;const tn={ref:"root",class:"quickAccessInside"},on=["title","placeholder"],nn={class:"dropdown"},an={class:"no-result"},rn=["onClick"],sn=["onMouseenter","onClick"],ln={class:"quickAccessMatomoSearch"},cn=["onMouseenter","onClick"],dn=["textContent"],un={class:"quick-access-category helpCategory"},mn=["href"];function pn(e,t,o,i,n,a){const r=Object(E["resolveDirective"])("focus-if"),s=Object(E["resolveDirective"])("focus-anywhere-but-here");return Object(E["withDirectives"])((Object(E["openBlock"])(),Object(E["createElementBlock"])("div",tn,[Object(E["createElementVNode"])("span",{class:"icon-search",onMouseenter:t[0]||(t[0]=t=>e.searchActive=!0)},null,32),Object(E["withDirectives"])(Object(E["createElementVNode"])("input",{class:"s",onKeydown:t[1]||(t[1]=t=>e.onKeypress(t)),onFocus:t[2]||(t[2]=t=>e.searchActive=!0),"onUpdate:modelValue":t[3]||(t[3]=t=>e.searchTerm=t),type:"text",tabindex:"2",title:e.quickAccessTitle,placeholder:e.translate("General_Search"),ref:"input"},null,40,on),[[E["vModelText"],e.searchTerm],[r,{focused:e.searchActive}]]),Object(E["withDirectives"])(Object(E["createElementVNode"])("div",nn,[Object(E["withDirectives"])(Object(E["createElementVNode"])("ul",null,[Object(E["createElementVNode"])("li",an,Object(E["toDisplayString"])(e.translate("General_SearchNoResults")),1)],512),[[E["vShow"],!(e.numMenuItems>0||e.sites.length)]]),(Object(E["openBlock"])(!0),Object(E["createElementBlock"])(E["Fragment"],null,Object(E["renderList"])(e.menuItems,t=>(Object(E["openBlock"])(),Object(E["createElementBlock"])("ul",{key:t.title},[Object(E["createElementVNode"])("li",{class:"quick-access-category",onClick:o=>{e.searchTerm=t.title,e.searchMenu(e.searchTerm)}},Object(E["toDisplayString"])(t.title),9,rn),(Object(E["openBlock"])(!0),Object(E["createElementBlock"])(E["Fragment"],null,Object(E["renderList"])(t.items,t=>(Object(E["openBlock"])(),Object(E["createElementBlock"])("li",{class:Object(E["normalizeClass"])(["result",{selected:t.menuIndex===e.searchIndex}]),onMouseenter:o=>e.searchIndex=t.menuIndex,onClick:o=>e.selectMenuItem(t.index),key:t.index},[Object(E["createElementVNode"])("a",null,Object(E["toDisplayString"])(t.name.trim()),1)],42,sn))),128))]))),128)),Object(E["createElementVNode"])("ul",ln,[Object(E["withDirectives"])(Object(E["createElementVNode"])("li",{class:"quick-access-category websiteCategory"},Object(E["toDisplayString"])(e.translate("SitesManager_Sites")),513),[[E["vShow"],e.hasSitesSelector&&e.sites.length||e.isLoading]]),Object(E["withDirectives"])(Object(E["createElementVNode"])("li",{class:"no-result"},Object(E["toDisplayString"])(e.translate("MultiSites_LoadingWebsites")),513),[[E["vShow"],e.hasSitesSelector&&e.isLoading]]),(Object(E["openBlock"])(!0),Object(E["createElementBlock"])(E["Fragment"],null,Object(E["renderList"])(e.sites,(t,o)=>Object(E["withDirectives"])((Object(E["openBlock"])(),Object(E["createElementBlock"])("li",{class:Object(E["normalizeClass"])(["result",{selected:e.numMenuItems+o===e.searchIndex}]),onMouseenter:t=>e.searchIndex=e.numMenuItems+o,onClick:o=>e.selectSite(t.idsite),key:t.idsite},[Object(E["createElementVNode"])("a",{textContent:Object(E["toDisplayString"])(t.name)},null,8,dn)],42,cn)),[[E["vShow"],e.hasSitesSelector&&!e.isLoading]])),128))]),Object(E["createElementVNode"])("ul",null,[Object(E["createElementVNode"])("li",un,Object(E["toDisplayString"])(e.translate("General_HelpResources")),1),Object(E["createElementVNode"])("li",{class:Object(E["normalizeClass"])([{selected:"help"===e.searchIndex},"quick-access-help"]),onMouseenter:t[4]||(t[4]=t=>e.searchIndex="help")},[Object(E["createElementVNode"])("a",{href:"https://matomo.org?mtm_campaign=App_Help&mtm_source=Matomo_App&mtm_keyword=QuickSearch&s="+encodeURIComponent(e.searchTerm),target:"_blank"},Object(E["toDisplayString"])(e.translate("CoreHome_SearchOnMatomo",e.searchTerm)),9,mn)],34)])],512),[[E["vShow"],e.searchTerm&&e.searchActive]])])),[[s,{blur:e.onBlur}]])}const{ListingFormatter:hn}=window;function gn(e){const t=e.getBoundingClientRect(),o=window.$(window);return t.top>=0&&t.left>=0&&t.bottom<=o.height()&&t.right<=o.width()}function bn(e){e&&e.scrollIntoView&&e.scrollIntoView()}var fn=Object(E["defineComponent"])({directives:{FocusAnywhereButHere:Ge,FocusIf:Je},watch:{searchActive(e){const t=this.$refs.root;if(!t||!t.parentElement)return;const o=t.parentElement.classList;o.toggle("active",e),o.toggle("expanded",e)}},mounted(){const e=this.$refs.root;e&&e.parentElement&&e.parentElement.classList.add("quick-access","piwikSelector"),"undefined"!==typeof window.initTopControls&&window.initTopControls&&window.initTopControls(),x.helper.registerShortcut("f",a("CoreHome_ShortcutSearch"),e=>{e.altKey||(e.preventDefault(),bn(this.$refs.root),this.activateSearch())})},data(){const e=!!document.querySelector(".segmentEditorPanel");return{menuItems:[],numMenuItems:0,searchActive:!1,searchTerm:"",searchIndex:0,menuIndexCounter:-1,topMenuItems:null,leftMenuItems:null,segmentItems:null,hasSegmentSelector:e,sites:[],isLoading:!1}},created(){this.searchMenu=je(this.searchMenu.bind(this))},computed:{hasSitesSelector(){return!!document.querySelector('.top_controls .siteSelector,.top_controls [vue-entry="CoreHome.SiteSelector"]')},quickAccessTitle(){const e=[a("CoreHome_MenuEntries")];return this.hasSegmentSelector&&e.push(a("CoreHome_Segments")),this.hasSitesSelector&&e.push(a("SitesManager_Sites")),a("CoreHome_QuickAccessTitle",hn.formatAnd(e))}},emits:["itemSelected","blur"],methods:{onKeypress(e){const t=this.searchTerm&&this.searchActive,o=9===e.which,i=27===e.which;38===e.which?(this.highlightPreviousItem(),e.preventDefault()):40===e.which?(this.highlightNextItem(),e.preventDefault()):13===e.which?this.clickQuickAccessMenuItem():o&&t||i&&t?this.deactivateSearch():setTimeout(()=>{this.searchActive=!0,this.searchMenu(this.searchTerm)})},highlightPreviousItem(){this.searchIndex-1<0?this.searchIndex=0:this.searchIndex-=1,this.makeSureSelectedItemIsInViewport()},highlightNextItem(){const e=this.$refs.root.querySelectorAll("li.result").length;e<=this.searchIndex+1?this.searchIndex=e-1:this.searchIndex+=1,this.makeSureSelectedItemIsInViewport()},clickQuickAccessMenuItem(){const e=this.getCurrentlySelectedElement();e&&setTimeout(()=>{e.click(),this.$emit("itemSelected",e)},20)},deactivateSearch(){this.searchTerm="",this.searchActive=!1,this.$refs.input&&this.$refs.input.blur()},makeSureSelectedItemIsInViewport(){const e=this.getCurrentlySelectedElement();e&&!gn(e)&&bn(e)},getCurrentlySelectedElement(){const e=this.$refs.root.querySelectorAll("li.result");if(e&&e.length&&e.item(this.searchIndex))return e.item(this.searchIndex)},searchMenu(e){const t=e.toLowerCase();let o=-1;const i={},n=[],a=e=>{const t=Object.assign({},e);o+=1,t.menuIndex=o;const{category:a}=t;a in i||(n.push({title:a,items:[]}),i[a]=n.length-1);const r=i[a];n[r].items.push(t)};this.resetSearchIndex(),this.hasSitesSelector&&(this.isLoading=!0,Bi.searchSite(t).then(e=>{e&&(this.sites=e)}).finally(()=>{this.isLoading=!1}));const r=e=>-1!==e.name.toLowerCase().indexOf(t)||-1!==e.category.toLowerCase().indexOf(t);null===this.topMenuItems&&(this.topMenuItems=this.getTopMenuItems()),null===this.leftMenuItems&&(this.leftMenuItems=this.getLeftMenuItems()),null===this.segmentItems&&(this.segmentItems=this.getSegmentItems());const s=this.topMenuItems.filter(r),l=this.leftMenuItems.filter(r),c=this.segmentItems.filter(r);s.forEach(a),l.forEach(a),c.forEach(a),this.numMenuItems=s.length+l.length+c.length,this.menuItems=n},resetSearchIndex(){this.searchIndex=0,this.makeSureSelectedItemIsInViewport()},selectSite(e){Bi.loadSite(e)},selectMenuItem(e){const t=document.querySelector(`[quick_access='${e}']`);if(t){this.deactivateSearch();const e=t.getAttribute("href");if(e&&e.length>10&&t&&t.click)try{t.click()}catch(o){window.$(t).click()}else window.$(t).click()}},onBlur(){this.searchActive=!1,this.$emit("blur")},activateSearch(){this.searchActive=!0},getTopMenuItems(){const e=a("CoreHome_Menu"),t=[];return document.querySelectorAll("nav .sidenav li > a, nav .sidenav li > div > a").forEach(o=>{var i;let n=null===(i=o.textContent)||void 0===i?void 0:i.trim();var a;(!n||null!=o.parentElement&&null!=o.parentElement.tagName&&"DIV"===o.parentElement.tagName)&&(n=null===(a=o.getAttribute("title"))||void 0===a?void 0:a.trim());n&&(t.push({name:n,index:this.menuIndexCounter+=1,category:e}),o.setAttribute("quick_access",""+this.menuIndexCounter))}),t},getLeftMenuItems(){const e=[];return document.querySelectorAll("#secondNavBar .menuTab").forEach(t=>{var o;const i=window.$(t).find("> .item");let n=(null===(o=i[0])||void 0===o?void 0:o.innerText.trim())||"";n&&-1!==n.lastIndexOf("\n")&&(n=n.slice(0,n.lastIndexOf("\n")).trim()),window.$(t).find("li .item").each((t,o)=>{var i;const a=null===(i=o.textContent)||void 0===i?void 0:i.trim();a&&(e.push({name:a,category:n,index:this.menuIndexCounter+=1}),o.setAttribute("quick_access",""+this.menuIndexCounter))})}),e},getSegmentItems(){if(!this.hasSegmentSelector)return[];const e=a("CoreHome_Segments"),t=[];return document.querySelectorAll(".segmentList [data-idsegment]").forEach(o=>{var i;const n=null===(i=o.querySelector(".segname"))||void 0===i||null===(i=i.textContent)||void 0===i?void 0:i.trim();n&&(t.push({name:n,category:e,index:this.menuIndexCounter+=1}),o.setAttribute("quick_access",""+this.menuIndexCounter))}),t}}});fn.render=pn;var vn=fn;const On={class:"fieldArray form-group"},jn={key:0,class:"fieldUiControl"},yn=["onClick","title"];function wn(e,t,o,i,n,a){const r=Object(E["resolveComponent"])("Field");return Object(E["openBlock"])(),Object(E["createElementBlock"])("div",On,[(Object(E["openBlock"])(!0),Object(E["createElementBlock"])(E["Fragment"],null,Object(E["renderList"])(e.modelValue,(t,o)=>(Object(E["openBlock"])(),Object(E["createElementBlock"])("div",{class:Object(E["normalizeClass"])(["fieldArrayTable multiple valign-wrapper",{["fieldArrayTable"+o]:!0}]),key:o},[e.field.uiControl?(Object(E["openBlock"])(),Object(E["createElementBlock"])("div",jn,[Object(E["createVNode"])(r,{"full-width":!0,"model-value":t,options:e.field.availableValues,"onUpdate:modelValue":t=>e.onEntryChange(t,o),"model-modifiers":e.field.modelModifiers,placeholder:" ",uicontrol:e.field.uiControl,title:e.field.title,name:`${e.name}-${o}`,id:`${e.id}-${o}`,"template-file":e.field.templateFile,component:e.field.component},null,8,["model-value","options","onUpdate:modelValue","model-modifiers","uicontrol","title","name","id","template-file","component"])])):Object(E["createCommentVNode"])("",!0),Object(E["withDirectives"])(Object(E["createElementVNode"])("span",{onClick:t=>e.removeEntry(o),class:"icon-minus valign",title:e.translate("General_Remove")},null,8,yn),[[E["vShow"],o+1!==e.modelValue.length]])],2))),128))])}const kn=be("CorePluginsAdmin","Field");var Sn=Object(E["defineComponent"])({props:{modelValue:Array,name:String,id:String,field:Object,rows:String},components:{Field:kn},emits:["update:modelValue"],watch:{modelValue(e){this.checkEmptyModelValue(e)}},mounted(){this.checkEmptyModelValue(this.modelValue)},methods:{checkEmptyModelValue(e){e&&e.length&&""===e.slice(-1)[0]||this.rows&&!((this.modelValue||[]).length<parseInt(this.rows,10))||this.$emit("update:modelValue",[...e||[],""])},onEntryChange(e,t){const o=[...this.modelValue||[]];o[t]=e,this.$emit("update:modelValue",o)},removeEntry(e){if(e>-1&&this.modelValue){const t=this.modelValue.filter((t,o)=>o!==e);this.$emit("update:modelValue",t)}}}});Sn.render=wn;var Cn=Sn;const En={class:"multiPairField form-group"},Dn={key:1,class:"fieldUiControl fieldUiControl2"},Pn={key:2,class:"fieldUiControl fieldUiControl3"},Tn={key:3,class:"fieldUiControl fieldUiControl4"},Vn=["onClick","title"];function Nn(e,t,o,i,n,a){const r=Object(E["resolveComponent"])("Field");return Object(E["openBlock"])(),Object(E["createElementBlock"])("div",En,[(Object(E["openBlock"])(!0),Object(E["createElementBlock"])(E["Fragment"],null,Object(E["renderList"])(e.modelValue,(t,o)=>(Object(E["openBlock"])(),Object(E["createElementBlock"])("div",{class:Object(E["normalizeClass"])(["multiPairFieldTable multiple valign-wrapper",{["multiPairFieldTable"+o]:!0,[`has${e.fieldCount}Fields`]:!0}]),key:o},[e.field1?(Object(E["openBlock"])(),Object(E["createElementBlock"])("div",{key:0,class:Object(E["normalizeClass"])(["fieldUiControl fieldUiControl1",{hasMultiFields:e.field1.type&&e.field2.type}])},[Object(E["createVNode"])(r,{"full-width":!0,"model-value":t[e.field1.key],options:e.field1.availableValues,"onUpdate:modelValue":t=>e.onEntryChange(o,e.field1.key,t),"model-modifiers":e.field1.modelModifiers,placeholder:" ",uicontrol:e.field1.uiControl,name:`${e.name}-p1-${o}`,id:`${e.id}-p1-${o}`,title:e.field1.title,"template-file":e.field1.templateFile,component:e.field1.component},null,8,["model-value","options","onUpdate:modelValue","model-modifiers","uicontrol","name","id","title","template-file","component"])],2)):Object(E["createCommentVNode"])("",!0),e.field2?(Object(E["openBlock"])(),Object(E["createElementBlock"])("div",Dn,[Object(E["createVNode"])(r,{"full-width":!0,options:e.field2.availableValues,"onUpdate:modelValue":t=>e.onEntryChange(o,e.field2.key,t),"model-value":t[e.field2.key],"model-modifiers":e.field2.modelModifiers,placeholder:" ",uicontrol:e.field2.uiControl,name:`${e.name}-p2-${o}`,id:`${e.id}-p2-${o}`,title:e.field2.title,"template-file":e.field2.templateFile,component:e.field2.component},null,8,["options","onUpdate:modelValue","model-value","model-modifiers","uicontrol","name","id","title","template-file","component"])])):Object(E["createCommentVNode"])("",!0),e.field3?(Object(E["openBlock"])(),Object(E["createElementBlock"])("div",Pn,[Object(E["createVNode"])(r,{"full-width":!0,options:e.field3.availableValues,"onUpdate:modelValue":t=>e.onEntryChange(o,e.field3.key,t),"model-value":t[e.field3.key],"model-modifiers":e.field3.modelModifiers,placeholder:" ",uicontrol:e.field3.uiControl,name:`${e.name}-p3-${o}`,id:`${e.id}-p3-${o}`,title:e.field3.title,"template-file":e.field3.templateFile,component:e.field3.component},null,8,["options","onUpdate:modelValue","model-value","model-modifiers","uicontrol","name","id","title","template-file","component"])])):Object(E["createCommentVNode"])("",!0),e.field4?(Object(E["openBlock"])(),Object(E["createElementBlock"])("div",Tn,[Object(E["createVNode"])(r,{"full-width":!0,options:e.field4.availableValues,"onUpdate:modelValue":t=>e.onEntryChange(o,e.field4.key,t),"model-value":t[e.field4.key],"model-modifiers":e.field4.modelModifiers,placeholder:" ",uicontrol:e.field4.uiControl,name:`${e.name}-p4-${o}`,id:`${e.id}-p4-${o}`,title:e.field4.title,"template-file":e.field4.templateFile,component:e.field4.component},null,8,["options","onUpdate:modelValue","model-value","model-modifiers","uicontrol","name","id","title","template-file","component"])])):Object(E["createCommentVNode"])("",!0),Object(E["withDirectives"])(Object(E["createElementVNode"])("span",{onClick:t=>e.removeEntry(o),class:"icon-minus valign",title:e.translate("General_Remove")},null,8,Vn),[[E["vShow"],o+1!==e.modelValue.length]])],2))),128))])}const xn=be("CorePluginsAdmin","Field");var Bn=Object(E["defineComponent"])({props:{modelValue:Array,name:String,id:String,field1:Object,field2:Object,field3:Object,field4:Object,rows:Number},components:{Field:xn},computed:{fieldCount(){return this.field1&&this.field2&&this.field3&&this.field4?4:this.field1&&this.field2&&this.field3?3:this.field1&&this.field2?2:this.field1?1:0}},emits:["update:modelValue"],watch:{modelValue(e){this.checkEmptyModelValue(e)}},mounted(){this.checkEmptyModelValue(this.modelValue)},methods:{checkEmptyModelValue(e){e&&e.length&&!this.isEmptyValue(e.slice(-1)[0])||this.rows&&!(this.modelValue.length<this.rows)||this.$emit("update:modelValue",[...e||[],this.makeEmptyValue()])},onEntryChange(e,t,o){const i=[...this.modelValue];i[e]=Object.assign(Object.assign({},i[e]),{},{[t]:o}),this.$emit("update:modelValue",i)},removeEntry(e){if(e>-1&&this.modelValue){const t=this.modelValue.filter((t,o)=>o!==e);this.$emit("update:modelValue",t)}},isEmptyValue(e){const{fieldCount:t}=this;if(4===t){if(!e[this.field1.key]&&!e[this.field2.key]&&!e[this.field3.key]&&!e[this.field4.key])return!1}else if(3===t){if(!e[this.field1.key]&&!e[this.field2.key]&&!e[this.field3.key])return!1}else if(2===t){if(!e[this.field1.key]&&!e[this.field2.key])return!1}else if(1===t&&!e[this.field1.key])return!1;return!0},makeEmptyValue(){const e={};return this.field1&&this.field1.key&&(e[this.field1.key]=""),this.field2&&this.field2.key&&(e[this.field2.key]=""),this.field3&&this.field3.key&&(e[this.field3.key]=""),this.field4&&this.field4.key&&(e[this.field4.key]=""),e}}});Bn.render=Nn;var In=Bn;const Mn=["disabled"],Ln=Object(E["createElementVNode"])("span",{class:"icon-chevron-left"},null,-1),Fn=[Ln],An=["title"],_n=Object(E["createElementVNode"])("span",{class:"icon icon-calendar"},null,-1),Rn={id:"periodMore",class:"dropdown"},Hn={class:"flex"},$n={key:0,class:"period-date"},Un={class:"period-type"},qn={id:"otherPeriods"},Wn=["onDblclick","title"],zn=["id","checked","onChange","onDblclick"],Gn={key:0,class:"compare-checkbox"},Yn={id:"comparePeriodToDropdown"},Jn={key:1,class:"compare-date-range"},Kn={id:"comparePeriodStartDate"},Qn=Object(E["createElementVNode"])("span",{class:"compare-dates-separator"},null,-1),Xn={id:"comparePeriodEndDate"},Zn={class:"apply-button-container"},ea=["disabled","value"],ta={key:2,id:"ajaxLoadingCalendar"},oa={class:"loadingSegment"},ia=["disabled"],na=Object(E["createElementVNode"])("span",{class:"icon-chevron-right"},null,-1),aa=[na];function ra(e,t,o,i,n,a){const r=Object(E["resolveComponent"])("DateRangePicker"),s=Object(E["resolveComponent"])("PeriodDatePicker"),l=Object(E["resolveComponent"])("Field"),c=Object(E["resolveComponent"])("ActivityIndicator"),d=Object(E["resolveDirective"])("tooltips"),u=Object(E["resolveDirective"])("expand-on-click");return Object(E["withDirectives"])((Object(E["openBlock"])(),Object(E["createElementBlock"])("div",{ref:"root",class:Object(E["normalizeClass"])(["periodSelector piwikSelector",{"periodSelector-withPrevNext":e.canShowMovePeriod}])},[e.canShowMovePeriod?(Object(E["openBlock"])(),Object(E["createElementBlock"])("button",{key:0,class:"move-period move-period-prev",onClick:t[0]||(t[0]=t=>e.movePeriod(-1)),disabled:e.isPeriodMoveDisabled(-1)},Fn,8,Mn)):Object(E["createCommentVNode"])("",!0),Object(E["withDirectives"])((Object(E["openBlock"])(),Object(E["createElementBlock"])("a",{ref:"title",id:"date",class:"title",tabindex:"-1",title:e.translate("General_ChooseDate",e.currentlyViewingText)},[_n,Object(E["createTextVNode"])(" "+Object(E["toDisplayString"])(e.currentlyViewingText),1)],8,An)),[[d]]),Object(E["createElementVNode"])("div",Rn,[Object(E["createElementVNode"])("div",Hn,[Object(E["createElementVNode"])("div",null,[Object(E["withDirectives"])(Object(E["createVNode"])(r,{class:"period-range","start-date":e.startRangeDate,"end-date":e.endRangeDate,onRangeChange:t[1]||(t[1]=t=>e.onRangeChange(t.start,t.end)),onSubmit:t[2]||(t[2]=t=>e.onApplyClicked())},null,8,["start-date","end-date"]),[[E["vShow"],"range"===e.selectedPeriod]]),"range"!==e.selectedPeriod?(Object(E["openBlock"])(),Object(E["createElementBlock"])("div",$n,[Object(E["createVNode"])(s,{id:"datepicker",period:e.selectedPeriod,date:e.periodValue===e.selectedPeriod?e.dateValue:null,onSelect:t[3]||(t[3]=t=>e.setPiwikPeriodAndDate(e.selectedPeriod,t.date))},null,8,["period","date"])])):Object(E["createCommentVNode"])("",!0)]),Object(E["createElementVNode"])("div",Un,[Object(E["createElementVNode"])("h6",null,Object(E["toDisplayString"])(e.translate("General_Period")),1),Object(E["createElementVNode"])("div",qn,[(Object(E["openBlock"])(!0),Object(E["createElementBlock"])(E["Fragment"],null,Object(E["renderList"])(e.periodsFiltered,o=>(Object(E["openBlock"])(),Object(E["createElementBlock"])("p",{key:o},[Object(E["createElementVNode"])("label",{class:Object(E["normalizeClass"])({"selected-period-label":o===e.selectedPeriod}),onDblclick:t=>e.changeViewedPeriod(o),title:o===e.periodValue?"":e.translate("General_DoubleClickToChangePeriod")},[Object(E["withDirectives"])(Object(E["createElementVNode"])("input",{type:"radio",name:"period",id:"period_id_"+o,"onUpdate:modelValue":t[4]||(t[4]=t=>e.selectedPeriod=t),checked:e.selectedPeriod===o,onChange:t=>e.selectedPeriod=o,onDblclick:t=>e.changeViewedPeriod(o)},null,40,zn),[[E["vModelRadio"],e.selectedPeriod]]),Object(E["createElementVNode"])("span",null,Object(E["toDisplayString"])(e.getPeriodDisplayText(o)),1)],42,Wn)]))),128))])])]),e.isComparisonEnabled?(Object(E["openBlock"])(),Object(E["createElementBlock"])("div",Gn,[Object(E["createElementVNode"])("label",null,[Object(E["withDirectives"])(Object(E["createElementVNode"])("input",{id:"comparePeriodTo",type:"checkbox","onUpdate:modelValue":t[5]||(t[5]=t=>e.isComparing=t)},null,512),[[E["vModelCheckbox"],e.isComparing]]),Object(E["createElementVNode"])("span",null,Object(E["toDisplayString"])(e.translate("General_CompareTo")),1)]),Object(E["createElementVNode"])("div",Yn,[Object(E["createVNode"])(l,{modelValue:e.comparePeriodType,"onUpdate:modelValue":t[6]||(t[6]=t=>e.comparePeriodType=t),style:Object(E["normalizeStyle"])({visibility:e.isComparing?"visible":"hidden"}),name:"comparePeriodToDropdown",uicontrol:"select",options:e.comparePeriodDropdownOptions,"full-width":!0,disabled:!e.isComparing},null,8,["modelValue","style","options","disabled"])])])):Object(E["createCommentVNode"])("",!0),e.isComparing&&"custom"===e.comparePeriodType?(Object(E["openBlock"])(),Object(E["createElementBlock"])("div",Jn,[Object(E["createElementVNode"])("div",null,[Object(E["createElementVNode"])("div",Kn,[Object(E["createElementVNode"])("div",null,[Object(E["createVNode"])(l,{modelValue:e.compareStartDate,"onUpdate:modelValue":t[7]||(t[7]=t=>e.compareStartDate=t),name:"comparePeriodStartDate",uicontrol:"text","full-width":!0,title:e.translate("CoreHome_StartDate"),placeholder:"YYYY-MM-DD"},null,8,["modelValue","title"])])]),Qn,Object(E["createElementVNode"])("div",Xn,[Object(E["createElementVNode"])("div",null,[Object(E["createVNode"])(l,{modelValue:e.compareEndDate,"onUpdate:modelValue":t[8]||(t[8]=t=>e.compareEndDate=t),name:"comparePeriodEndDate",uicontrol:"text","full-width":!0,title:e.translate("CoreHome_EndDate"),placeholder:"YYYY-MM-DD"},null,8,["modelValue","title"])])])])])):Object(E["createCommentVNode"])("",!0),Object(E["createElementVNode"])("div",Zn,[Object(E["createElementVNode"])("input",{type:"submit",id:"calendarApply",class:"btn",onClick:t[9]||(t[9]=t=>e.onApplyClicked()),disabled:!e.isApplyEnabled(),value:e.translate("General_Apply")},null,8,ea)]),e.isLoadingNewPage?(Object(E["openBlock"])(),Object(E["createElementBlock"])("div",ta,[Object(E["createVNode"])(c,{loading:!0}),Object(E["createElementVNode"])("div",oa,Object(E["toDisplayString"])(e.translate("SegmentEditor_LoadingSegmentedDataMayTakeSomeTime")),1)])):Object(E["createCommentVNode"])("",!0)]),e.canShowMovePeriod?(Object(E["openBlock"])(),Object(E["createElementBlock"])("button",{key:1,class:"move-period move-period-next",onClick:t[10]||(t[10]=t=>e.movePeriod(1)),disabled:e.isPeriodMoveDisabled(1)},aa,8,ia)):Object(E["createCommentVNode"])("",!0)],2)),[[u,{expander:"title"}]])}const sa=be("CorePluginsAdmin","Field"),la=x.helper.htmlDecode("&nbsp;"),ca=["custom","previousPeriod","previousYear"],da=[{key:"custom",value:a("General_Custom")},{key:"previousPeriod",value:a("General_PreviousPeriod").replace(/\s+/,la)},{key:"previousYear",value:a("General_PreviousYear").replace(/\s+/,la)}],ua=new Date(x.minDateYear,x.minDateMonth-1,x.minDateDay),ma=new Date(x.maxDateYear,x.maxDateMonth-1,x.maxDateDay);function pa(e){return"[object Date]"===Object.prototype.toString.call(e)&&!Number.isNaN(e.getTime())}var ha=Object(E["defineComponent"])({props:{periods:Array},components:{DateRangePicker:Zo,PeriodDatePicker:ni,Field:sa,ActivityIndicator:Fe},directives:{ExpandOnClick:ut,Tooltips:Ze},data(){const e=_.parsed.value.period;return{comparePeriodDropdownOptions:da,periodValue:e,dateValue:null,selectedPeriod:e,startRangeDate:null,endRangeDate:null,isRangeValid:null,isLoadingNewPage:!1,isComparing:null,comparePeriodType:"previousPeriod",compareStartDate:"",compareEndDate:""}},mounted(){x.on("hidePeriodSelector",()=>{window.$(this.$refs.root).parent("#periodString").hide()}),x.on("matomoPageChange",()=>{window.$(this.$refs.root).parent("#periodString").show()}),this.isComparing=Co.isComparingPeriods(),Object(E["watch"])(()=>Co.isComparingPeriods(),e=>{this.isComparing=e}),this.updateSelectedValuesFromHash(),Object(E["watch"])(()=>_.parsed.value,this.updateSelectedValuesFromHash),this.updateComparisonValuesFromStore(),Object(E["watch"])(()=>Co.getPeriodComparisons(),this.updateComparisonValuesFromStore),window.initTopControls(),this.handleZIndexPositionRelativeCompareDropdownIssue()},computed:{currentlyViewingText(){let e;if("range"===this.periodValue){if(!this.startRangeDate||!this.endRangeDate)return a("General_Error");e=`${this.startRangeDate},${this.endRangeDate}`}else{if(!this.dateValue)return a("General_Error");e=d(this.dateValue)}try{return c.parse(this.periodValue,e).getPrettyString()}catch(t){return a("General_Error")}},isComparisonEnabled(){return Co.isComparisonEnabled()},periodsFiltered(){return(this.periods||[]).filter(e=>c.isRecognizedPeriod(e))},selectedComparisonParams(){if(!this.isComparing)return{};if("custom"===this.comparePeriodType)return{comparePeriods:["range"],comparePeriodType:"custom",compareDates:[`${this.compareStartDate},${this.compareEndDate}`]};if("previousPeriod"===this.comparePeriodType)return{comparePeriods:[this.selectedPeriod],comparePeriodType:"previousPeriod",compareDates:[this.previousPeriodDateToSelectedPeriod]};if("previousYear"===this.comparePeriodType){const e="range"===this.selectedPeriod?`${this.startRangeDate},${this.endRangeDate}`:d(this.dateValue),t=c.parse(this.selectedPeriod,e).getDateRange();return t[0].setFullYear(t[0].getFullYear()-1),t[1].setFullYear(t[1].getFullYear()-1),"range"===this.selectedPeriod?{comparePeriods:["range"],comparePeriodType:"previousYear",compareDates:[`${d(t[0])},${d(t[1])}`]}:{comparePeriods:[this.selectedPeriod],comparePeriodType:"previousYear",compareDates:[d(t[0])]}}return console.warn("Unknown compare period type: "+this.comparePeriodType),{}},previousPeriodDateToSelectedPeriod(){if("range"===this.selectedPeriod){const e=m(this.startRangeDate),t=m(this.endRangeDate),o=C.getLastNRange("day",2,e).startDate,i=Math.floor((t.valueOf()-e.valueOf())/864e5),n=C.getLastNRange("day",1+i,o);return`${d(n.startDate)},${d(n.endDate)}`}const e=C.getLastNRange(this.selectedPeriod,2,this.dateValue).startDate;return d(e)},selectedDateString(){if("range"===this.selectedPeriod){const e=this.startRangeDate,t=this.endRangeDate,o=m(e),i=m(t);return!pa(o)||!pa(i)||o>i?(window.$("#alert").find("h2").text(a("General_InvalidDateRange")),x.helper.modalConfirm("#alert",{}),null):`${e},${t}`}return d(this.dateValue)},isErrorDisplayed(){return this.currentlyViewingText===a("General_Error")},isRangeSelection(){return"range"===this.periodValue},canShowMovePeriod(){return!this.isRangeSelection&&!this.isErrorDisplayed}},methods:{handleZIndexPositionRelativeCompareDropdownIssue(){const e=window.$(this.$refs.root);e.on("focus","#comparePeriodToDropdown .select-dropdown",()=>{e.addClass("compare-dropdown-open")}).on("blur","#comparePeriodToDropdown .select-dropdown",()=>{e.removeClass("compare-dropdown-open")})},changeViewedPeriod(e){e!==this.periodValue&&"range"!==e&&this.setPiwikPeriodAndDate(e,this.dateValue)},setPiwikPeriodAndDate(e,t){this.periodValue=e,this.selectedPeriod=e,this.dateValue=t;const o=d(t);this.setRangeStartEndFromPeriod(e,o),this.propagateNewUrlParams(o,this.selectedPeriod),window.initTopControls()},propagateNewUrlParams(e,t){const o=this.selectedComparisonParams;let i;x.helper.isReportingPage()?(this.closePeriodSelector(),i=_.hashParsed.value):(this.isLoadingNewPage=!0,i=_.parsed.value);const n=Object.assign({},i);delete n.comparePeriods,delete n.comparePeriodType,delete n.compareDates,_.updateLocation(Object.assign(Object.assign({},n),{},{date:e,period:t},o))},onApplyClicked(){if("range"===this.selectedPeriod){const e=this.selectedDateString;if(!e)return;return this.periodValue="range",void this.propagateNewUrlParams(e,"range")}this.setPiwikPeriodAndDate(this.selectedPeriod,this.dateValue)},updateComparisonValuesFromStore(){this.comparePeriodType="previousPeriod",this.compareStartDate="",this.compareEndDate="";const e=Co.getPeriodComparisons();if(e.length<2)return;const t=_.parsed.value.comparePeriodType;if(!ca.includes(t))return;if(this.comparePeriodType=t,"custom"!==this.comparePeriodType||"range"!==e[1].params.period)return;let o;try{o=c.parse(e[1].params.period,e[1].params.date)}catch(a){return}const[i,n]=o.getDateRange();this.compareStartDate=d(i),this.compareEndDate=d(n)},updateSelectedValuesFromHash(){const e=_.parsed.value.date,t=_.parsed.value.period;this.periodValue=t,this.selectedPeriod=t,this.dateValue=null,this.startRangeDate=null,this.endRangeDate=null;try{c.parse(t,e)}catch(o){return}if("range"===t){const o=c.get(t).parse(e),[i,n]=o.getDateRange();this.dateValue=i,this.startRangeDate=d(i),this.endRangeDate=d(n)}else this.dateValue=m(e),this.setRangeStartEndFromPeriod(t,e)},setRangeStartEndFromPeriod(e,t){const o=c.parse(e,t).getDateRange();this.startRangeDate=d(o[0]<ua?ua:o[0]),this.endRangeDate=d(o[1]>ma?ma:o[1])},getPeriodDisplayText(e){return c.get(e).getDisplayText()},onRangeChange(e,t){e&&t?(this.isRangeValid=!0,this.startRangeDate=e,this.endRangeDate=t):this.isRangeValid=!1},isApplyEnabled(){return!("range"===this.selectedPeriod&&!this.isRangeValid)&&!(this.isComparing&&"custom"===this.comparePeriodType&&!this.isCompareRangeValid())},closePeriodSelector(){this.$refs.root.classList.remove("expanded")},isCompareRangeValid(){try{m(this.compareStartDate)}catch(e){return!1}try{m(this.compareEndDate)}catch(e){return!1}return!0},movePeriod(e){if(!this.canMovePeriod(e))return;let t=new Date;switch(null!=this.dateValue&&(t=this.dateValue),this.periodValue){case"day":t.setDate(t.getDate()+e);break;case"week":t.setDate(t.getDate()+7*e);break;case"month":t.setMonth(t.getMonth()+e);break;case"year":t.setFullYear(t.getFullYear()+e);break;default:break}this.dateValue<ua&&(this.dateValue=ua),this.dateValue>ma&&(this.dateValue=ma),this.onApplyClicked()},isPeriodMoveDisabled(e){return null===this.dateValue?this.isRangeSelection:this.isRangeSelection||!this.canMovePeriod(e)},canMovePeriod(e){if(null===this.dateValue)return!1;const t=-1===e?ua:ma;return!g(this.dateValue,t,this.periodValue)}}});ha.render=ra;var ga=ha;const ba={class:"reportingMenu"},fa=["aria-label"],va=["data-category-id"],Oa=["onClick"],ja={class:"hidden"},ya={key:2,role:"menu"},wa=["href","onClick","title"],ka=["href","onClick"],Sa=["onClick"],Ca=Object(E["createElementVNode"])("span",{class:"icon-help"},null,-1),Ea=[Ca],Da={id:"mobile-left-menu",class:"sidenav sidenav--reporting-menu-mobile hide-on-large-only"},Pa=["data-category-id"],Ta={key:1,class:"collapsible collapsible-accordion"},Va={class:"collapsible-header"},Na={class:"collapsible-body"},xa=["onClick","href"],Ba=["onClick","href"];function Ia(e,t,o,i,n,a){const r=Object(E["resolveComponent"])("MenuItemsDropdown"),s=Object(E["resolveDirective"])("side-nav");return Object(E["openBlock"])(),Object(E["createElementBlock"])("div",ba,[Object(E["createElementVNode"])("ul",{class:"navbar hide-on-med-and-down collapsible",role:"menu","aria-label":e.translate("CoreHome_MainNavigation")},[(Object(E["openBlock"])(!0),Object(E["createElementBlock"])(E["Fragment"],null,Object(E["renderList"])(e.menu,t=>(Object(E["openBlock"])(),Object(E["createElementBlock"])("li",{class:Object(E["normalizeClass"])(["menuTab",{active:t.id===e.activeCategory}]),role:"menuitem",key:t.id,"data-category-id":t.id},[t.component?(Object(E["openBlock"])(),Object(E["createBlock"])(Object(E["resolveDynamicComponent"])(t.component),{key:0,onAction:o=>e.loadCategory(t)},null,40,["onAction"])):Object(E["createCommentVNode"])("",!0),t.component?Object(E["createCommentVNode"])("",!0):(Object(E["openBlock"])(),Object(E["createElementBlock"])("a",{key:1,class:"item",tabindex:"5",href:"",onClick:Object(E["withModifiers"])(o=>e.loadCategory(t),["prevent"])},[Object(E["createElementVNode"])("span",{class:Object(E["normalizeClass"])("menu-icon "+(t.icon?t.icon:t.subcategories&&t.id===e.activeCategory?"icon-chevron-down":"icon-chevron-right"))},null,2),Object(E["createTextVNode"])(Object(E["toDisplayString"])(t.name)+" ",1),Object(E["createElementVNode"])("span",ja,Object(E["toDisplayString"])(e.translate("CoreHome_Menu")),1)],8,Oa)),t.component?Object(E["createCommentVNode"])("",!0):(Object(E["openBlock"])(),Object(E["createElementBlock"])("ul",ya,[(Object(E["openBlock"])(!0),Object(E["createElementBlock"])(E["Fragment"],null,Object(E["renderList"])(t.subcategories,o=>(Object(E["openBlock"])(),Object(E["createElementBlock"])("li",{role:"menuitem",class:Object(E["normalizeClass"])({active:(o.id===e.displayedSubcategory||o.isGroup&&e.activeSubsubcategory===e.displayedSubcategory)&&t.id===e.displayedCategory}),key:o.id},[o.isGroup?(Object(E["openBlock"])(),Object(E["createBlock"])(r,{key:0,"show-search":!0,"menu-title":e.htmlEntities(o.name)},{default:Object(E["withCtx"])(()=>[(Object(E["openBlock"])(!0),Object(E["createElementBlock"])(E["Fragment"],null,Object(E["renderList"])(o.subcategories,i=>(Object(E["openBlock"])(),Object(E["createElementBlock"])("a",{class:Object(E["normalizeClass"])(["item",{active:i.id===e.activeSubsubcategory&&o.id===e.displayedSubcategory&&t.id===e.displayedCategory}]),tabindex:"5",href:"#?"+e.makeUrl(t,i),onClick:o=>e.loadSubcategory(t,i,o),title:i.tooltip,key:i.id},Object(E["toDisplayString"])(i.name),11,wa))),128))]),_:2},1032,["menu-title"])):Object(E["createCommentVNode"])("",!0),o.isGroup?Object(E["createCommentVNode"])("",!0):(Object(E["openBlock"])(),Object(E["createElementBlock"])("a",{key:1,href:"#?"+e.makeUrl(t,o),class:"item",onClick:i=>e.loadSubcategory(t,o,i)},Object(E["toDisplayString"])(o.name),9,ka)),o.help?(Object(E["openBlock"])(),Object(E["createElementBlock"])("a",{key:2,class:Object(E["normalizeClass"])(["item-help-icon",{active:e.helpShownCategory&&e.helpShownCategory.subcategory===o.id&&e.helpShownCategory.category===t.id&&o.help}]),tabindex:"5",href:"javascript:",onClick:i=>e.showHelp(t,o,i)},Ea,10,Sa)):Object(E["createCommentVNode"])("",!0)],2))),128))]))],10,va))),128))],8,fa),Object(E["createElementVNode"])("ul",Da,[(Object(E["openBlock"])(!0),Object(E["createElementBlock"])(E["Fragment"],null,Object(E["renderList"])(e.menu,t=>(Object(E["openBlock"])(),Object(E["createElementBlock"])("li",{class:"no-padding",key:t.id,"data-category-id":t.id},[t.component?(Object(E["openBlock"])(),Object(E["createBlock"])(Object(E["resolveDynamicComponent"])(t.component),{key:0,onAction:o=>e.loadCategory(t)},null,40,["onAction"])):Object(E["createCommentVNode"])("",!0),t.component?Object(E["createCommentVNode"])("",!0):Object(E["withDirectives"])((Object(E["openBlock"])(),Object(E["createElementBlock"])("ul",Ta,[Object(E["createElementVNode"])("li",null,[Object(E["createElementVNode"])("a",Va,[Object(E["createElementVNode"])("i",{class:Object(E["normalizeClass"])(t.icon?t.icon:"icon-chevron-down")},null,2),Object(E["createTextVNode"])(Object(E["toDisplayString"])(t.name),1)]),Object(E["createElementVNode"])("div",Na,[Object(E["createElementVNode"])("ul",null,[(Object(E["openBlock"])(!0),Object(E["createElementBlock"])(E["Fragment"],null,Object(E["renderList"])(t.subcategories,o=>(Object(E["openBlock"])(),Object(E["createElementBlock"])("li",{key:o.id},[o.isGroup?(Object(E["openBlock"])(!0),Object(E["createElementBlock"])(E["Fragment"],{key:0},Object(E["renderList"])(o.subcategories,o=>(Object(E["openBlock"])(),Object(E["createElementBlock"])("a",{onClick:i=>e.loadSubcategory(t,o),href:"#?"+e.makeUrl(t,o),key:o.id},Object(E["toDisplayString"])(o.name),9,xa))),128)):Object(E["createCommentVNode"])("",!0),o.isGroup?Object(E["createCommentVNode"])("",!0):(Object(E["openBlock"])(),Object(E["createElementBlock"])("a",{key:1,onClick:i=>e.loadSubcategory(t,o),href:"#?"+e.makeUrl(t,o)},Object(E["toDisplayString"])(o.name),9,Ba))]))),128))])])])])),[[s,{activator:e.sideNavActivator}]])],8,Pa))),128))])])}function Ma(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}
/*!
 * Matomo - free/libre analytics platform
 *
 * @link    https://matomo.org
 * @license https://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */class La{constructor(){Ma(this,"privateState",Object(E["reactive"])({pages:[]})),Ma(this,"state",Object(E["computed"])(()=>Object(E["readonly"])(this.privateState))),Ma(this,"fetchAllPagesPromise",void 0),Ma(this,"pages",Object(E["computed"])(()=>this.state.value.pages))}findPageInCategory(e){return this.pages.value.find(t=>t&&t.category&&t.category.id===e&&t.subcategory&&t.subcategory.id)}findPage(e,t){return this.pages.value.find(o=>o&&o.category&&o.subcategory&&o.category.id===e&&""+o.subcategory.id===t)}reloadAllPages(){return delete this.fetchAllPagesPromise,this.getAllPages()}getAllPages(){return this.fetchAllPagesPromise||(this.fetchAllPagesPromise=W.fetch({method:"API.getReportPagesMetadata",filter_limit:"-1"}).then(e=>(this.privateState.pages=e,this.pages.value))),this.fetchAllPagesPromise.then(()=>this.pages.value)}}var Fa=new La;
/*!
 * Matomo - free/libre analytics platform
 *
 * @link    https://matomo.org
 * @license https://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */function Aa(e){const t=[...e||[]];return t.sort((e,t)=>e.order<t.order?-1:e.order>t.order?1:0),t}
/*!
 * Matomo - free/libre analytics platform
 *
 * @link    https://matomo.org
 * @license https://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */function _a(e){const t=e;return t.subcategories?t.subcategories:[]}
/*!
 * Matomo - free/libre analytics platform
 *
 * @link    https://matomo.org
 * @license https://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */function Ra(e){const t=e;return t.subcategories?t.subcategories:[]}function Ha(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}
/*!
 * Matomo - free/libre analytics platform
 *
 * @link    https://matomo.org
 * @license https://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */function $a(e){const t=parseFloat(e);return!Number.isNaN(t)&&Number.isFinite(t)}class Ua{constructor(){Ha(this,"privateState",Object(E["reactive"])({activeSubcategoryId:null,activeSubsubcategoryId:null})),Ha(this,"state",Object(E["computed"])(()=>Object(E["readonly"])(this.privateState))),Ha(this,"activeCategory",Object(E["computed"])(()=>"undefined"!==typeof this.state.value.activeCategoryId?this.state.value.activeCategoryId:_.parsed.value.category)),Ha(this,"activeSubcategory",Object(E["computed"])(()=>this.state.value.activeSubcategoryId||_.parsed.value.subcategory)),Ha(this,"activeSubsubcategory",Object(E["computed"])(()=>{const e=this.state.value.activeSubsubcategoryId;if(e)return e;const t=this.findSubcategory(this.activeCategory.value,this.activeSubcategory.value);return t.subsubcategory&&t.subsubcategory.id===this.activeSubcategory.value?t.subsubcategory.id:null})),Ha(this,"menu",Object(E["computed"])(()=>this.buildMenuFromPages()))}fetchMenuItems(){return Fa.getAllPages().then(()=>this.menu.value)}reloadMenuItems(){return Fa.reloadAllPages().then(()=>this.menu.value)}findSubcategory(e,t){let o=void 0,i=void 0,n=void 0;return this.menu.value.forEach(a=>{a.id===e&&(_a(a)||[]).forEach(e=>{e.id===t&&(o=a,i=e),e.isGroup&&(Ra(e)||[]).forEach(r=>{r.id===t&&(o=a,i=e,n=r)})})}),{category:o,subcategory:i,subsubcategory:n}}buildMenuFromPages(){const e=[],t=_.parsed.value.category,o=_.parsed.value.subcategory,i=Fa.pages.value,n={};return i.forEach(r=>{const s=Object.assign({},r.category),l=s.id,c=l===t;if(n[l])return;n[l]=!0,s.subcategories=[];let d=null;const u=i.filter(e=>e.category.id===l);u.forEach(e=>{const t=Object.assign({},e.subcategory),i=t.id===o&&c;if(e.widgets&&e.widgets[0]&&$a(e.subcategory.id)){d||(d=Object.assign({},t),d.name=a("CoreHome_ChooseX",[s.name]),d.isGroup=!0,d.subcategories=[],d.order=10),i&&(d.name=t.name);const e=t.id;return t.tooltip=`${t.name} (id = ${e})`,void d.subcategories.push(t)}s.subcategories.push(t)}),d&&d.subcategories&&d.subcategories.length<=5?d.subcategories.forEach(e=>s.subcategories.push(e)):d&&s.subcategories.push(d),s.subcategories=Aa(_a(s)),e.push(s)}),Aa(e)}toggleCategory(e){return this.privateState.activeSubcategoryId=null,this.privateState.activeSubsubcategoryId=null,this.activeCategory.value===e.id?(this.privateState.activeCategoryId=null,!1):(this.privateState.activeCategoryId=e.id,!0)}enterSubcategory(e,t,o){e&&t&&(this.privateState.activeCategoryId=e.id,this.privateState.activeSubcategoryId=t.id,o&&(this.privateState.activeSubsubcategoryId=o.id))}}var qa=new Ua;function Wa(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}
/*!
 * Matomo - free/libre analytics platform
 *
 * @link    https://matomo.org
 * @license https://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */function za(e){const t=e;return t.widgets?t.widgets:[]}class Ga{constructor(){Wa(this,"privateState",Object(E["reactive"])({isFetchedFirstTime:!1,categorizedWidgets:{}})),Wa(this,"state",Object(E["computed"])(()=>(this.privateState.isFetchedFirstTime||this.fetchAvailableWidgets(),Object(E["readonly"])(this.privateState)))),Wa(this,"widgets",Object(E["computed"])(()=>this.state.value.categorizedWidgets))}fetchAvailableWidgets(){return _.parsed.value.idSite?(this.privateState.isFetchedFirstTime=!0,new Promise((e,t)=>{try{window.widgetsHelper.getAvailableWidgets(t=>{const o=t;this.privateState.categorizedWidgets=o,e(this.widgets.value)})}catch(o){t(o)}})):Promise.resolve(this.widgets.value)}reloadAvailableWidgets(){window.widgetsHelper.clearAvailableWidgets();const e=this.fetchAvailableWidgets();return e.then(()=>{x.postEvent("WidgetsStore.reloaded")}),e}}var Ya=new Ga;const Ja="reportingmenu-help";var Ka=Object(E["defineComponent"])({components:{MenuItemsDropdown:Ro},directives:{SideNav:Vt},props:{},data(){return{showSubcategoryHelpOnLoad:null,initialLoad:!0,helpShownCategory:null}},computed:{sideNavActivator(){return document.querySelector("nav .activateLeftMenu")},menu(){const e=qa.menu.value;return e.forEach(e=>{if(e.widget&&e.widget.indexOf(".")>0){const[t,o]=e.widget.split(".");e.component=be(t,o)}}),e},activeCategory(){return qa.activeCategory.value},activeSubcategory(){return qa.activeSubcategory.value},activeSubsubcategory(){return qa.activeSubsubcategory.value},displayedCategory(){return _.parsed.value.category},displayedSubcategory(){return _.parsed.value.subcategory}},created(){qa.fetchMenuItems().then(e=>{if(!_.parsed.value.subcategory){const t=e[0],o=t.subcategories[0];qa.enterSubcategory(t,o),this.propagateUrlChange(t,o)}}),Object(E["watch"])(()=>_.parsed.value,e=>{const t=qa.findSubcategory(e.category,e.subcategory);qa.enterSubcategory(t.category,t.subcategory,t.subsubcategory)}),x.on("matomoPageChange",()=>{this.initialLoad||window.globalAjaxQueue.abort(),this.helpShownCategory=null,this.showSubcategoryHelpOnLoad&&(this.showHelp(this.showSubcategoryHelpOnLoad.category,this.showSubcategoryHelpOnLoad.subcategory),this.showSubcategoryHelpOnLoad=null),window.$("#loadingError,#loadingRateLimitError").hide(),this.initialLoad=!1}),x.on("updateReportingMenu",()=>{qa.reloadMenuItems().then(()=>{const e=_.parsed.value.category,t=_.parsed.value.subcategory;if(e&&t){const o=qa.findSubcategory(e,t);o.category&&qa.enterSubcategory(o.category,o.subcategory,o.subsubcategory)}}),Ya.reloadAvailableWidgets()})},methods:{propagateUrlChange(e,t){const o=_.parsed.value;o.category===e.id&&o.subcategory===t.id?this.loadSubcategory(e,t):_.updateHash(Object.assign(Object.assign({},_.hashParsed.value),{},{category:e.id,subcategory:t.id}))},loadCategory(e){wi.remove(Ja);const t=qa.toggleCategory(e),{subcategories:o}=e,i=o&&1===o.length||e.widget&&o&&o.length;if(t&&i){this.helpShownCategory=null;const t=e.subcategories[0];this.propagateUrlChange(e,t)}},loadSubcategory(e,t,o){o&&(o.shiftKey||o.ctrlKey||o.metaKey)||(wi.remove(Ja),t&&t.id===_.parsed.value.subcategory&&e.id===_.parsed.value.category&&(this.helpShownCategory=null,setTimeout(()=>{x.postEvent("loadPage",e.id,t.id)})))},makeUrl(e,t){const{idSite:o,period:i,date:n,segment:a,comparePeriods:r,compareDates:s,compareSegments:l}=_.parsed.value;return _.stringify({idSite:o,period:i,date:n,segment:a,comparePeriods:r,compareDates:s,compareSegments:l,category:e.id,subcategory:t.id})},htmlEntities(e){return x.helper.htmlEntities(e)},showHelp(e,t,o){const i=_.parsed.value,n=i.category,r=i.subcategory;if((n!==e.id||r!==t.id)&&o)return this.showSubcategoryHelpOnLoad={category:e,subcategory:t},void _.updateHash(Object.assign(Object.assign({},_.hashParsed.value),{},{category:e.id,subcategory:t.id}));if(this.helpShownCategory&&e.id===this.helpShownCategory.category&&t.id===this.helpShownCategory.subcategory)return wi.remove(Ja),void(this.helpShownCategory=null);const s=a("CoreHome_ReportingCategoryHelpPrefix",e.name,t.name),l=`<strong>${s}</strong><br/>`;wi.show({context:"info",id:Ja,type:"help",noclear:!0,class:"help-notification",message:l+t.help,placeat:"#notificationContainer",prepend:!0}),this.helpShownCategory={category:e.id,subcategory:t.id}}}});Ka.render=Ia;var Qa=Ka;function Xa(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}
/*!
 * Matomo - free/libre analytics platform
 *
 * @link    https://matomo.org
 * @license https://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */class Za{constructor(){Xa(this,"privateState",Object(E["reactive"])({reports:[]})),Xa(this,"state",Object(E["readonly"])(this.privateState)),Xa(this,"reports",Object(E["computed"])(()=>this.state.reports)),Xa(this,"reportsPromise",void 0)}findReport(e,t){return this.reports.value.find(o=>o.module===e&&o.action===t)}fetchReportMetadata(){return this.reportsPromise||(this.reportsPromise=W.fetch({method:"API.getReportMetadata",filter_limit:"-1",idSite:x.idSite||_.parsed.value.idSite}).then(e=>(this.privateState.reports=e,e))),this.reportsPromise.then(()=>this.reports.value)}}var er=new Za;const tr={class:"widgetLoader"},or={key:0},ir={key:1,class:"notification system notification-error"},nr=["href"],ar={key:2,class:"notification system notification-error"},rr={class:"theWidgetContent",ref:"widgetContent"};function sr(e,t,o,i,n,a){const r=Object(E["resolveComponent"])("ActivityIndicator");return Object(E["openBlock"])(),Object(E["createElementBlock"])("div",tr,[Object(E["createVNode"])(r,{"loading-message":e.finalLoadingMessage,loading:e.loading},null,8,["loading-message","loading"]),Object(E["withDirectives"])(Object(E["createElementVNode"])("div",null,[e.widgetName?(Object(E["openBlock"])(),Object(E["createElementBlock"])("h2",or,Object(E["toDisplayString"])(e.widgetName),1)):Object(E["createCommentVNode"])("",!0),e.loadingFailedRateLimit?(Object(E["openBlock"])(),Object(E["createElementBlock"])("div",ar,Object(E["toDisplayString"])(e.translate("General_ErrorRateLimit")),1)):(Object(E["openBlock"])(),Object(E["createElementBlock"])("div",ir,[Object(E["createTextVNode"])(Object(E["toDisplayString"])(e.translate("General_ErrorRequest","",""))+" ",1),e.hasErrorFaqLink?(Object(E["openBlock"])(),Object(E["createElementBlock"])("a",{key:0,rel:"noreferrer noopener",target:"_blank",href:e.externalRawLink("https://matomo.org/faq/troubleshooting/faq_19489/")},Object(E["toDisplayString"])(e.translate("General_ErrorRequestFaqLink")),9,nr)):Object(E["createCommentVNode"])("",!0)]))],512),[[E["vShow"],e.loadingFailed]]),Object(E["createElementVNode"])("div",rr,null,512)])}function lr(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}
/*!
 * Matomo - free/libre analytics platform
 *
 * @link    https://matomo.org
 * @license https://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */class cr{constructor(){lr(this,"privateState",Object(E["reactive"])({module:"",action:"",category:"",subcategory:"",idSite:"",widgetSearchFilters:{}})),lr(this,"state",Object(E["computed"])(()=>Object(E["readonly"])(this.privateState))),x.on("matomoPageChange",()=>{this.isCurrentPage()||this.resetSearchFilters(),this.updateCurrentRoutingFromUrl()})}resetSearchFilters(){this.privateState.widgetSearchFilters={}}getSearchFilters(e){return this.state.value.widgetSearchFilters[e]||{}}setSearchFilters(e,t){e&&(this.privateState.widgetSearchFilters[e]=t)}updateCurrentRoutingFromUrl(){const e=_.parsed.value;this.privateState.module=e.module,this.privateState.action=e.action,this.privateState.category=e.category,this.privateState.subcategory=e.subcategory,this.privateState.idSite=e.idSite}isCurrentPage(){const e=_.parsed.value;return this.state.value.module===e.module&&this.state.value.action===e.action&&this.state.value.category===e.category&&this.state.value.subcategory===e.subcategory&&this.state.value.idSite===e.idSite}}var dr=new cr,ur=Object(E["defineComponent"])({props:{widgetParams:Object,widgetName:String,loadingMessage:String},components:{ActivityIndicator:Fe},data(){return{loading:!1,loadingFailed:!1,loadingFailedRateLimit:!1,changeCounter:0,lastWidgetAbortController:null}},watch:{widgetParams(e){e&&this.loadWidgetUrl(e,this.changeCounter+=1)}},computed:{finalLoadingMessage(){return this.loadingMessage?this.loadingMessage:this.widgetName?a("General_LoadingPopover",this.widgetName):a("General_LoadingData")},hasErrorFaqLink(){const e=x.config.enable_general_settings_admin,t=x.config.enable_plugins_admin;return x.hasSuperUserAccess&&(e||t)}},mounted(){this.widgetParams&&this.loadWidgetUrl(this.widgetParams,this.changeCounter+=1)},beforeUnmount(){this.cleanupLastWidgetContent()},methods:{abortHttpRequestIfNeeded(){this.lastWidgetAbortController&&(this.lastWidgetAbortController.abort(),this.lastWidgetAbortController=null)},cleanupLastWidgetContent(){const e=this.$refs.widgetContent;x.helper.destroyVueComponent(e),e&&(e.innerHTML="")},getWidgetUrl(e){const t=_.parsed.value;let o=Object.assign({},e||{});const i=Object.keys(Object.assign(Object.assign({},_.hashParsed.value),{},{idSite:"",period:"",date:"",segment:"",widget:""}));return i.forEach(e=>{"category"!==e&&"subcategory"!==e&&(e in o||(o[e]=t[e]))}),Co.isComparisonEnabled()&&(o=Object.assign(Object.assign({},o),{},{comparePeriods:t.comparePeriods,compareDates:t.compareDates,compareSegments:t.compareSegments})),e&&"showtitle"in e||(o.showtitle="1"),x.shouldPropagateTokenAuth&&t.token_auth&&(x.broadcast.isWidgetizeRequestWithoutSession()||(o.force_api_session="1"),o.token_auth=t.token_auth),o.random=Math.floor(1e4*Math.random()),o},loadWidgetUrl(e,t){this.loading=!0,this.abortHttpRequestIfNeeded(),this.cleanupLastWidgetContent(),this.lastWidgetAbortController=new AbortController;let o={};e.uniqueId&&(o=dr.getSearchFilters(e.uniqueId)),W.fetch(this.getWidgetUrl(Object.assign(e,o)),{format:"html",abortController:this.lastWidgetAbortController}).then(o=>{if(t!==this.changeCounter||"string"!==typeof o)return;this.lastWidgetAbortController=null,this.loading=!1,this.loadingFailed=!1;const i=this.$refs.widgetContent;window.$(i).html(o);const n=window.$(i).children();if(this.widgetName){let e=n.find("> .card-content .card-title");e.length||(e=n.find("> h2")),e.length&&e.html(x.helper.htmlEntities(this.widgetName))}x.helper.compileVueEntryComponents(n),wi.parseNotificationDivs(),setTimeout(()=>{x.postEvent("widget:loaded",{parameters:e,element:n})})}).catch(e=>{t===this.changeCounter&&(this.lastWidgetAbortController=null,this.cleanupLastWidgetContent(),this.loading=!1,"abort"!==e.xhrStatus&&(429===e.status&&(this.loadingFailedRateLimit=!0),this.loadingFailed=!0))})}}});ur.render=sr;var mr=ur;const pr={class:"widget-container"};function hr(e,t,o,i,n,a){const r=Object(E["resolveComponent"])("Widget");return Object(E["openBlock"])(),Object(E["createElementBlock"])("div",pr,[(Object(E["openBlock"])(!0),Object(E["createElementBlock"])(E["Fragment"],null,Object(E["renderList"])(e.actualContainer,(e,t)=>(Object(E["openBlock"])(),Object(E["createElementBlock"])("div",{key:t},[Object(E["createElementVNode"])("div",null,[Object(E["createVNode"])(r,{widget:e,"prevent-recursion":!0},null,8,["widget"])])]))),128))])}const gr=be("CoreHome","Widget");var br=Object(E["defineComponent"])({props:{container:{type:Array,required:!0}},components:{Widget:gr},computed:{actualContainer(){var e,t,o;const i=this.container;if(null===i||void 0===i||null===(e=i[0])||void 0===e||!e.parameters)return i;const[n]=i,a="1"===(null===(t=n.parameters)||void 0===t?void 0:t.widget)||1===(null===(o=n.parameters)||void 0===o?void 0:o.widget),r=a&&"graphEvolution"===n.viewDataTable,s=r?Object.assign(Object.assign({},n),{},{parameters:Object.assign(Object.assign({},n.parameters),{},{showtitle:"0"})}):n;return[s,...i.slice(1)]}}});br.render=hr;var fr=br;const vr={class:"reportsByDimensionView"},Or={class:"entityList"},jr={class:"listCircle"},yr=["onClick"],wr={class:"dimension"},kr={class:"reportContainer"},Sr=Object(E["createElementVNode"])("div",{class:"clear"},null,-1);function Cr(e,t,o,i,n,a){const r=Object(E["resolveComponent"])("WidgetLoader");return Object(E["openBlock"])(),Object(E["createElementBlock"])("div",vr,[Object(E["createElementVNode"])("div",Or,[(Object(E["openBlock"])(!0),Object(E["createElementBlock"])(E["Fragment"],null,Object(E["renderList"])(e.widgetsByCategory,t=>(Object(E["openBlock"])(),Object(E["createElementBlock"])("div",{class:"dimensionCategory",key:t.name},[Object(E["createTextVNode"])(Object(E["toDisplayString"])(t.name)+" ",1),Object(E["createElementVNode"])("ul",jr,[(Object(E["openBlock"])(!0),Object(E["createElementBlock"])(E["Fragment"],null,Object(E["renderList"])(t.widgets,t=>(Object(E["openBlock"])(),Object(E["createElementBlock"])("li",{class:Object(E["normalizeClass"])(["reportDimension",{activeDimension:e.selectedWidget.uniqueId===t.uniqueId}]),key:t.uniqueId,onClick:o=>e.selectWidget(t)},[Object(E["createElementVNode"])("span",wr,Object(E["toDisplayString"])(t.name),1)],10,yr))),128))])]))),128))]),Object(E["createElementVNode"])("div",kr,[e.selectedWidget.parameters?(Object(E["openBlock"])(),Object(E["createBlock"])(r,{key:0,"widget-params":e.selectedWidget.parameters,class:"dimensionReport"},null,8,["widget-params"])):Object(E["createCommentVNode"])("",!0)]),Sr])}var Er=Object(E["defineComponent"])({props:{widgets:Array},components:{WidgetLoader:mr},data(){return{selectedWidget:null}},created(){[this.selectedWidget]=this.widgetsSorted},computed:{widgetsSorted(){return Aa(this.widgets)},widgetsByCategory(){const e={};return this.widgetsSorted.forEach(t=>{var o;const i=null===(o=t.subcategory)||void 0===o?void 0:o.name;i&&(e[i]||(e[i]={name:i,order:t.order,widgets:[]}),e[i].widgets.push(t))}),Aa(Object.values(e))}},methods:{selectWidget(e){this.selectedWidget=Object.assign({},e)}}});Er.render=Cr;var Dr=Er;const Pr=["id"],Tr={key:1},Vr={key:2};function Nr(e,t,o,i,n,a){const r=Object(E["resolveComponent"])("WidgetLoader"),s=Object(E["resolveComponent"])("WidgetContainer"),l=Object(E["resolveComponent"])("WidgetByDimensionContainer"),c=Object(E["resolveDirective"])("tooltips");return e.actualWidget&&e.showWidget?Object(E["withDirectives"])((Object(E["openBlock"])(),Object(E["createElementBlock"])("div",{key:0,class:Object(E["normalizeClass"])(["matomo-widget",{isFirstWidgetInPage:e.actualWidget.isFirstInPage}]),id:e.actualWidget.uniqueId},[!e.actualWidget.isContainer&&e.actualWidget.parameters?(Object(E["openBlock"])(),Object(E["createBlock"])(r,{key:0,"widget-params":e.actualWidget.parameters,"widget-name":e.actualWidget.name},null,8,["widget-params","widget-name"])):Object(E["createCommentVNode"])("",!0),e.actualWidget.isContainer&&"ByDimension"!==e.actualWidget.layout&&!this.preventRecursion?(Object(E["openBlock"])(),Object(E["createElementBlock"])("div",Tr,[Object(E["createElementVNode"])("div",null,[Object(E["createVNode"])(s,{container:e.actualWidget.widgets},null,8,["container"])])])):Object(E["createCommentVNode"])("",!0),e.actualWidget.isContainer&&"ByDimension"===e.actualWidget.layout?(Object(E["openBlock"])(),Object(E["createElementBlock"])("div",Vr,[Object(E["createElementVNode"])("div",null,[Object(E["createVNode"])(l,{widgets:e.actualWidget.widgets},null,8,["widgets"])])])):Object(E["createCommentVNode"])("",!0)],10,Pr)),[[c,{content:e.tooltipContent}]]):Object(E["createCommentVNode"])("",!0)}function xr(e,t){let o=void 0;return Object.values(e||{}).some(e=>(o=e.find(e=>{var o;return e&&e.isContainer&&(null===(o=e.parameters)||void 0===o?void 0:o.containerId)===t}),o)),o}var Br=Object(E["defineComponent"])({props:{widget:Object,widgetized:Boolean,containerid:String,preventRecursion:Boolean},components:{WidgetLoader:mr,WidgetContainer:fr,WidgetByDimensionContainer:Dr},directives:{Tooltips:Ze},data(){return{showWidget:!1}},setup(){function e(){const e=window.$(this);if(e.hasClass("matomo-form-field"))return"";const t=window.$(this).attr("title")||"";return window.vueSanitize(t.replace(/\n/g,"<br />"))}return{tooltipContent:e}},created(){const{actualWidget:e}=this;if(e&&e.middlewareParameters){const t=e.middlewareParameters;W.fetch(t).then(e=>{this.showWidget=!!e})}else this.showWidget=!0},computed:{allWidgets(){return Ya.widgets.value},actualWidget(){const e=this.widget;if(e){const t=Object.assign({},e);if(e&&e.isReport&&!e.documentation){const o=er.findReport(e.module,e.action);o&&o.documentation&&(t.documentation=o.documentation)}return e.uniqueId&&(t.parameters=Object.assign(Object.assign({},t.parameters),{},{uniqueId:e.uniqueId})),t}if(this.containerid){const e=xr(this.allWidgets,this.containerid);if(e){const t=Object.assign({},e);if(this.widgetized){t.isFirstInPage=!0,t.parameters=Object.assign(Object.assign({},t.parameters),{},{widget:"1"});const e=za(t);e&&(t.widgets=e.map(e=>Object.assign(Object.assign({},e),{},{parameters:Object.assign(Object.assign({},e.parameters),{},{widget:"1",containerId:this.containerid})})))}return t}}return null}}});Br.render=Nr;var Ir=Br;const Mr={class:"reporting-page"},Lr={key:1,class:"col s12 l6 leftWidgetColumn"},Fr={key:2,class:"col s12 l6 rightWidgetColumn"};function Ar(e,t,o,i,n,a){const r=Object(E["resolveComponent"])("ActivityIndicator"),s=Object(E["resolveComponent"])("Widget");return Object(E["openBlock"])(),Object(E["createElementBlock"])("div",Mr,[Object(E["createVNode"])(r,{loading:e.loading},null,8,["loading"]),Object(E["withDirectives"])(Object(E["createElementVNode"])("div",null,Object(E["toDisplayString"])(e.translate("CoreHome_NoSuchPage")),513),[[E["vShow"],e.hasNoPage]]),(Object(E["openBlock"])(!0),Object(E["createElementBlock"])(E["Fragment"],null,Object(E["renderList"])(e.widgets,e=>(Object(E["openBlock"])(),Object(E["createElementBlock"])("div",{class:"row",key:e.uniqueId},[e.group?Object(E["createCommentVNode"])("",!0):(Object(E["openBlock"])(),Object(E["createBlock"])(s,{key:0,class:"col s12 fullWidgetColumn",widget:e},null,8,["widget"])),e.group?(Object(E["openBlock"])(),Object(E["createElementBlock"])("div",Lr,[(Object(E["openBlock"])(!0),Object(E["createElementBlock"])(E["Fragment"],null,Object(E["renderList"])(e.left,e=>(Object(E["openBlock"])(),Object(E["createBlock"])(s,{widget:e,key:e.uniqueId},null,8,["widget"]))),128))])):Object(E["createCommentVNode"])("",!0),e.group?(Object(E["openBlock"])(),Object(E["createElementBlock"])("div",Fr,[(Object(E["openBlock"])(!0),Object(E["createElementBlock"])(E["Fragment"],null,Object(E["renderList"])(e.right,e=>(Object(E["openBlock"])(),Object(E["createBlock"])(s,{widget:e,key:e.uniqueId},null,8,["widget"]))),128))])):Object(E["createCommentVNode"])("",!0)]))),128))])}function _r(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}
/*!
 * Matomo - free/libre analytics platform
 *
 * @link    https://matomo.org
 * @license https://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */function Rr(e){return!!(e.isContainer&&e.layout&&"ByDimension"===e.layout||"bydimension"===e.viewDataTable)||(!!e.isWide||e.viewDataTable&&("tableAllColumns"===e.viewDataTable||"sparklines"===e.viewDataTable||"graphEvolution"===e.viewDataTable))}function Hr(e){if(e&&e[0]){const t=[...e],o=e[0];return o.group?t[0]=Object.assign(Object.assign({},t[0]),{},{left:Hr(o.left||[]),right:Hr(o.right||[])}):t[0]=Object.assign(Object.assign({},t[0]),{},{isFirstInPage:!0}),t}return e}class $r{constructor(){_r(this,"privateState",Object(E["reactive"])({})),_r(this,"state",Object(E["computed"])(()=>Object(E["readonly"])(this.privateState))),_r(this,"page",Object(E["computed"])(()=>this.state.value.page)),_r(this,"widgets",Object(E["computed"])(()=>{const e=this.page.value;if(!e)return[];let t=[];const o={},i=e=>e.isReport&&o[`${e.module}.${e.action}`],n=e=>{if(!e.isReport)return[];const t=er.findReport(e.module,e.action);return t&&t.relatedReports?t.relatedReports:[]};if((e.widgets||[]).forEach(e=>{i(e)||(n(e).forEach(e=>{o[`${e.module}.${e.action}`]=!0}),t.push(e))}),t=Aa(t),1===t.length)return Hr(t);const a=[];for(let s=0;s<t.length;s+=1){const e=t[s];if(Rr(e)||t[s+1]&&Rr(t[s+1]))a.push(Object.assign(Object.assign({},e),{},{widgets:Aa(za(e))}));else{let o=0;const i=[e],n=[];while(t[s+1]&&!Rr(t[s+1]))s+=1,o+=1,o%2===0?i.push(t[s]):n.push(t[s]);a.push({group:!0,left:i,right:n})}}const r=Hr(a);return r}))}fetchPage(e,t){return this.resetPage(),Promise.all([Fa.getAllPages(),er.fetchReportMetadata()]).then(()=>(this.privateState.page=Fa.findPage(e,t),this.page.value))}resetPage(){this.privateState.page=void 0}}var Ur=new $r;function qr(){const e="category=General_Visitors&subcategory=Live_VisitorLog",t=window.broadcast.buildReportingUrl(e);let o=a("CoreHome_PeriodHasOnlyRawData",`<a href="${t}">`,"</a>");x.visitorLogEnabled||(o=a("CoreHome_PeriodHasOnlyRawDataNoVisitsLog")),wi.show({id:"onlyRawData",animate:!1,context:"info",message:o,type:"transient"})}function Wr(){wi.remove("onlyRawData")}var zr=Object(E["defineComponent"])({components:{ActivityIndicator:Fe,Widget:Ir},data(){return{loading:!1,hasRawData:!1,hasNoVisits:!1,dateLastChecked:null,hasNoPage:!1}},created(){Ur.resetPage(),this.loading=!0,this.renderInitialPage(),Object(E["watch"])(()=>_.parsed.value,(e,t)=>{e.category===t.category&&e.subcategory===t.subcategory&&e.period===t.period&&e.date===t.date&&e.segment===t.segment&&JSON.stringify(e.compareDates)===JSON.stringify(t.compareDates)&&JSON.stringify(e.comparePeriods)===JSON.stringify(t.comparePeriods)&&JSON.stringify(e.compareSegments)===JSON.stringify(t.compareSegments)&&JSON.stringify(e.columns||"")===JSON.stringify(t.columns||"")||(e.date===t.date&&e.period===t.period||(Wr(),this.dateLastChecked=null,this.hasRawData=!1,this.hasNoVisits=!1),this.renderPage(e.category,e.subcategory,e.period,e.date,e.segment))}),x.on("loadPage",(e,t)=>{const o=_.parsed.value;this.renderPage(e,t,o.period,o.date,o.segment)})},computed:{widgets(){return Ur.widgets.value}},methods:{renderPage(e,t,o,i,n){if(!e||!t)return Ur.resetPage(),void(this.loading=!1);try{c.parse(o,i)}catch(s){return wi.show({id:"invalidDate",animate:!1,context:"error",message:a("CoreHome_DateInvalid"),type:"transient"}),Ur.resetPage(),void(this.loading=!1)}wi.remove("invalidDate"),x.postEvent("matomoPageChange",{}),wi.clearTransientNotifications(),c.parse(o,i).containsToday()&&this.showOnlyRawDataMessageIfRequired(e,t,o,i,n);const r={category:e,subcategory:t};if(x.postEvent("ReportingPage.loadPage",r),r.promise)return this.loading=!0,void Promise.resolve(r.promise).finally(()=>{this.loading=!1});Ur.fetchPage(e,t).then(()=>{const t=!Ur.page.value;if(t){const t=Fa.findPageInCategory(e);if(t&&t.subcategory)return void _.updateHash(Object.assign(Object.assign({},_.hashParsed.value),{},{subcategory:t.subcategory.id}))}this.hasNoPage=t,this.loading=!1})},renderInitialPage(){const e=_.parsed.value;this.renderPage(e.category,e.subcategory,e.period,e.date,e.segment)},showOnlyRawDataMessageIfRequired(e,t,o,i,n){if(this.hasRawData&&this.hasNoVisits&&qr(),n)return void Wr();const a=["Live_VisitorLog","General_RealTime","UserCountryMap_RealTimeMap","MediaAnalytics_TypeAudienceLog","MediaAnalytics_TypeRealTime","FormAnalytics_TypeRealTime","Goals_AddNewGoal"],r=["HeatmapSessionRecording_Heatmaps","HeatmapSessionRecording_SessionRecordings","Marketplace_Marketplace"];if(-1!==a.indexOf(t)||-1!==r.indexOf(e)||-1!==t.toLowerCase().indexOf("manage"))return void Wr();const s=6e4;this.dateLastChecked&&(new Date).valueOf()-this.dateLastChecked.valueOf()<s||W.fetch({method:"VisitsSummary.getVisits",date:i,period:o,segment:n}).then(e=>(this.dateLastChecked=new Date,e.value>0?(this.hasNoVisits=!1,void Wr()):(this.hasNoVisits=!0,this.hasRawData?void qr():W.fetch({method:"Live.getMostRecentVisitsDateTime",date:i,period:o}).then(e=>{if(!e||""===e.value)return this.hasRawData=!1,void Wr();this.hasRawData=!0,qr()}))))}}});zr.render=Ar;var Gr=zr;const Yr={class:"report-export-popover row",id:"reportExport"},Jr={class:"col l6"},Kr={name:"format"},Qr={name:"option_flat"},Xr={name:"option_show_dimensions"},Zr={name:"option_expanded"},es={name:"option_format_metrics"},ts={class:"col l6"},os={name:"filter_type"},is={class:"filter_limit"},ns={name:"filter_limit_all"},as={key:0,name:"filter_limit"},rs={key:1,name:"filter_limit"},ss={class:"col l12"},ls=["value"],cs=["innerHTML"],ds={class:"col l12"},us=["href","title"],ms=["innerHTML"];function ps(e,t,o,i,n,a){const r=Object(E["resolveComponent"])("Field"),s=Object(E["resolveDirective"])("select-on-focus");return Object(E["openBlock"])(),Object(E["createElementBlock"])("div",Yr,[Object(E["createElementVNode"])("div",Jr,[Object(E["createElementVNode"])("div",Kr,[Object(E["createVNode"])(r,{uicontrol:"radio",name:"format",title:e.translate("CoreHome_ExportFormat"),modelValue:e.reportFormat,"onUpdate:modelValue":t[0]||(t[0]=t=>e.reportFormat=t),"full-width":!0,options:e.availableReportFormats[e.reportType]},null,8,["title","modelValue","options"])]),Object(E["createElementVNode"])("div",null,[Object(E["createElementVNode"])("div",Qr,[Object(E["withDirectives"])(Object(E["createVNode"])(r,{uicontrol:"checkbox",name:"option_flat",title:e.translate("CoreHome_FlattenReport"),modelValue:e.optionFlat,"onUpdate:modelValue":t[1]||(t[1]=t=>e.optionFlat=t)},null,8,["title","modelValue"]),[[E["vShow"],e.hasSubtables]])])]),Object(E["createElementVNode"])("div",null,[Object(E["createElementVNode"])("div",Xr,[Object(E["withDirectives"])(Object(E["createVNode"])(r,{uicontrol:"checkbox",name:"option_show_dimensions",title:e.translate("CoreHome_IncludeDimensionsSeparately"),modelValue:e.optionShowDimensions,"onUpdate:modelValue":t[2]||(t[2]=t=>e.optionShowDimensions=t)},null,8,["title","modelValue"]),[[E["vShow"],e.hasMultipleDimensions&&e.optionFlat]])])]),Object(E["createElementVNode"])("div",null,[Object(E["createElementVNode"])("div",Zr,[Object(E["withDirectives"])(Object(E["createVNode"])(r,{uicontrol:"checkbox",name:"option_expanded",title:e.translate("CoreHome_ExpandSubtables"),modelValue:e.optionExpanded,"onUpdate:modelValue":t[3]||(t[3]=t=>e.optionExpanded=t)},null,8,["title","modelValue"]),[[E["vShow"],e.hasSubtables&&!e.optionFlat]])])]),Object(E["createElementVNode"])("div",null,[Object(E["createElementVNode"])("div",es,[Object(E["createVNode"])(r,{uicontrol:"checkbox",name:"option_format_metrics",title:e.translate("CoreHome_FormatMetrics"),modelValue:e.optionFormatMetrics,"onUpdate:modelValue":t[4]||(t[4]=t=>e.optionFormatMetrics=t)},null,8,["title","modelValue"])])])]),Object(E["createElementVNode"])("div",ts,[Object(E["createElementVNode"])("div",null,[Object(E["createElementVNode"])("div",os,[Object(E["createVNode"])(r,{uicontrol:"radio",name:"filter_type",title:e.translate("CoreHome_ReportType"),modelValue:e.reportType,"onUpdate:modelValue":t[5]||(t[5]=t=>e.reportType=t),"full-width":!0,options:e.availableReportTypes},null,8,["title","modelValue","options"])])]),Object(E["createElementVNode"])("div",is,[Object(E["withDirectives"])(Object(E["createElementVNode"])("div",ns,[Object(E["createVNode"])(r,{uicontrol:"radio",name:"filter_limit_all",title:e.translate("CoreHome_RowLimit"),modelValue:e.reportLimitAll,"onUpdate:modelValue":t[6]||(t[6]=t=>e.reportLimitAll=t),"full-width":!0,options:e.limitAllOptions},null,8,["title","modelValue","options"])],512),[[E["vShow"],!e.maxFilterLimit||e.maxFilterLimit<=0]]),"no"===e.reportLimitAll&&e.maxFilterLimit<=0?(Object(E["openBlock"])(),Object(E["createElementBlock"])("div",as,[Object(E["createVNode"])(r,{uicontrol:"number",name:"filter_limit",min:1,modelValue:e.reportLimit,"onUpdate:modelValue":t[7]||(t[7]=t=>e.reportLimit=t),"full-width":!0},null,8,["modelValue"])])):Object(E["createCommentVNode"])("",!0),"no"===e.reportLimitAll&&e.maxFilterLimit>0?(Object(E["openBlock"])(),Object(E["createElementBlock"])("div",rs,[Object(E["createVNode"])(r,{uicontrol:"number",name:"filter_limit",min:1,max:e.maxFilterLimit,modelValue:e.reportLimit,"onUpdate:modelValue":t[8]||(t[8]=t=>e.reportLimit=t),value:e.reportLimit,"full-width":!0,title:e.filterLimitTooltip},null,8,["max","modelValue","value","title"])])):Object(E["createCommentVNode"])("",!0)])]),Object(E["withDirectives"])(Object(E["createElementVNode"])("div",ss,[Object(E["withDirectives"])((Object(E["openBlock"])(),Object(E["createElementBlock"])("textarea",{readonly:"",class:"exportFullUrl",value:e.exportLinkWithoutToken},[Object(E["createTextVNode"])("\n      ")],8,ls)),[[s,{}]]),Object(E["createElementVNode"])("div",{class:"tooltip",innerHTML:e.$sanitize(e.translate("CoreHome_ExportTooltipWithLink","<a target=_blank href='?module=UsersManager&action=userSecurity'>","</a>","ENTER_YOUR_TOKEN_AUTH_HERE"))},null,8,cs)],512),[[E["vShow"],e.showUrl]]),Object(E["createElementVNode"])("div",ds,[Object(E["createElementVNode"])("a",{class:"btn",href:e.exportLink,target:"_new",title:e.translate("CoreHome_ExportTooltip")},Object(E["toDisplayString"])(e.translate("General_Export")),9,us),Object(E["createElementVNode"])("a",{href:"javascript:",onClick:t[9]||(t[9]=t=>e.showUrl=!e.showUrl),class:"toggle-export-url"},[Object(E["withDirectives"])(Object(E["createElementVNode"])("span",null,Object(E["toDisplayString"])(e.translate("CoreHome_ShowExportUrl")),513),[[E["vShow"],!e.showUrl]]),Object(E["withDirectives"])(Object(E["createElementVNode"])("span",null,Object(E["toDisplayString"])(e.translate("CoreHome_HideExportUrl")),513),[[E["vShow"],e.showUrl]])])]),e.additionalContent?(Object(E["openBlock"])(),Object(E["createElementBlock"])("div",{key:0,class:"col l12 report-export-popover-footer",innerHTML:e.$sanitize(e.additionalContent)},null,8,ms)):Object(E["createCommentVNode"])("",!0)])}const hs=be("CorePluginsAdmin","Field");var gs=Object(E["defineComponent"])({components:{Field:hs},directives:{SelectOnFocus:Et},props:{hasSubtables:Boolean,availableReportTypes:Object,availableReportFormats:{type:Object,required:!0},maxFilterLimit:Number,limitAllOptions:Object,dataTable:{type:Object,required:!0},requestParams:[Object,String],apiMethod:{type:String,required:!0},initialReportType:{type:String,default:"default"},initialReportLimit:{type:[String,Number],default:100},initialReportLimitAll:{type:String,default:"yes"},initialOptionFlat:{type:Boolean,default:!1},initialOptionShowDimensions:{type:Boolean,default:!1},initialOptionExpanded:{type:Boolean,default:!0},initialOptionFormatMetrics:{type:Boolean,default:!1},initialReportFormat:{type:String,default:"XML"}},mounted(){const e={content:this.additionalContent,dataTable:this.dataTable};x.postEvent("ReportExportPopover.additionalContent",e),this.additionalContent=e.content},data(){return{showUrl:!1,reportFormat:this.initialReportFormat,optionFlat:this.initialOptionFlat,optionShowDimensions:this.initialOptionShowDimensions,optionExpanded:this.initialOptionExpanded,optionFormatMetrics:this.initialOptionFormatMetrics,reportType:this.initialReportType,reportLimitAll:this.initialReportLimitAll,reportLimit:"string"===typeof this.initialReportLimit?parseInt(this.initialReportLimit,10):this.initialReportLimit,additionalContent:""}},watch:{reportType(e){this.availableReportFormats[e][this.reportFormat]||(this.reportFormat="XML")},reportLimit(e,t){this.maxFilterLimit&&this.maxFilterLimit>0&&e>this.maxFilterLimit&&(this.reportLimit=t)}},computed:{hasMultipleDimensions(){var e,t;return"function"===typeof(null===(e=this.dataTable)||void 0===e?void 0:e.getReportMetadata)&&Object.keys((null===(t=this.dataTable)||void 0===t?void 0:t.getReportMetadata().dimensions)||{}).length>1},filterLimitTooltip(){const e=a("CoreHome_RowLimit"),t=this.maxFilterLimit?a("General_ComputedMetricMax",this.maxFilterLimit.toString()):"";return`${e} (${t})`},exportLink(){return this.getExportLink(!0)},exportLinkWithoutToken(){return this.getExportLink(!1)}},methods:{getExportLink(e=!0){const{reportFormat:t,apiMethod:o,reportType:i}=this,n=this.dataTable;if(!t)return;let a={};const r="yes"===this.reportLimitAll?-1:this.reportLimit;this.requestParams&&"string"===typeof this.requestParams?a=JSON.parse(this.requestParams):this.requestParams&&"object"===typeof this.requestParams&&(a=this.requestParams);const{segment:s,label:l,idGoal:c,idDimension:d,idSite:u}=n.param;let{date:m,period:p}=n.param;"RSS"===t&&(m="last10"),"undefined"!==typeof n.param.dateUsedInGraph&&(m=n.param.dateUsedInGraph);const h=x.config.datatable_export_range_as_day.toLowerCase();-1!==h.indexOf(t.toLowerCase())&&"range"===n.param.period&&(p="day"),"range"===n.param.period&&"graphEvolution"===n.param.viewDataTable&&(p="day");const g={module:"API",format:t,idSite:u,period:p,date:m};if("processed"===i?(g.method="API.getProcessedReport",[g.apiModule,g.apiAction]=o.split(".")):g.method=o,n.param.compareDates&&n.param.compareDates.length&&(g.compareDates=n.param.compareDates,g.compare="1"),n.param.comparePeriods&&n.param.comparePeriods.length&&(g.comparePeriods=n.param.comparePeriods,g.compare="1"),n.param.compareSegments&&n.param.compareSegments.length&&(g.compareSegments=n.param.compareSegments,g.compare="1"),"undefined"!==typeof n.param.filter_pattern&&(g.filter_pattern=n.param.filter_pattern),"undefined"!==typeof n.param.filter_pattern_recursive&&(g.filter_pattern_recursive=n.param.filter_pattern_recursive),window.$.isPlainObject(a)&&Object.entries(a).forEach(([e,t])=>{let o=t;!0===o?o=1:!1===o&&(o=0),g[e]=o}),this.optionFlat&&(g.flat=1,this.optionShowDimensions&&(g.show_dimensions=1),"undefined"!==typeof n.param.include_aggregate_rows&&"1"===n.param.include_aggregate_rows&&(g.include_aggregate_rows=1)),!this.optionFlat&&this.optionExpanded&&(g.expanded=1),this.optionFormatMetrics&&(g.format_metrics=1),n.param.pivotBy&&(g.pivotBy=n.param.pivotBy,g.pivotByColumnLimit=20,n.props.pivot_by_column&&(g.pivotByColumn=n.props.pivot_by_column)),"CSV"!==t&&"TSV"!==t&&"RSS"!==t||(g.translateColumnNames=1,g.language=x.language),"undefined"!==typeof s&&(g.segment=decodeURIComponent(s)),"undefined"!==typeof c&&"-1"!==c&&(g.idGoal=c),"undefined"!==typeof d&&"-1"!==d&&(g.idDimension=d),l){const e=l.split(",");e.length>1?g.label=e:[g.label]=e}g.showMetadata=0,g.token_auth="ENTER_YOUR_TOKEN_AUTH_HERE",!0===e&&(g.token_auth=x.token_auth,g.force_api_session=1),g.filter_limit=r;const b=window.location.href.split("?")[0];return`${b}?${_.stringify(g)}`}}});gs.render=ps;var bs=gs;
/*!
 * Matomo - free/libre analytics platform
 *
 * @link    https://matomo.org
 * @license https://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */const{$:fs}=window;var vs={mounted(e,t){e.addEventListener("click",()=>{const o=_.hashParsed.value.popover,i=fs(e).closest("[data-report]").data("uiControlObject"),n=window.Piwik_Popover.showLoading("Export"),r=t.value.reportFormats;let s=i.param.filter_limit;t.value.maxFilterLimit>0&&(s=Math.min(s,t.value.maxFilterLimit));const l=!0===i.param.flat||1===i.param.flat||"1"===i.param.flat,c=!0===i.param.show_dimensions||1===i.param.show_dimensions||"1"===i.param.show_dimensions,d={initialReportType:"default",initialReportLimit:s>0?s:100,initialReportLimitAll:-1===s?"yes":"no",initialOptionFlat:l,initialOptionShowDimensions:c,initialOptionExpanded:!0,initialOptionFormatMetrics:!1,hasSubtables:l||i.numberOfSubtables>0,availableReportFormats:{default:r,processed:{XML:r.XML,JSON:r.JSON}},availableReportTypes:{default:a("CoreHome_StandardReport"),processed:a("CoreHome_ReportWithMetadata")},limitAllOptions:{yes:a("General_All"),no:a("CoreHome_CustomLimit")},maxFilterLimit:t.value.maxFilterLimit,dataTable:i,requestParams:t.value.requestParams,apiMethod:t.value.apiMethod},u=de({template:'\n          <popover v-bind="bind"/>',data(){return{bind:d}}});u.component("popover",bs);const m=document.createElement("div");u.mount(m);const{reportTitle:p}=t.value;window.Piwik_Popover.setTitle(`${a("General_Export")} ${x.helper.htmlEntities(p)}`),window.Piwik_Popover.setContent(m),window.Piwik_Popover.onClose(()=>{u.unmount(),""!==o&&setTimeout(()=>{_.updateHash(Object.assign(Object.assign({},_.hashParsed.value),{},{popover:o})),t.value.onClose&&t.value.onClose()},100)}),setTimeout(()=>{n.dialog(),fs(".exportFullUrl, .btn",n).tooltip({track:!0,show:!1,hide:!1})},100)})}};const Os=["src","width","height"];function js(e,t,o,i,n,a){return Object(E["openBlock"])(),Object(E["createElementBlock"])("img",{class:"sparklineImg",loading:"lazy",alt:"",src:e.sparklineUrl,width:e.width,height:e.height},null,8,Os)}var ys=Object(E["defineComponent"])({props:{seriesIndices:Array,params:[Object,String],width:Number,height:Number},data(){return{isWidget:!1}},mounted(){this.isWidget=!!this.$el.closest("[widgetId]")},computed:{sparklineUrl(){const{seriesIndices:e,params:t}=this,o=x.getSparklineColors();e&&(o.lineColor=o.lineColor.filter((t,o)=>-1!==e.indexOf(o)));const i=JSON.stringify(o),n={forceView:"1",viewDataTable:"sparkline",widget:this.isWidget?"1":"0",showtitle:"1",colors:i,random:Date.now(),date:this.defaultDate,segment:_.parsed.value.segment},a="object"===typeof t?t:_.parse(t.substring(t.indexOf("?")+1)),r=new W,s=r.mixinDefaultGetParams(Object.assign(Object.assign({},n),a)),l=_.parsed.value.token_auth;return l&&l.length&&x.shouldPropagateTokenAuth&&(s.token_auth=l),"?"+_.stringify(s)},defaultDate(){if("range"===x.period)return`${x.startDateString},${x.endDateString}`;const e=C.getLastNRange(x.period,30,x.currentDateString).getDateRange(),t=new Date(x.minDateYear,x.minDateMonth-1,x.minDateDay);e[0]<t&&(e[0]=t);const o=d(e[0]),i=d(e[1]);return`${o},${i}`}}});ys.render=js;var ws=ys;const ks={class:"progressbar"},Ss={class:"progress"},Cs=Object(E["createElementVNode"])("img",{src:"plugins/Morpheus/images/loading-blue.gif",style:{"margin-right":"3.5px"}},null,-1),Es=["innerHTML"];function Ds(e,t,o,i,n,a){return Object(E["openBlock"])(),Object(E["createElementBlock"])("div",ks,[Object(E["createElementVNode"])("div",Ss,[Object(E["createElementVNode"])("div",{class:"determinate",style:Object(E["normalizeStyle"])([{width:"0"},{width:e.actualProgress+"%"}])},null,4)]),Object(E["withDirectives"])(Object(E["createElementVNode"])("span",null,[Cs,Object(E["createElementVNode"])("span",{class:"label",innerHTML:e.$sanitize(e.label)},null,8,Es)],512),[[E["vShow"],!!e.label]])])}var Ps=Object(E["defineComponent"])({props:{progress:{type:Number,required:!0},label:String},computed:{actualProgress(){return this.progress>100?100:this.progress<0?0:this.progress}}});Ps.render=Ds;var Ts=Ps,Vs={mounted(e){e.classList.add("piwik-content-intro")},updated(e){Object(E["nextTick"])(()=>{e.classList.add("piwik-content-intro")})}},Ns={mounted(e,t){var o;null!==t&&void 0!==t&&null!==(o=t.value)&&void 0!==o&&o.off||e.classList.add("card","card-table","entityTable")},updated(e,t){var o;null!==t&&void 0!==t&&null!==(o=t.value)&&void 0!==o&&o.off||Object(E["nextTick"])(()=>{e.classList.add("card","card-table","entityTable")})}};
/*!
 * Matomo - free/libre analytics platform
 *
 * @link    https://matomo.org
 * @license https://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */const xs={ref:"root"};function Bs(e,t,o,i,n,a){return Object(E["openBlock"])(),Object(E["createElementBlock"])("div",xs,[Object(E["renderSlot"])(e.$slots,"default",{formData:e.formData,submitApiMethod:e.submitApiMethod,sendJsonPayload:e.sendJsonPayload,noErrorNotification:e.noErrorNotification,noSuccessNotification:e.noSuccessNotification,submitForm:e.submitForm,isSubmitting:e.isSubmitting,successfulPostResponse:e.successfulPostResponse,errorPostResponse:e.errorPostResponse})],512)}const{$:Is}=window;var Ms=Object(E["defineComponent"])({props:{formData:{type:Object,required:!0},submitApiMethod:{type:String,required:!0},sendJsonPayload:Boolean,noErrorNotification:Boolean,noSuccessNotification:Boolean},data(){return{isSubmitting:!1,successfulPostResponse:null,errorPostResponse:null}},emits:["update:modelValue"],mounted(){Is(this.$refs.root).on("click","input[type=submit]",()=>{this.submitForm()})},methods:{submitForm(){this.successfulPostResponse=null,this.errorPostResponse=null;let e=this.formData;this.sendJsonPayload&&(e={data:JSON.stringify(this.formData)}),this.isSubmitting=!0,W.post({module:"API",method:this.submitApiMethod},e,{createErrorNotification:!this.noErrorNotification}).then(e=>{if(this.successfulPostResponse=e,!this.noSuccessNotification){const e=wi.show({message:a("General_YourChangesHaveBeenSaved"),context:"success",type:"toast",id:"ajaxHelper"});wi.scrollToNotification(e)}}).catch(e=>{this.errorPostResponse=e.message}).finally(()=>{this.isSubmitting=!1})}}});Ms.render=Bs;var Ls=Ms;function Fs(e,t,o,i,n,a){return Object(E["renderSlot"])(e.$slots,"default")}var As=Object(E["defineComponent"])({});As.render=Fs;var _s=As;const Rs={key:0},Hs=["data-target"],$s=Object(E["createElementVNode"])("span",{class:"icon-configure"},null,-1),Us=[$s],qs=["data-target"],Ws=["title"],zs=["title","src"],Gs=["id"],Ys=["data-footer-icon-id"],Js=["title"],Ks=["title","src"],Qs={key:2},Xs=Object(E["createElementVNode"])("li",{class:"divider"},null,-1),Zs=Object(E["createElementVNode"])("li",{class:"divider"},null,-1),el=["title"],tl=Object(E["createElementVNode"])("span",{class:"icon-export"},null,-1),ol=[tl],il=["title"],nl=Object(E["createElementVNode"])("span",{class:"icon-image"},null,-1),al=[nl],rl=["title"],sl=Object(E["createElementVNode"])("span",{class:"icon-annotation"},null,-1),ll=[sl],cl=["title"],dl=Object(E["createElementVNode"])("span",{class:"icon-search",draggable:"false"},null,-1),ul=["title"],ml=["id","title"],pl=["title"],hl=["title","src"],gl=["id"],bl={key:0},fl=["innerHTML"],vl={key:1},Ol=["innerHTML"],jl={key:2},yl=["innerHTML"],wl={key:3},kl=["innerHTML"],Sl={key:4},Cl=["innerHTML"],El={key:5},Dl=["innerHTML"],Pl=["title","data-target"],Tl=Object(E["createElementVNode"])("span",{class:"icon-calendar"},null,-1),Vl={class:"periodName"},Nl=["id"],xl=["data-period"];function Bl(e,t,o,i,n,a){const r=Object(E["resolveComponent"])("Passthrough"),s=Object(E["resolveDirective"])("dropdown-button"),l=Object(E["resolveDirective"])("report-export");return e.showFooter&&e.showFooterIcons?(Object(E["openBlock"])(),Object(E["createElementBlock"])("div",Rs,[e.hasConfigItems&&(e.isAnyConfigureIconHighlighted||e.isTableView)?Object(E["withDirectives"])((Object(E["openBlock"])(),Object(E["createElementBlock"])("a",{key:0,class:Object(E["normalizeClass"])(["dropdown-button dropdownConfigureIcon dataTableAction",{highlighted:e.isAnyConfigureIconHighlighted}]),href:"",onClick:t[0]||(t[0]=Object(E["withModifiers"])(()=>{},["prevent"])),"data-target":"dropdownConfigure"+e.randomIdForDropdown,style:{"margin-right":"3.5px"}},Us,10,Hs)),[[s]]):Object(E["createCommentVNode"])("",!0),e.hasFooterIconsToShow?Object(E["withDirectives"])((Object(E["openBlock"])(),Object(E["createElementBlock"])("a",{key:1,class:"dropdown-button dataTableAction activateVisualizationSelection",href:"","data-target":"dropdownVisualizations"+e.randomIdForDropdown,style:{"margin-right":"3.5px"},onClick:t[1]||(t[1]=Object(E["withModifiers"])(()=>{},["prevent"]))},[/^icon-/.test(e.activeFooterIcon||"")?(Object(E["openBlock"])(),Object(E["createElementBlock"])("span",{key:0,title:e.translate("CoreHome_ChangeVisualization"),class:Object(E["normalizeClass"])(e.activeFooterIcon)},null,10,Ws)):(Object(E["openBlock"])(),Object(E["createElementBlock"])("img",{key:1,title:e.translate("CoreHome_ChangeVisualization"),width:"16",height:"16",src:e.activeFooterIcon},null,8,zs))],8,qs)),[[s]]):Object(E["createCommentVNode"])("",!0),e.showFooterIcons?(Object(E["openBlock"])(),Object(E["createElementBlock"])("ul",{key:2,id:"dropdownVisualizations"+e.randomIdForDropdown,class:"dropdown-content dataTableFooterIcons"},[(Object(E["openBlock"])(!0),Object(E["createElementBlock"])(E["Fragment"],null,Object(E["renderList"])(e.footerIcons,(t,o)=>(Object(E["openBlock"])(),Object(E["createBlock"])(r,{key:o},{default:Object(E["withCtx"])(()=>[(Object(E["openBlock"])(!0),Object(E["createElementBlock"])(E["Fragment"],null,Object(E["renderList"])(t.buttons.filter(e=>!!e.icon),o=>(Object(E["openBlock"])(),Object(E["createElementBlock"])("li",{key:o.id},[Object(E["createElementVNode"])("a",{class:Object(E["normalizeClass"])(`${t.class} tableIcon\n              ${-1!==e.activeFooterIconIds.indexOf(o.id)?"activeIcon":""}`),"data-footer-icon-id":o.id},[/^icon-/.test(o.icon||"")?(Object(E["openBlock"])(),Object(E["createElementBlock"])("span",{key:0,title:o.title,class:Object(E["normalizeClass"])(o.icon),style:{"margin-right":"5.5px"}},null,10,Js)):(Object(E["openBlock"])(),Object(E["createElementBlock"])("img",{key:1,width:"16",height:"16",title:o.title,src:o.icon,style:{"margin-right":"5.5px"}},null,8,Ks)),o.title?(Object(E["openBlock"])(),Object(E["createElementBlock"])("span",Qs,Object(E["toDisplayString"])(o.title),1)):Object(E["createCommentVNode"])("",!0)],10,Ys)]))),128)),Xs]),_:2},1024))),128)),Zs],8,Gs)):Object(E["createCommentVNode"])("",!0),e.showExport?Object(E["withDirectives"])((Object(E["openBlock"])(),Object(E["createElementBlock"])("a",{key:3,class:"dataTableAction activateExportSelection",title:e.translate("General_ExportThisReport"),href:"",style:{"margin-right":"3.5px"},onClick:t[2]||(t[2]=Object(E["withModifiers"])(()=>{},["prevent"]))},ol,8,el)),[[l,{reportTitle:e.reportTitle,requestParams:e.requestParams,apiMethod:e.apiMethodToRequestDataTable,reportFormats:e.reportFormats,maxFilterLimit:e.maxFilterLimit}]]):Object(E["createCommentVNode"])("",!0),e.showExportAsImageIcon?(Object(E["openBlock"])(),Object(E["createElementBlock"])("a",{key:4,class:"dataTableAction tableIcon",href:"",id:"dataTableFooterExportAsImageIcon",onClick:t[3]||(t[3]=Object(E["withModifiers"])(t=>e.showExportImage(t),["prevent"])),title:e.translate("General_ExportAsImage"),style:{"margin-right":"3.5px"}},al,8,il)):Object(E["createCommentVNode"])("",!0),e.showAnnotations?(Object(E["openBlock"])(),Object(E["createElementBlock"])("a",{key:5,class:"dataTableAction annotationView",href:"",title:e.translate("Annotations_Annotations"),onClick:t[4]||(t[4]=Object(E["withModifiers"])(()=>{},["prevent"])),style:{"margin-right":"3.5px"}},ll,8,rl)):Object(E["createCommentVNode"])("",!0),e.showSearch?(Object(E["openBlock"])(),Object(E["createElementBlock"])("a",{key:6,class:"dropdown-button dataTableAction searchAction",href:"",title:e.translate("General_Search"),style:{"margin-right":"3.5px"},draggable:"false",onClick:t[5]||(t[5]=Object(E["withModifiers"])(()=>{},["prevent"]))},[dl,Object(E["createElementVNode"])("span",{class:"icon-close",draggable:"false",title:e.translate("CoreHome_CloseSearch")},null,8,ul),Object(E["createElementVNode"])("input",{id:`widgetSearch_${e.reportId}_${e.placement}`,title:e.translate("CoreHome_DataTableHowToSearch"),type:"text",class:"dataTableSearchInput"},null,8,ml)],8,cl)):Object(E["createCommentVNode"])("",!0),(Object(E["openBlock"])(!0),Object(E["createElementBlock"])(E["Fragment"],null,Object(E["renderList"])(e.dataTableActions,e=>(Object(E["openBlock"])(),Object(E["createElementBlock"])("a",{key:e.id,class:Object(E["normalizeClass"])("dataTableAction "+e.id),href:"",onClick:t[6]||(t[6]=Object(E["withModifiers"])(()=>{},["prevent"])),title:e.title,style:{"margin-right":"3.5px"}},[/^icon-/.test(e.icon||"")?(Object(E["openBlock"])(),Object(E["createElementBlock"])("span",{key:0,class:Object(E["normalizeClass"])(e.icon)},null,2)):(Object(E["openBlock"])(),Object(E["createElementBlock"])("img",{key:1,width:"16",height:"16",title:e.title,src:e.icon},null,8,hl))],10,pl))),128)),Object(E["createElementVNode"])("ul",{id:"dropdownConfigure"+e.randomIdForDropdown,class:"dropdown-content tableConfiguration"},[e.showFlattenTable?(Object(E["openBlock"])(),Object(E["createElementBlock"])("li",bl,[Object(E["createElementVNode"])("div",{class:"configItem dataTableFlatten",innerHTML:e.$sanitize(e.flattenItemText)},null,8,fl)])):Object(E["createCommentVNode"])("",!0),e.showDimensionsConfigItem?(Object(E["openBlock"])(),Object(E["createElementBlock"])("li",vl,[Object(E["createElementVNode"])("div",{class:"configItem dataTableShowDimensions",innerHTML:e.$sanitize(e.showDimensionsText)},null,8,Ol)])):Object(E["createCommentVNode"])("",!0),e.showFlatConfigItem?(Object(E["openBlock"])(),Object(E["createElementBlock"])("li",jl,[Object(E["createElementVNode"])("div",{class:"configItem dataTableIncludeAggregateRows",innerHTML:e.$sanitize(e.includeAggregateRowsText)},null,8,yl)])):Object(E["createCommentVNode"])("",!0),e.showTotalsConfigItem?(Object(E["openBlock"])(),Object(E["createElementBlock"])("li",wl,[Object(E["createElementVNode"])("div",{class:"configItem dataTableShowTotalsRow",innerHTML:e.$sanitize(e.keepTotalsRowText)},null,8,kl)])):Object(E["createCommentVNode"])("",!0),e.showExcludeLowPopulation?(Object(E["openBlock"])(),Object(E["createElementBlock"])("li",Sl,[Object(E["createElementVNode"])("div",{class:"configItem dataTableExcludeLowPopulation",innerHTML:e.$sanitize(e.excludeLowPopText)},null,8,Cl)])):Object(E["createCommentVNode"])("",!0),e.showPivotBySubtable?(Object(E["openBlock"])(),Object(E["createElementBlock"])("li",El,[Object(E["createElementVNode"])("div",{class:"configItem dataTablePivotBySubtable",innerHTML:e.$sanitize(e.pivotByText)},null,8,Dl)])):Object(E["createCommentVNode"])("",!0)],8,gl),e.showPeriods?Object(E["withDirectives"])((Object(E["openBlock"])(),Object(E["createElementBlock"])("a",{key:7,class:"dropdown-button dataTableAction activatePeriodsSelection",href:"",onClick:t[7]||(t[7]=Object(E["withModifiers"])(()=>{},["prevent"])),title:e.translate("CoreHome_ChangePeriod"),"data-target":"dropdownPeriods"+e.randomIdForDropdown},[Object(E["createElementVNode"])("div",null,[Tl,Object(E["createElementVNode"])("span",Vl,Object(E["toDisplayString"])(e.translations[e.clientSideParameters.period]||e.clientSideParameters.period),1)])],8,Pl)),[[s]]):Object(E["createCommentVNode"])("",!0),e.showPeriods?(Object(E["openBlock"])(),Object(E["createElementBlock"])("ul",{key:8,id:"dropdownPeriods"+e.randomIdForDropdown,class:"dropdown-content dataTablePeriods"},[(Object(E["openBlock"])(!0),Object(E["createElementBlock"])(E["Fragment"],null,Object(E["renderList"])(e.selectablePeriods,t=>(Object(E["openBlock"])(),Object(E["createElementBlock"])("li",{key:t},[Object(E["createElementVNode"])("a",{"data-period":t,class:Object(E["normalizeClass"])("tableIcon "+(e.clientSideParameters.period===t?"activeIcon":""))},[Object(E["createElementVNode"])("span",null,Object(E["toDisplayString"])(e.translations[t]||t),1)],10,xl)]))),128))],8,Nl)):Object(E["createCommentVNode"])("",!0)])):Object(E["createCommentVNode"])("",!0)}const{$:Il}=window;function Ml(e,t,o){if(/(%(.\$)?s+)/g.test(a(e))){const i=['<br /><span class="action">'];o&&i.push(o);let n=a(e,...i);return t&&(n+=` (${a("CoreHome_Default")})`),n+="</span>",n}return a(e)}function Ll(e,t,o){return e?Ml(t,!0):Ml(o)}function Fl(e){return!!e&&"0"!==e}var Al=Object(E["defineComponent"])({props:{showPeriods:Boolean,showFooter:Boolean,showFooterIcons:Boolean,showSearch:Boolean,showFlattenTable:Boolean,footerIcons:{type:Array,required:!0},viewDataTable:{type:String,required:!0},reportTitle:String,requestParams:{type:Object,required:!0},apiMethodToRequestDataTable:{type:String,required:!0},maxFilterLimit:{type:Number,required:!0},showExport:Boolean,showExportAsImageIcon:Boolean,showAnnotations:Boolean,reportId:{type:String,required:!0},dataTableActions:{type:Array,required:!0},clientSideParameters:{type:Object,required:!0},hasMultipleDimensions:Boolean,isDataTableEmpty:Boolean,showTotalsRow:Boolean,showExcludeLowPopulation:Boolean,showPivotBySubtable:Boolean,selectablePeriods:Array,translations:{type:Object,required:!0},pivotDimensionName:String,placement:{type:String,default:"footer"}},components:{Passthrough:_s},directives:{DropdownButton:yt,ReportExport:vs},methods:{showExportImage(e){Il(e.target).closest(".dataTable").find("div.jqplot-target").trigger("piwikExportAsImage")}},computed:{randomIdForDropdown(){return Math.floor(999999*Math.random())},allFooterIcons(){return this.footerIcons.reduce((e,t)=>(e.push(...t.buttons),e),[])},activeFooterIcons(){const e=this.clientSideParameters,t=[this.viewDataTable];return 0===e.abandonedCarts||"0"===e.abandonedCarts?t.push("ecommerceOrder"):1!==e.abandonedCarts&&"1"!==e.abandonedCarts||t.push("ecommerceAbandonedCart"),t.map(e=>this.allFooterIcons.find(t=>t.id===e)).filter(e=>!!e)},activeFooterIcon(){var e;return null===(e=this.activeFooterIcons[0])||void 0===e?void 0:e.icon},activeFooterIconIds(){return this.activeFooterIcons.map(e=>e.id)},numIcons(){return this.allFooterIcons.length},hasFooterIconsToShow(){return!!this.activeFooterIcons.length&&this.numIcons>1},reportFormats(){const e={CSV:"CSV",TSV:"TSV (Excel)",XML:"XML",JSON:"Json",HTML:"HTML",RSS:"RSS"};return e},showDimensionsConfigItem(){return this.showFlattenTable&&""+this.clientSideParameters.flat==="1"&&this.hasMultipleDimensions},showFlatConfigItem(){return this.showFlattenTable&&""+this.clientSideParameters.flat==="1"},showTotalsConfigItem(){return!this.isDataTableEmpty&&this.showTotalsRow},hasConfigItems(){return this.showFlattenTable||this.showDimensionsConfigItem||this.showFlatConfigItem||this.showTotalsConfigItem||this.showExcludeLowPopulation||this.showPivotBySubtable},flattenItemText(){const e=this.clientSideParameters;return Ll(Fl(e.flat),"CoreHome_UnFlattenDataTable","CoreHome_FlattenDataTable")},keepTotalsRowText(){const e=this.clientSideParameters;return Ll(Fl(e.keep_totals_row),"CoreHome_RemoveTotalsRowDataTable","CoreHome_AddTotalsRowDataTable")},includeAggregateRowsText(){const e=this.clientSideParameters;return Ll(Fl(e.include_aggregate_rows),"CoreHome_DataTableExcludeAggregateRows","CoreHome_DataTableIncludeAggregateRows")},showDimensionsText(){const e=this.clientSideParameters;return Ll(Fl(e.show_dimensions),"CoreHome_DataTableCombineDimensions","CoreHome_DataTableShowDimensions")},pivotByText(){const e=this.clientSideParameters;return Fl(e.pivotBy)?Ml("CoreHome_UndoPivotBySubtable",!0):Ml("CoreHome_PivotBySubtable",!1,this.pivotDimensionName)},excludeLowPopText(){const e=this.clientSideParameters;return Ll(Fl(e.enable_filter_excludelowpop),"CoreHome_IncludeRowsWithLowPopulation","CoreHome_ExcludeRowsWithLowPopulation")},isAnyConfigureIconHighlighted(){const e=this.clientSideParameters;return Fl(e.flat)||Fl(e.keep_totals_row)||Fl(e.include_aggregate_rows)||Fl(e.show_dimensions)||Fl(e.pivotBy)||Fl(e.enable_filter_excludelowpop)},isTableView(){return"table"===this.viewDataTable||"tableAllColumns"===this.viewDataTable||"tableGoals"===this.viewDataTable}}});Al.render=Bl;var _l=Al;const Rl={key:0,class:"title",style:{cursor:"pointer"},ref:"expander"},Hl=Object(E["createElementVNode"])("span",{class:"icon-warning"},null,-1),$l={key:1,class:"title",href:"?module=CoreUpdater&action=newVersionAvailable",style:{cursor:"pointer"},ref:"expander"},Ul=Object(E["createElementVNode"])("span",{class:"icon-warning"},null,-1),ql=["innerHTML"],Wl=["href"],zl={id:"updateCheckLinkContainer"},Gl={class:"dropdown positionInViewport"},Yl=["innerHTML"],Jl=["innerHTML"];function Kl(e,t,o,i,n,a){const r=Object(E["resolveComponent"])("Passthrough"),s=Object(E["resolveDirective"])("expand-on-hover");return Object(E["withDirectives"])((Object(E["openBlock"])(),Object(E["createElementBlock"])("div",{id:"header_message",class:Object(E["normalizeClass"])(["piwikSelector",{header_info:!e.latestVersionAvailable||e.lastUpdateCheckFailed,update_available:e.latestVersionAvailable}])},[e.latestVersionAvailable&&!e.isPiwikDemo?(Object(E["openBlock"])(),Object(E["createBlock"])(r,{key:0},{default:Object(E["withCtx"])(()=>[e.isMultiServerEnvironment?(Object(E["openBlock"])(),Object(E["createElementBlock"])("span",Rl,[Object(E["createTextVNode"])(Object(E["toDisplayString"])(e.translate("General_NewUpdatePiwikX",e.latestVersionAvailable))+" ",1),Hl],512)):(Object(E["openBlock"])(),Object(E["createElementBlock"])("a",$l,[Object(E["createTextVNode"])(Object(E["toDisplayString"])(e.translate("General_NewUpdatePiwikX",e.latestVersionAvailable))+" ",1),Ul],512))]),_:1})):e.isSuperUser&&(e.isAdminArea||e.lastUpdateCheckFailed)?(Object(E["openBlock"])(),Object(E["createBlock"])(r,{key:1},{default:Object(E["withCtx"])(()=>[e.isInternetEnabled?(Object(E["openBlock"])(),Object(E["createElementBlock"])("a",{key:0,class:"title",innerHTML:e.$sanitize(e.updateCheck)},null,8,ql)):(Object(E["openBlock"])(),Object(E["createElementBlock"])("a",{key:1,class:"title",href:e.externalRawLink("https://matomo.org/changelog/"),target:"_blank",rel:"noreferrer noopener"},[Object(E["createElementVNode"])("span",zl,Object(E["toDisplayString"])(e.translate("CoreHome_SeeAvailableVersions")),1)],8,Wl))]),_:1})):Object(E["createCommentVNode"])("",!0),Object(E["createElementVNode"])("div",Gl,[e.latestVersionAvailable&&e.isSuperUser?(Object(E["openBlock"])(),Object(E["createElementBlock"])("span",{key:0,innerHTML:e.$sanitize(e.updateNowText)},null,8,Yl)):e.latestVersionAvailable&&!e.isPiwikDemo&&e.hasSomeViewAccess&&!e.isAnonymous?(Object(E["openBlock"])(),Object(E["createElementBlock"])("span",{key:1,innerHTML:e.$sanitize(e.updateAvailableText)},null,8,Jl)):Object(E["createCommentVNode"])("",!0),Object(E["createTextVNode"])(" "+Object(E["toDisplayString"])(e.translate("General_YouAreCurrentlyUsing",e.piwikVersion)),1)])],2)),[[s,{expander:"expander"}]])}var Ql=Object(E["defineComponent"])({props:{isMultiServerEnvironment:Boolean,lastUpdateCheckFailed:Boolean,latestVersionAvailable:String,isPiwikDemo:Boolean,isSuperUser:Boolean,isAdminArea:Boolean,isInternetEnabled:Boolean,updateCheck:String,isAnonymous:Boolean,hasSomeViewAccess:Boolean,contactEmail:String,piwikVersion:String},components:{Passthrough:_s},directives:{ExpandOnHover:ft},computed:{updateNowText(){let e="";if(this.isMultiServerEnvironment){const t=ie(`https://builds.matomo.org/matomo-${this.latestVersionAvailable}.zip`);e=a("CoreHome_OneClickUpdateNotPossibleAsMultiServerEnvironment",`<a rel="noreferrer noopener" href="${t}">builds.matomo.org</a>`)}else e=a("General_PiwikXIsAvailablePleaseUpdateNow",this.latestVersionAvailable||"",'<br /><a href="index.php?module=CoreUpdater&amp;action=newVersionAvailable">',"</a>",ne("https://matomo.org/changelog/"),"</a>");return e+"<br/>"},updateAvailableText(){const e=a("General_NewUpdatePiwikX",this.latestVersionAvailable||""),t=ne("https://matomo.org/")+"Matomo</a>",o=ne("https://matomo.org/changelog/"),i=a("General_PiwikXIsAvailablePleaseNotifyPiwikAdmin",`${t} ${o}${this.latestVersionAvailable}</a>`,`<a href="mailto:${this.contactEmail}?subject=${encodeURIComponent(e)}">`,"</a>");return i+"<br />"}}});Ql.render=Kl;var Xl=Ql;const Zl={id:"mobile-left-menu",class:"sidenav hide-on-large-only"},ec={class:"collapsible collapsible-accordion"},tc={class:"collapsible-header"},oc={class:"collapsible-body"},ic=["title","href"];function nc(e,t,o,i,n,a){const r=Object(E["resolveDirective"])("side-nav");return Object(E["openBlock"])(),Object(E["createElementBlock"])("ul",Zl,[(Object(E["openBlock"])(!0),Object(E["createElementBlock"])(E["Fragment"],null,Object(E["renderList"])(e.menuWithSubmenuItems,(t,o)=>(Object(E["openBlock"])(),Object(E["createElementBlock"])("li",{class:"no-padding",key:o},[Object(E["withDirectives"])((Object(E["openBlock"])(),Object(E["createElementBlock"])("ul",ec,[Object(E["createElementVNode"])("li",null,[Object(E["createElementVNode"])("a",tc,[Object(E["createTextVNode"])(Object(E["toDisplayString"])(e.translateOrDefault(o)),1),Object(E["createElementVNode"])("i",{class:Object(E["normalizeClass"])(t._icon||"icon-chevron-down")},null,2)]),Object(E["createElementVNode"])("div",oc,[Object(E["createElementVNode"])("ul",null,[(Object(E["openBlock"])(!0),Object(E["createElementBlock"])(E["Fragment"],null,Object(E["renderList"])(Object.entries(t).filter(([e])=>"_"!==e[0]),([t,o])=>(Object(E["openBlock"])(),Object(E["createElementBlock"])("li",{key:t},[Object(E["createElementVNode"])("a",{title:o._tooltip?e.translateIfNecessary(o._tooltip):"",target:"_self",href:e.getMenuUrl(o._url)},Object(E["toDisplayString"])(e.translateIfNecessary(t)),9,ic)]))),128))])])])])),[[r,{activator:e.activateLeftMenu}]])]))),128))])}const{$:ac}=window;var rc=Object(E["defineComponent"])({props:{menu:{type:Object,required:!0}},directives:{SideNav:Vt},methods:{getMenuUrl(e){return"?"+_.stringify(Object.assign(Object.assign({},_.urlParsed.value),e))},translateIfNecessary(e){return e.includes("_")?a(e):e}},computed:{menuWithSubmenuItems(){const e=this.menu||{};return Object.fromEntries(Object.entries(e).filter(([,e])=>{const t=Object.entries(e).filter(([e])=>"_"!==e[0]);return Object.keys(t).length}))},activateLeftMenu(){return ac("nav .activateLeftMenu")[0]}}});rc.render=nc;var sc=rc;
/*!
 * Matomo - free/libre analytics platform
 *
 * @link    https://matomo.org
 * @license https://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */const{$:lc}=window;function cc(e){lc.scrollTo(e,20)}function dc(e){e&&e.preventDefault()}function uc(e,t){var o,i;if(!e)return;if(-1!==e.indexOf("&"))return;let n=null;try{n=lc("#"+e)}catch(a){return}if(null!==(o=n)&&void 0!==o&&o.length)return cc(n),void dc(t);n=lc(`a[name=${e}]`),null!==(i=n)&&void 0!==i&&i.length&&(cc(n),dc(t))}function mc(e,t){return(!e||!e.origin||-1!==t.indexOf(e.origin))&&((!e||!e.pathname||-1!==t.indexOf(e.pathname))&&(!e||!e.search||-1!==t.indexOf(e.search)))}function pc(){if("#/"===window.location.hash.slice(0,2)){const e=window.location.hash.slice(2);uc(e,null)}}function hc(){Object(E["watch"])(()=>_.url.value,(e,t)=>{if(!e)return;const o=e.href.indexOf("#/");if(-1===o)return;if(t&&!mc(t,e.href))return;const i=e.href.slice(o+2);uc(i,null)})}function gc(){Object(E["nextTick"])(pc)}
/*!
 * Matomo - free/libre analytics platform
 *
 * @link    https://matomo.org
 * @license https://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */function bc(e){const t=[];if("INPUT"===e.tagName&&"password"===e.type)t.push(e);else{const o=e.querySelectorAll('input[type="password"]');o.forEach(e=>t.push(e))}return t}function fc(e,t){let o,i=e.value;const n=()=>{e.value="",e.dispatchEvent(new Event("input"))},a=()=>{o&&clearTimeout(o),o=setTimeout(n,1e3*t)},r=()=>a(),s=()=>a();e.addEventListener("input",r),e.addEventListener("change",s),e.dataset.autoClearEnabled="true";const l=setInterval(()=>{e.value!==i&&(i=e.value,a())},300);e.onUmounted={cleanup(){clearTimeout(o),clearInterval(l),e.removeEventListener("input",r),e.removeEventListener("change",s),delete e.dataset.autoClearEnabled}}}hc(),lc(pc);var vc={mounted(e,t){const o=t.value&&t.value.delay||600,i=bc(e);i.forEach(e=>fc(e,o))},unmounted(e){const t=bc(e);t.forEach(e=>{e.onUmounted&&"function"===typeof e.onUmounted.cleanup&&(e.onUmounted.cleanup(),delete e.onUmounted)})}};const Oc={key:0,class:"password-strength row"};function jc(e,t,o,i,n,a){return e.rules.length?(Object(E["openBlock"])(),Object(E["createElementBlock"])("ul",Oc,[(Object(E["openBlock"])(!0),Object(E["createElementBlock"])(E["Fragment"],null,Object(E["renderList"])(e.rules,t=>(Object(E["openBlock"])(),Object(E["createElementBlock"])("li",{key:t.ruleText,class:Object(E["normalizeClass"])("col s12 xl6 rule rule-"+e.ruleStatus(t))},[Object(E["createElementVNode"])("span",{class:Object(E["normalizeClass"])({icon:!0,"icon-ok":"valid"===e.ruleStatus(t),"icon-close":"invalid"===e.ruleStatus(t),"icon-circle":"undefined"===e.ruleStatus(t)})},null,2),Object(E["createTextVNode"])(" "+Object(E["toDisplayString"])(t.ruleText),1)],2))),128))])):Object(E["createCommentVNode"])("",!0)}var yc=Object(E["defineComponent"])({props:{validationRules:{type:Array,required:!0},password:{type:String,default:""},externalInputSelector:{type:String,default:""}},data(){return{pwd:"",rules:[]}},emits:["check:isValid"],watch:{pwdValue:{immediate:!0,handler(e){const t=[];this.rules.forEach(o=>{if(e.length||"undefined"===typeof o.passed)try{const i=new RegExp(o.validationRegex.replace(/^\/|\/$/g,""));i.test(e)?(o.passed=!0,t.push(!0)):o.passed=!1}catch(i){console.log("Invalid password validation pattern:",i)}else delete o.passed}),this.rules.length>0&&t.length===this.rules.length&&this.$emit("check:isValid",!0)}}},computed:{pwdValue(){var e;return null!==(e=this.externalInputSelector)&&void 0!==e&&e.length?this.pwd:this.password}},mounted(){var e;if(this.rules=this.validationRules.length?this.validationRules.map(e=>Object.assign({},e)):[],null!==(e=this.externalInputSelector)&&void 0!==e&&e.length){const e=document.querySelector(this.externalInputSelector);e&&(e.addEventListener("input",this.handleExternalInput),this.pwd=e.value)}},unmounted(){var e;if(null!==(e=this.externalInputSelector)&&void 0!==e&&e.length){const e=document.querySelector(this.externalInputSelector);e&&e.removeEventListener("input",this.handleExternalInput)}},methods:{ruleStatus(e){return"undefined"===typeof e.passed?"undefined":e.passed?"valid":"invalid"},handleExternalInput(e){const t=e.target;this.pwd=t.value}}});yc.render=jc;var wc=yc;
/*!
 * Matomo - free/libre analytics platform
 *
 * @link    https://matomo.org
 * @license https://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */const kc={class:"main-duplicator-modal-content"},Sc={class:"modal-header"},Cc=Object(E["createElementVNode"])("span",{class:"btn-close modal-close"},[Object(E["createElementVNode"])("i",{class:"icon-close"})],-1),Ec={key:0,class:"modal-sub-header"},Dc={class:"loading-message"},Pc={key:0,class:"modal-sub-header"},Tc=["innerHTML"],Vc={class:"modal-content"},Nc={class:"modal-inputs"},xc={class:"modal-sub-footer"},Bc=["innerHTML"],Ic=["innerHTML"],Mc={class:"modal-footer"},Lc=["disabled"];function Fc(e,t,o,i,n,a){const r=Object(E["resolveComponent"])("MatomoLoader"),s=Object(E["resolveComponent"])("Field"),l=Object(E["resolveDirective"])("form");return Object(E["openBlock"])(),Object(E["createElementBlock"])("div",{class:Object(E["normalizeClass"])({modal:!0,"entity-duplicator-modal":!0,"slot-configured":e.$slots.default}),ref:"root"},[Object(E["withDirectives"])(Object(E["createElementVNode"])("div",kc,[Object(E["createElementVNode"])("div",Sc,[Cc,Object(E["createElementVNode"])("h2",null,Object(E["toDisplayString"])(e.getModalTitle),1)]),e.isLoading?(Object(E["openBlock"])(),Object(E["createElementBlock"])("div",Ec,[Object(E["createVNode"])(r),Object(E["createElementVNode"])("span",Dc,Object(E["toDisplayString"])(e.translate("General_Loading")),1)])):(Object(E["openBlock"])(),Object(E["createElementBlock"])(E["Fragment"],{key:1},[e.hideSiteSelector?Object(E["createCommentVNode"])("",!0):(Object(E["openBlock"])(),Object(E["createElementBlock"])("div",Pc,[Object(E["createElementVNode"])("p",null,[Object(E["createTextVNode"])(Object(E["toDisplayString"])(e.getDuplicateDescription)+" ",1),e.descriptionLearnMoreLink?(Object(E["openBlock"])(),Object(E["createElementBlock"])("span",{key:0,innerHTML:e.$sanitize(e.getLearnMoreLink)},null,8,Tc)):Object(E["createCommentVNode"])("",!0)]),Object(E["createVNode"])(s,{uicontrol:"site",name:"siteSelector",title:e.translate("CoreHome_ChooseWebsite"),modelValue:e.destinationSite,"onUpdate:modelValue":t[0]||(t[0]=t=>e.destinationSite=t),"ui-control-attributes":{onlySitesWithAtLeastWriteAccess:!0,siteTypesToExclude:["rollup"]}},null,8,["title","modelValue"])])),Object(E["createElementVNode"])("div",Vc,[Object(E["withDirectives"])((Object(E["openBlock"])(),Object(E["createElementBlock"])("div",Nc,[Object(E["renderSlot"])(e.$slots,"default")])),[[l]])]),Object(E["createElementVNode"])("div",xc,[e.duplicationErrors.length>0?(Object(E["openBlock"])(),Object(E["createElementBlock"])("div",{key:0,class:Object(E["normalizeClass"])({alert:!0,"alert-danger":!0,"error-list":e.duplicationErrors.length>1})},[Object(E["createElementVNode"])("ul",null,[(Object(E["openBlock"])(!0),Object(E["createElementBlock"])(E["Fragment"],null,Object(E["renderList"])(e.duplicationErrors,(t,o)=>(Object(E["openBlock"])(),Object(E["createElementBlock"])("li",{key:o,innerHTML:e.$sanitize(t)},null,8,Bc))),128))])],2)):Object(E["createCommentVNode"])("",!0),Object(E["createElementVNode"])("p",{class:"note-text",innerHTML:e.$sanitize(e.getNoteText)},null,8,Ic)]),Object(E["createElementVNode"])("div",Mc,[Object(E["withDirectives"])(Object(E["createVNode"])(r,null,null,512),[[E["vShow"],e.hasBeenSubmitted]]),Object(E["createElementVNode"])("button",{class:"btn",disabled:!e.getIsValid||e.hasBeenSubmitted,onClick:t[1]||(t[1]=t=>e.submitRequest())},Object(E["toDisplayString"])(e.translate("General_Copy")),9,Lc)])],64))],512),[[E["vShow"],e.isModalVisible]])],2)}const Ac=be("CorePluginsAdmin","Field"),_c=be("CorePluginsAdmin","Form"),{$:Rc}=window;var Hc=Object(E["defineComponent"])({directives:{Form:_c},components:{MatomoLoader:Me,Field:Ac},props:{modalStore:{type:Object,required:!0},hideSiteSelector:{type:Boolean,default:!1},descriptionLearnMoreLink:{type:String,default:""}},data(){return{isLoading:!0,isValidated:!1,duplicationErrors:[],destinationSite:null,hasBeenSubmitted:!1}},watch:{isModalVisible(e){if(!e)return;let t;this.modalStore.adapter.beforeShowModal&&(t=this.modalStore.adapter.beforeShowModal()),t&&"undefined"!==typeof t||(t=new Promise(e=>e())),this.showModal(),t.then(()=>{this.isLoading=!1})},destinationSite(){this.isValidated=!1}},methods:{closeModal(){const e=this.$refs.root,t=Rc(e);t.modal("close")},resetModal(){this.modalStore.hideModal(),this.destinationSite=null,this.isLoading=!0,this.isValidated=!1,this.duplicationErrors=[],this.hasBeenSubmitted=!1},showModal(){const e=this.$refs.root,t=Rc(e);t.modal({dismissible:!0,onCloseEnd:()=>{this.resetModal()}}).modal("open")},submitRequest(){this.hasBeenSubmitted=!0,this.getValidationResultPromise().then(e=>{var t;if(!e.isValid&&e.errorMessages.length>0)return this.isValidated=!0,this.hasBeenSubmitted=!1,void(this.duplicationErrors=e.errorMessages);const o=this.modalStore.adapter.prepareApiParams(this.modalStore.getFormValues(null===(t=this.destinationSite)||void 0===t?void 0:t.id));this.modalStore.adapter.submitRequest(o).then(e=>{e&&e.success?(this.modalStore.adapter.onSuccess&&this.modalStore.adapter.onSuccess(e),this.closeModal()):this.setErrorMessages(e)}).catch(e=>{this.setErrorMessages(),this.modalStore.adapter.onFailure&&this.modalStore.adapter.onFailure(e),console.log("Unexpected server error during request.",e)}).finally(()=>{this.hasBeenSubmitted=!1})})},getValidationResultPromise(){var e;this.duplicationErrors=[];const t=this.modalStore.adapter.validateFormFields(this.modalStore.getFormValues(null===(e=this.destinationSite)||void 0===e?void 0:e.id));return"isValid"in t?new Promise(e=>e(t)):t},setErrorMessages(e=null){let t=(null===e||void 0===e?void 0:e.message)||"";t&&0!==t.length||(t=a("General_ErrorRequest","","")),this.duplicationErrors=[],this.duplicationErrors.push(t)}},mounted(){Object(E["watch"])(()=>this.modalStore.state.entityFormData,()=>{this.isValidated=!1},{deep:!0})},computed:{isModalVisible(){var e;return null!==(e=this.modalStore.state.isModalVisible)&&void 0!==e&&e},getModalTitle(){return a("CoreHome_CopyX",this.modalStore.getEntityTypeTranslation)},getNoteText(){const e=a("CoreHome_CopyModalNote","<strong>","</strong>",this.modalStore.getEntityTypeTranslation);return""+e},getDuplicateDescription(){return a("CoreHome_CopyXDescription",this.modalStore.getEntityTypeTranslation)},getLearnMoreLink(){if(!this.descriptionLearnMoreLink)return"";const e=ne(this.descriptionLearnMoreLink);return a("CoreHome_LearnMoreFullStop",e,"</a>")},getIsValid(){return!this.isValidated||Array.isArray(this.duplicationErrors)&&0===this.duplicationErrors.length}}});Hc.render=Fc;var $c=Hc;const Uc=["title","aria-disabled"];function qc(e,t,o,i,n,a){const r=Object(E["resolveDirective"])("tooltips");return Object(E["withDirectives"])((Object(E["openBlock"])(),Object(E["createElementBlock"])("a",{class:Object(E["normalizeClass"])([{"entity-duplicator-action":!0,"table-action":!0,"icon-content-copy":!0,"is-disabled":!e.isActionEnabled},e.extraClasses]),title:e.getActionTooltip,"aria-disabled":!e.isActionEnabled,onClick:t[0]||(t[0]=t=>!e.isActionEnabled||e.handleClick())},null,10,Uc)),[[r],[E["vShow"],e.isActionVisible]])}var Wc=Object(E["defineComponent"])({props:{actionFormData:{type:Object,required:!0},modalStore:{type:Object,required:!0},isActionVisible:{type:Boolean,required:!0},isActionEnabled:{type:Boolean,default:!1},tooltipTextOverride:{type:String,default:""},tooltipTextOverrideDisabled:{type:String,default:""},extraClasses:{type:[String,Array,Object],default:""}},directives:{Tooltips:Ze},methods:{handleClick(){this.modalStore.showModal(this.actionFormData)}},computed:{getActionTooltip(){return this.isActionEnabled&&this.tooltipTextOverride.length?r(this.tooltipTextOverride):!this.isActionEnabled&&this.tooltipTextOverrideDisabled.length?r(this.tooltipTextOverrideDisabled):a("CoreHome_CopyX",this.modalStore.getEntityTypeTranslation)}}});Wc.render=qc;var zc=Wc;function Gc(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}
/*!
 * Matomo - free/libre analytics platform
 *
 * @link    https://matomo.org
 * @license https://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */class Yc{constructor(e){Gc(this,"module",void 0),Gc(this,"method",void 0),Gc(this,"format",void 0),Gc(this,"requiredFields",void 0),this.module=e.module||"API",this.method=e.method,this.format=e.format||"json",this.requiredFields=e.requiredFields||["idSite","idDestinationSites"]}async validateFormFields(e){const t=[];return this.requiredFields.forEach(o=>{o in e&&e[o]||t.push(a("General_Required",o))}),new Promise(e=>e({errorMessages:t,isValid:0===t.length}))}prepareApiParams(e){return Object.assign({idSite:x.idSite||_.parsed.value.idSite,idDestinationSites:[e.idDestinationSite]},e)}async submitRequest(e){this.module=e.module||this.module,this.method=e.method||this.method,this.format=e.format||this.format;const t=e;if(!this.method||this.method.length<1)throw new Error("The POST method cannot be empty!");const o=new W;return o.useCallbackInCaseOfError(),o.setErrorCallback(null),o.removeDefaultParameter("date"),o.removeDefaultParameter("period"),o.removeDefaultParameter("segment"),o.addParams({module:this.module,method:this.method,format:this.format},"GET"),o.addParams(t,"POST"),o.setFormat(this.format),o.send()}onSuccess(e){let t=new Promise(e=>e());this.onSuccessCallback&&(t=this.onSuccessCallback(e)),t.then(()=>{setTimeout(()=>{const t=wi.show({message:e.message,context:e.success?"success":"error",type:"toast",id:"entityDuplicationResult"});wi.scrollToNotification(t)})})}}function Jc(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}
/*!
 * Matomo - free/libre analytics platform
 *
 * @link    https://matomo.org
 * @license https://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */class Kc{constructor(e,t,o){Jc(this,"state",Object(E["reactive"])({isModalVisible:!1,commonFormData:{},entityFormData:{},entityTypeTranslation:""})),Jc(this,"adapter",void 0),this.state.entityTypeTranslation=e,this.adapter="validateFormFields"in t?t:new Yc(t),this.state.commonFormData=null!==o&&void 0!==o?o:{}}static buildStoreInstance(e,t,o){return Object(E["reactive"])(new Kc(e,t,o))}showModal(e){this.resetFormData(),Object.entries(null!==e&&void 0!==e?e:{}).forEach(([e,t])=>{this.state.entityFormData[e]=t}),this.state.isModalVisible=!0}hideModal(){this.state.isModalVisible=!1,this.resetFormData()}resetFormData(){Object.keys(this.state.entityFormData).forEach(e=>{delete this.state.entityFormData[e]})}getFormValues(e){const t=Array.isArray(e)?e:[];return e&&!Array.isArray(e)&&t.push(e),Object.assign(Object.assign({idSite:x.idSite||_.parsed.value.idSite,idDestinationSites:t},this.state.commonFormData),this.state.entityFormData)}get getEntityTypeTranslation(){let e="CoreHome_ReportLowercase";return this.state.entityTypeTranslation&&(e=this.state.entityTypeTranslation),r(e)}}
/*!
 * Matomo - free/libre analytics platform
 *
 * @link    https://matomo.org
 * @license https://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */}})}));
//# sourceMappingURL=CoreHome.umd.min.js.map