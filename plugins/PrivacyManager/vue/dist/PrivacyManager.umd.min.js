(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t(require("CoreHome"),require("vue"),require("CorePluginsAdmin"),require("SegmentEditor")):"function"===typeof define&&define.amd?define(["CoreHome",,"CorePluginsAdmin","SegmentEditor"],t):"object"===typeof exports?exports["PrivacyManager"]=t(require("CoreHome"),require("vue"),require("CorePluginsAdmin"),require("SegmentEditor")):e["PrivacyManager"]=t(e["CoreHome"],e["Vue"],e["CorePluginsAdmin"],e["SegmentEditor"])})("undefined"!==typeof self?self:this,(function(e,t,n,a){return function(e){var t={};function n(a){if(t[a])return t[a].exports;var o=t[a]={i:a,l:!1,exports:{}};return e[a].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(a,o,function(t){return e[t]}.bind(null,o));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="plugins/PrivacyManager/vue/dist/",n(n.s="fae3")}({"19dc":function(t,n){t.exports=e},"8bbf":function(e,n){e.exports=t},a5a2:function(e,t){e.exports=n},f06f:function(e,t){e.exports=a},fae3:function(e,t,n){"use strict";if(n.r(t),n.d(t,"ManageGdpr",(function(){return le})),n.d(t,"AnonymizeIp",(function(){return he})),n.d(t,"OptOutCustomizer",(function(){return Ke})),n.d(t,"AnonymizeLogData",(function(){return Mt})),n.d(t,"DoNotTrackPreference",(function(){return Tt})),n.d(t,"ReportDeletionSettings",(function(){return Ft})),n.d(t,"DeleteOldLogs",(function(){return Jt})),n.d(t,"DeleteOldReports",(function(){return sn})),n.d(t,"ScheduleReportDeletion",(function(){return _n})),n.d(t,"AskingForConsent",(function(){return Jn})),n.d(t,"GdprOverview",(function(){return Va})),n.d(t,"PreviousAnonymizations",(function(){return La})),n.d(t,"PrivacySettings",(function(){return $a})),n.d(t,"UsersOptOut",(function(){return Xa})),"undefined"!==typeof window){var a=window.document.currentScript,o=a&&a.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);o&&(n.p=o[1])}var r=n("8bbf"),i={class:"manageGdpr"},l={class:"intro"},c=Object(r["createElementVNode"])("br",null,null,-1),s=Object(r["createElementVNode"])("br",null,null,-1),d=Object(r["createElementVNode"])("br",null,null,-1),u=Object(r["createElementVNode"])("br",null,null,-1),m=["innerHTML"],b={class:"form-group row"},p={class:"col s12 input-field"},g={for:"gdprsite",class:"siteSelectorLabel"},O={class:"sites_autocomplete"},j={key:0,class:"form-group row segmentFilterGroup"},v={class:"col s12"},h={style:{margin:"8px 0",display:"inline-block"}},f={key:2,class:"dataUnavailable system notification notification-icon\n      notification-info"},y=["innerHTML"],V={key:0,class:"system notification notification-icon\n      notification-info"},D={class:"notification-body"},N=["innerHTML"],S=Object(r["createElementVNode"])("br",null,null,-1),E=Object(r["createTextVNode"])(),C=Object(r["createElementVNode"])("br",null,null,-1),k=Object(r["createElementVNode"])("br",null,null,-1),_=Object(r["createElementVNode"])("br",null,null,-1),P={class:"checkInclude"},M={colspan:"8"},w=["title"],z={class:"checkInclude"},T=["title"],A={class:"visitId"},I={class:"visitorId"},L=["title","onClick"],B={class:"visitorIp"},x=["title","onClick"],F={class:"userId"},R=["title","onClick"],U=["title"],H=["src"],q=["title"],G=["src"],K=["title"],W=["src"],Y=["title"],J=["src"],Q=["onClick"],X=Object(r["createElementVNode"])("img",{src:"plugins/Live/images/visitorProfileLaunch.png",style:{"margin-right":"3.5px"}},null,-1),Z={class:"ui-confirm",id:"confirmDeleteDataSubject",ref:"confirmDeleteDataSubject"},ee=["value"],te=["value"];function ne(e,t,n,a,o,$){var ne=Object(r["resolveComponent"])("SiteSelector"),ae=Object(r["resolveComponent"])("SegmentGenerator"),oe=Object(r["resolveComponent"])("SaveButton"),re=Object(r["resolveComponent"])("ContentBlock"),ie=Object(r["resolveComponent"])("Field"),le=Object(r["resolveDirective"])("content-table");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",i,[Object(r["createVNode"])(re,{"content-title":e.translate("PrivacyManager_GdprTools")},{default:Object(r["withCtx"])((function(){return[Object(r["createElementVNode"])("div",l,[Object(r["createElementVNode"])("p",null,[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.translate("PrivacyManager_GdprToolsPageIntro1"))+" ",1),c,s,Object(r["createTextVNode"])(" "+Object(r["toDisplayString"])(e.translate("PrivacyManager_GdprToolsPageIntro2"))+" ",1),d]),Object(r["createElementVNode"])("ol",null,[Object(r["createElementVNode"])("li",null,Object(r["toDisplayString"])(e.translate("PrivacyManager_GdprToolsPageIntroAccessRight")),1),Object(r["createElementVNode"])("li",null,Object(r["toDisplayString"])(e.translate("PrivacyManager_GdprToolsPageIntroEraseRight")),1)]),Object(r["createElementVNode"])("p",null,[u,Object(r["createElementVNode"])("span",{innerHTML:e.$sanitize(e.overviewHintText)},null,8,m)])]),Object(r["createElementVNode"])("h3",null,Object(r["toDisplayString"])(e.translate("PrivacyManager_SearchForDataSubject")),1),Object(r["createElementVNode"])("div",b,[Object(r["createElementVNode"])("div",p,[Object(r["createElementVNode"])("div",null,[Object(r["createElementVNode"])("label",g,Object(r["toDisplayString"])(e.translate("PrivacyManager_SelectWebsite")),1),Object(r["createElementVNode"])("div",O,[Object(r["createVNode"])(ne,{id:"gdprsite",modelValue:e.site,"onUpdate:modelValue":[t[0]||(t[0]=function(t){return e.site=t}),t[1]||(t[1]=function(t){return e.changeSite(t)})],"show-all-sites-item":!0,"switch-site-on-select":!1,"show-selected-site":!0},null,8,["modelValue"])])])])]),e.isVisitorLogAndProfileEnabled?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",j,[Object(r["createElementVNode"])("div",v,[Object(r["createElementVNode"])("div",null,[Object(r["createElementVNode"])("label",h,Object(r["toDisplayString"])(e.translate("PrivacyManager_FindDataSubjectsBy")),1),Object(r["createElementVNode"])("div",null,[Object(r["createVNode"])(ae,{modelValue:e.segment_filter,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.segment_filter=t}),"visit-segments-only":!0,idsite:e.site.id,"show-segment-editor":!0},null,8,["modelValue","idsite"])])])])])):Object(r["createCommentVNode"])("",!0),e.isVisitorLogAndProfileEnabled?(Object(r["openBlock"])(),Object(r["createBlock"])(oe,{key:1,class:"findDataSubjects",value:e.translate("PrivacyManager_FindMatchingDataSubjects"),onConfirm:t[3]||(t[3]=function(t){return e.findDataSubjects()}),disabled:!e.segment_filter,saving:e.isLoading},null,8,["value","disabled","saving"])):(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",f,[Object(r["createElementVNode"])("strong",null,Object(r["toDisplayString"])(e.translate("PrivacyManager_SiteDataNotAvailable")),1),Object(r["createElementVNode"])("p",null,Object(r["toDisplayString"])(e.translate("PrivacyManager_VisitorLogsProfilesDisabledMessage")),1),Object(r["createElementVNode"])("p",{innerHTML:e.$sanitize(e.siteSettingsTextSingle)},null,8,y)]))]})),_:1},8,["content-title"]),e.allWebsitesContainsDisabledSite?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",V,[Object(r["createElementVNode"])("strong",null,Object(r["toDisplayString"])(e.translate("PrivacyManager_SiteDataNotAvailableCertainSites")),1),Object(r["createElementVNode"])("div",D,[Object(r["createElementVNode"])("p",null,Object(r["toDisplayString"])(e.translate("PrivacyManager_VisitorLogsProfilesSiteNamesDisabledMessage")),1),Object(r["createElementVNode"])("p",{innerHTML:e.$sanitize(e.siteSettingsText)},null,8,N)])])):Object(r["createCommentVNode"])("",!0),Object(r["withDirectives"])(Object(r["createElementVNode"])("div",null,[Object(r["createElementVNode"])("h2",null,Object(r["toDisplayString"])(e.translate("PrivacyManager_NoDataSubjectsFound")),1)],512),[[r["vShow"],!e.dataSubjects.length&&e.hasSearched]]),Object(r["withDirectives"])(Object(r["createElementVNode"])("div",null,[Object(r["createElementVNode"])("h2",null,Object(r["toDisplayString"])(e.translate("PrivacyManager_MatchingDataSubjects")),1),Object(r["createElementVNode"])("p",null,[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.translate("PrivacyManager_VisitsMatchedCriteria"))+" "+Object(r["toDisplayString"])(e.translate("PrivacyManager_ExportingNote"))+" ",1),S,E,C,Object(r["createTextVNode"])(" "+Object(r["toDisplayString"])(e.translate("PrivacyManager_DeletionFromMatomoOnly"))+" ",1),k,_,Object(r["createTextVNode"])(" "+Object(r["toDisplayString"])(e.translate("PrivacyManager_ResultIncludesAllVisits")),1)]),Object(r["withDirectives"])(Object(r["createElementVNode"])("table",null,[Object(r["createElementVNode"])("thead",null,[Object(r["createElementVNode"])("tr",null,[Object(r["createElementVNode"])("th",P,[Object(r["createElementVNode"])("div",null,[Object(r["createVNode"])(ie,{uicontrol:"checkbox",name:"activateAll","model-value":e.toggleAll,"onUpdate:modelValue":t[4]||(t[4]=function(t){e.toggleAll=t,e.toggleActivateAll()}),"full-width":!0},null,8,["model-value"])])]),Object(r["createElementVNode"])("th",null,Object(r["toDisplayString"])(e.translate("General_Website")),1),Object(r["createElementVNode"])("th",null,Object(r["toDisplayString"])(e.translate("General_VisitId")),1),Object(r["createElementVNode"])("th",null,Object(r["toDisplayString"])(e.translate("General_VisitorID")),1),Object(r["createElementVNode"])("th",null,Object(r["toDisplayString"])(e.translate("General_VisitorIP")),1),Object(r["createElementVNode"])("th",null,Object(r["toDisplayString"])(e.translate("General_UserId")),1),Object(r["createElementVNode"])("th",null,Object(r["toDisplayString"])(e.translate("General_Details")),1),Object(r["withDirectives"])(Object(r["createElementVNode"])("th",null,Object(r["toDisplayString"])(e.translate("General_Action")),513),[[r["vShow"],e.profileEnabled]])])]),Object(r["createElementVNode"])("tbody",null,[Object(r["withDirectives"])(Object(r["createElementVNode"])("tr",null,[Object(r["createElementVNode"])("td",M,Object(r["toDisplayString"])(e.translate("PrivacyManager_ResultTruncated","400")),1)],512),[[r["vShow"],e.dataSubjects.length>400]]),(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(e.dataSubjects,(function(t,n){return Object(r["openBlock"])(),Object(r["createElementBlock"])("tr",{title:"".concat(e.translate("PrivacyManager_LastAction"),": ").concat(t.lastActionDateTime),key:n},[Object(r["createElementVNode"])("td",z,[Object(r["createElementVNode"])("div",null,[Object(r["createVNode"])(ie,{uicontrol:"checkbox",name:"subject".concat(t.idVisit),modelValue:e.dataSubjectsActive[n],"onUpdate:modelValue":function(t){return e.dataSubjectsActive[n]=t},"full-width":!0},null,8,["name","modelValue","onUpdate:modelValue"])])]),Object(r["createElementVNode"])("td",{class:"site",title:"(".concat(e.translate("General_Id")," ").concat(t.idSite,")")},Object(r["toDisplayString"])(t.siteName),9,T),Object(r["createElementVNode"])("td",A,Object(r["toDisplayString"])(t.idVisit),1),Object(r["createElementVNode"])("td",I,[Object(r["createElementVNode"])("a",{title:e.translate("PrivacyManager_AddVisitorIdToSearch"),onClick:function(n){return e.addFilter("visitorId",t.visitorId)}},Object(r["toDisplayString"])(t.visitorId),9,L)]),Object(r["createElementVNode"])("td",B,[Object(r["createElementVNode"])("a",{title:e.translate("PrivacyManager_AddVisitorIPToSearch"),onClick:function(n){return e.addFilter("visitIp",t.visitIp)}},Object(r["toDisplayString"])(t.visitIp),9,x)]),Object(r["createElementVNode"])("td",F,[Object(r["createElementVNode"])("a",{title:e.translate("PrivacyManager_AddUserIdToSearch"),onClick:function(n){return e.addFilter("userId",t.userId)}},Object(r["toDisplayString"])(t.userId),9,R)]),Object(r["createElementVNode"])("td",null,[Object(r["createElementVNode"])("span",{title:"".concat(t.deviceType," ").concat(t.deviceModel),style:{"margin-right":"3.5px"}},[Object(r["createElementVNode"])("img",{height:"16",src:t.deviceTypeIcon},null,8,H)],8,U),Object(r["createElementVNode"])("span",{title:t.operatingSystem,style:{"margin-right":"3.5px"}},[Object(r["createElementVNode"])("img",{height:"16",src:t.operatingSystemIcon},null,8,G)],8,q),Object(r["createElementVNode"])("span",{title:"".concat(t.browser," ").concat(t.browserFamilyDescription),style:{"margin-right":"3.5px"}},[Object(r["createElementVNode"])("img",{height:"16",src:t.browserIcon},null,8,W)],8,K),Object(r["createElementVNode"])("span",{title:"".concat(t.country," ").concat(t.region||"")},[Object(r["createElementVNode"])("img",{height:"16",src:t.countryFlag},null,8,J)],8,Y)]),Object(r["withDirectives"])(Object(r["createElementVNode"])("td",null,[Object(r["createElementVNode"])("a",{class:"visitorLogTooltip",title:"View visitor profile",onClick:function(n){return e.showProfile(t.visitorId,t.idSite)}},[X,Object(r["createElementVNode"])("span",null,Object(r["toDisplayString"])(e.translate("Live_ViewVisitorProfile")),1)],8,Q)],512),[[r["vShow"],e.profileEnabled]])],8,w)})),128))])],512),[[le]]),Object(r["createVNode"])(oe,{class:"exportDataSubjects",style:{"margin-right":"3.5px"},onConfirm:t[5]||(t[5]=function(t){return e.exportDataSubject()}),disabled:!e.hasActiveDataSubjects,value:e.translate("PrivacyManager_ExportSelectedVisits")},null,8,["disabled","value"]),Object(r["createVNode"])(oe,{class:"deleteDataSubjects",onConfirm:t[6]||(t[6]=function(t){return e.deleteDataSubject()}),disabled:!e.hasActiveDataSubjects||e.isDeleting,value:e.translate("PrivacyManager_DeleteSelectedVisits")},null,8,["disabled","value"])],512),[[r["vShow"],e.dataSubjects.length]]),Object(r["createElementVNode"])("div",Z,[Object(r["createElementVNode"])("h2",null,Object(r["toDisplayString"])(e.translate("PrivacyManager_DeleteVisitsConfirm")),1),Object(r["createElementVNode"])("input",{role:"yes",type:"button",value:e.translate("General_Yes")},null,8,ee),Object(r["createElementVNode"])("input",{role:"no",type:"button",value:e.translate("General_No")},null,8,te)],512)])}var ae=n("19dc"),oe=n("f06f"),re=n("a5a2"),ie=Object(r["defineComponent"])({components:{ContentBlock:ae["ContentBlock"],SiteSelector:ae["SiteSelector"],SegmentGenerator:oe["SegmentGenerator"],SaveButton:re["SaveButton"],Field:re["Field"]},directives:{ContentTable:ae["ContentTable"]},data:function(){return{isLoading:!1,isDeleting:!1,site:{id:"all",name:Object(ae["translate"])("UsersManager_AllWebsites")},segment_filter:"visitId==",dataSubjects:[],toggleAll:!0,hasSearched:!1,profileEnabled:ae["Matomo"].visitorProfileEnabled,dataSubjectsActive:[],isVisitorLogAndProfileEnabled:!0,allWebsitesContainsDisabledSite:!1}},created:function(){this.changeSite(this.site)},watch:{site:function(e){var t=this;"all"!==e.id?(this.allWebsitesContainsDisabledSite=!1,this.isLoading=!0,this.dataSubjects=[],this.hasSearched=!1,ae["AjaxHelper"].fetch({method:"Live.isVisitorProfileEnabled",idSite:e.id}).then((function(e){t.isVisitorLogAndProfileEnabled=e.value})).finally((function(){t.isLoading=!1}))):this.isVisitorLogAndProfileEnabled=!0}},setup:function(){var e=ae["AjaxHelper"].fetch({method:"SitesManager.getSitesIdWithAdminAccess",filter_limit:"-1"});return{getSites:function(){return e}}},methods:{changeSite:function(e){var t=this;ae["AjaxHelper"].fetch({module:"API",method:"Live.isVisitorProfileEnabled",filter_limit:-1,idSite:e.id},{createErrorNotification:!1}).then((function(e){e.value||"userId=="!==t.segment_filter?e.value&&"visitId=="===t.segment_filter&&(t.segment_filter="userId=="):t.segment_filter="visitId=="})).catch((function(){t.segment_filter="visitId=="}))},showSuccessNotification:function(e){var t=ae["NotificationsStore"].show({message:e,context:"success",id:"manageGdpr",type:"transient"});setTimeout((function(){ae["NotificationsStore"].scrollToNotification(t)}),200)},linkTo:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"PrivacyManager";return"?".concat(ae["MatomoUrl"].stringify(Object.assign(Object.assign({},ae["MatomoUrl"].urlParsed.value),{},{module:t,action:e})))},toggleActivateAll:function(){this.dataSubjectsActive.fill(this.toggleAll)},showProfile:function(e,t){ae["Matomo"].helper.showVisitorProfilePopup(e,t)},exportDataSubject:function(){var e=this,t=this.activatedDataSubjects;ae["AjaxHelper"].post({module:"API",method:"PrivacyManager.exportDataSubjects",format:"json",filter_limit:-1},{visits:t}).then((function(t){e.showSuccessNotification(Object(ae["translate"])("PrivacyManager_VisitsSuccessfullyExported")),ae["Matomo"].helper.sendContentAsDownload("exported_data_subjects.json",JSON.stringify(t))}))},deleteDataSubject:function(){var e=this;ae["Matomo"].helper.modalConfirm(this.$refs.confirmDeleteDataSubject,{yes:function(){e.isDeleting=!0;var t=e.activatedDataSubjects;ae["AjaxHelper"].post({module:"API",method:"PrivacyManager.deleteDataSubjects",filter_limit:-1},{visits:t}).then((function(){e.dataSubjects=[],e.showSuccessNotification(Object(ae["translate"])("PrivacyManager_VisitsSuccessfullyDeleted")),e.findDataSubjects()})).finally((function(){e.isDeleting=!1}))}})},addFilter:function(e,t){this.segment_filter+=",".concat(e,"==").concat(t),this.findDataSubjects()},findDataSubjects:function(){var e=this;this.dataSubjects=[],this.dataSubjectsActive=[],this.isLoading=!0,this.toggleAll=!0,this.hasSearched=!1,this.getSites().then((function(t){var n=e.site.id;"all"!==n||ae["Matomo"].hasSuperUserAccess||(n=t,Array.isArray(t)&&(n=t.join(","))),ae["AjaxHelper"].fetch({method:"Live.isVisitorProfileEnabled",idSite:n}).then((function(t){e.allWebsitesContainsDisabledSite=!t.value})),ae["AjaxHelper"].fetch({idSite:n,module:"API",method:"PrivacyManager.findDataSubjects",segment:e.segment_filter}).then((function(t){e.hasSearched=!0,e.dataSubjectsActive=t.map((function(){return!0})),e.dataSubjects=t})).finally((function(){e.isLoading=!1}))}))}},computed:{hasActiveDataSubjects:function(){return!!this.activatedDataSubjects.length},activatedDataSubjects:function(){var e=this;return this.dataSubjects.filter((function(t,n){return e.dataSubjectsActive[n]})).map((function(e){return{idsite:e.idSite,idvisit:e.idVisit}}))},overviewHintText:function(){return Object(ae["translate"])("PrivacyManager_GdprToolsOverviewHint",'<a href="'.concat(this.linkTo("gdprOverview"),'">'),"</a>")},siteSettingsText:function(){return Object(ae["translate"])("PrivacyManager_PleaseEnableVisitorLogsProfilesSites",'<a href="'.concat(this.linkTo("index","SitesManager"),'">'),"</a>")},siteSettingsTextSingle:function(){return Object(ae["translate"])("PrivacyManager_PleaseEnableVisitorLogsProfiles",'<a href="'.concat(this.linkTo("index","SitesManager"),'">'),"</a>")}}});ie.render=ne;var le=ie,ce=Object(r["createElementVNode"])("br",null,null,-1),se=Object(r["createElementVNode"])("br",null,null,-1),de=Object(r["createElementVNode"])("br",null,null,-1),ue=Object(r["createElementVNode"])("br",null,null,-1),me={key:0},be=Object(r["createElementVNode"])("br",null,null,-1),pe=Object(r["createElementVNode"])("br",null,null,-1),ge={class:"alert-warning alert"};function Oe(e,t,n,a,o,i){var l=Object(r["resolveComponent"])("Field"),c=Object(r["resolveComponent"])("SaveButton"),s=Object(r["resolveDirective"])("form");return Object(r["withDirectives"])((Object(r["openBlock"])(),Object(r["createElementBlock"])("div",null,[Object(r["createElementVNode"])("div",null,[Object(r["createVNode"])(l,{uicontrol:"checkbox",name:"anonymizeIpSettings",title:e.translate("PrivacyManager_UseAnonymizeIp"),modelValue:e.actualEnabled,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.actualEnabled=t}),"inline-help":e.anonymizeIpEnabledHelp},null,8,["title","modelValue","inline-help"])]),Object(r["withDirectives"])(Object(r["createElementVNode"])("div",null,[Object(r["createElementVNode"])("div",null,[Object(r["createVNode"])(l,{uicontrol:"radio",name:"maskLength",title:e.translate("PrivacyManager_AnonymizeIpMaskLengtDescription"),modelValue:e.actualMaskLength,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.actualMaskLength=t}),options:e.maskLengthOptions,"inline-help":e.translate("PrivacyManager_GeolocationAnonymizeIpNote")},null,8,["title","modelValue","options","inline-help"])]),Object(r["createElementVNode"])("div",null,[Object(r["createVNode"])(l,{uicontrol:"radio",name:"useAnonymizedIpForVisitEnrichment",title:e.translate("PrivacyManager_UseAnonymizedIpForVisitEnrichment"),modelValue:e.actualUseAnonymizedIpForVisitEnrichment,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.actualUseAnonymizedIpForVisitEnrichment=t}),options:e.useAnonymizedIpForVisitEnrichmentOptions,"inline-help":e.translate("PrivacyManager_UseAnonymizedIpForVisitEnrichmentNote")},null,8,["title","modelValue","options","inline-help"])])],512),[[r["vShow"],e.actualEnabled]]),Object(r["createElementVNode"])("div",null,[Object(r["createVNode"])(l,{uicontrol:"checkbox",name:"anonymizeUserId",title:e.translate("PrivacyManager_PseudonymizeUserId"),modelValue:e.actualAnonymizeUserId,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.actualAnonymizeUserId=t})},{"inline-help":Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.translate("PrivacyManager_PseudonymizeUserIdNote"))+" ",1),ce,se,Object(r["createElementVNode"])("em",null,Object(r["toDisplayString"])(e.translate("PrivacyManager_PseudonymizeUserIdNote2")),1)]})),_:1},8,["title","modelValue"])]),Object(r["createElementVNode"])("div",null,[Object(r["createVNode"])(l,{uicontrol:"checkbox",name:"anonymizeOrderId",title:e.translate("PrivacyManager_UseAnonymizeOrderId"),modelValue:e.actualAnonymizeOrderId,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.actualAnonymizeOrderId=t}),"inline-help":e.translate("PrivacyManager_AnonymizeOrderIdNote")},null,8,["title","modelValue","inline-help"])]),Object(r["createElementVNode"])("div",null,[Object(r["createVNode"])(l,{uicontrol:"checkbox",name:"forceCookielessTracking",title:e.translate("PrivacyManager_ForceCookielessTracking"),modelValue:e.actualForceCookielessTracking,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.actualForceCookielessTracking=t})},{"inline-help":Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.translate("PrivacyManager_ForceCookielessTrackingDescription",e.trackerFileName))+" ",1),de,ue,Object(r["createElementVNode"])("em",null,Object(r["toDisplayString"])(e.translate("PrivacyManager_ForceCookielessTrackingDescription2")),1),e.trackerWritable?Object(r["createCommentVNode"])("",!0):(Object(r["openBlock"])(),Object(r["createElementBlock"])("span",me,[be,pe,Object(r["createElementVNode"])("p",ge,Object(r["toDisplayString"])(e.translate("PrivacyManager_ForceCookielessTrackingDescriptionNotWritable",e.trackerFileName)),1)]))]})),_:1},8,["title","modelValue"])]),Object(r["createElementVNode"])("div",null,[Object(r["createVNode"])(l,{uicontrol:"select",name:"anonymizeReferrer",title:e.translate("PrivacyManager_AnonymizeReferrer"),modelValue:e.actualAnonymizeReferrer,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.actualAnonymizeReferrer=t}),options:e.referrerAnonymizationOptions,"inline-help":e.translate("PrivacyManager_AnonymizeReferrerNote")},null,8,["title","modelValue","options","inline-help"])]),Object(r["createElementVNode"])("div",null,[e.configRandomisationFeatureFlag?(Object(r["openBlock"])(),Object(r["createBlock"])(l,{key:0,uicontrol:"checkbox",name:"randomizeConfigId",title:e.translate("PrivacyManager_UseRandomizeConfigId"),modelValue:e.actualRandomizeConfigId,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.actualRandomizeConfigId=t}),"inline-help":e.translate("PrivacyManager_RandomizeConfigIdNote")},null,8,["title","modelValue","inline-help"])):Object(r["createCommentVNode"])("",!0)]),Object(r["createVNode"])(c,{onConfirm:t[8]||(t[8]=function(t){return e.save()}),saving:e.isLoading},null,8,["saving"])],512)),[[s]])}function je(e){return!0===e||1===e||"1"===e?1:0}var ve=Object(r["defineComponent"])({props:{anonymizeIpEnabled:Boolean,anonymizeUserId:Boolean,maskLength:{type:Number,required:!0},useAnonymizedIpForVisitEnrichment:[Boolean,String,Number],anonymizeOrderId:Boolean,forceCookielessTracking:Boolean,anonymizeReferrer:String,maskLengthOptions:{type:Array,required:!0},useAnonymizedIpForVisitEnrichmentOptions:{type:Array,required:!0},trackerFileName:{type:String,required:!0},trackerWritable:{type:Boolean,required:!0},referrerAnonymizationOptions:{type:Object,required:!0},randomizeConfigId:Boolean,configRandomisationFeatureFlag:Boolean},components:{Field:re["Field"],SaveButton:re["SaveButton"]},directives:{Form:re["Form"]},data:function(){return{isLoading:!1,actualEnabled:this.anonymizeIpEnabled,actualMaskLength:this.maskLength,actualUseAnonymizedIpForVisitEnrichment:je(this.useAnonymizedIpForVisitEnrichment),actualAnonymizeUserId:!!this.anonymizeUserId,actualAnonymizeOrderId:!!this.anonymizeOrderId,actualForceCookielessTracking:!!this.forceCookielessTracking,actualAnonymizeReferrer:this.anonymizeReferrer,actualRandomizeConfigId:!!this.randomizeConfigId}},methods:{save:function(){var e=this;this.isLoading=!0,ae["AjaxHelper"].post({module:"API",method:"PrivacyManager.setAnonymizeIpSettings"},{anonymizeIPEnable:this.actualEnabled?"1":"0",anonymizeUserId:this.actualAnonymizeUserId?"1":"0",anonymizeOrderId:this.actualAnonymizeOrderId?"1":"0",forceCookielessTracking:this.actualForceCookielessTracking?"1":"0",anonymizeReferrer:this.actualAnonymizeReferrer?this.actualAnonymizeReferrer:"",maskLength:this.actualMaskLength,useAnonymizedIpForVisitEnrichment:this.actualUseAnonymizedIpForVisitEnrichment,randomizeConfigId:this.actualRandomizeConfigId?"1":"0"}).then((function(){var e=ae["NotificationsStore"].show({message:Object(ae["translate"])("CoreAdminHome_SettingsSaveSuccess"),context:"success",id:"privacyManagerSettings",type:"toast"});ae["NotificationsStore"].scrollToNotification(e)})).finally((function(){e.isLoading=!1}))}},computed:{anonymizeIpEnabledHelp:function(){var e=Object(ae["translate"])("PrivacyManager_AnonymizeIpInlineHelp"),t=Object(ae["translate"])("PrivacyManager_AnonymizeIpDescription");return"".concat(e," ").concat(t)}}});ve.render=Oe;var he=ve,fe={class:"optOutCustomizer"},ye=["innerHTML"],Ve={key:0,id:"opt-out-styling"},De=["value"],Ne=["value"],Se=["value"],Ee=["value"],Ce=Object(r["createStaticVNode"])('<option value="px">px</option><option value="pt">pt</option><option value="em">em</option><option value="rem">rem</option><option value="%">%</option>',5),ke=[Ce],_e=["value"],Pe=["src"],Me={class:"form-group row"},we={class:"col s12 m6"},ze={for:"codeType1"},Te={for:"codeType2"},Ae={key:0},Ie={class:"col s12 m6"},Le=["innerHTML"],Be={ref:"pre"},xe=["innerHTML"],Fe={class:"system notification notification-info optOutTestReminder"},Re=["innerHTML"];function Ue(e,t,n,a,o,i){var l=Object(r["resolveComponent"])("Field"),c=Object(r["resolveDirective"])("copy-to-clipboard");return Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],null,[Object(r["createElementVNode"])("div",fe,[Object(r["createElementVNode"])("p",null,[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.translate("CoreAdminHome_OptOutExplanation"))+" ",1),Object(r["createElementVNode"])("span",{innerHTML:e.$sanitize(e.readThisToLearnMore)},null,8,ye)]),Object(r["createElementVNode"])("h3",null,Object(r["toDisplayString"])(e.translate("PrivacyManager_OptOutAppearance")),1),Object(r["createElementVNode"])("div",null,[Object(r["createElementVNode"])("span",null,[Object(r["createElementVNode"])("label",null,[Object(r["withDirectives"])(Object(r["createElementVNode"])("input",{id:"applyStyling",type:"checkbox",name:"applyStyling","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.applyStyling=t}),onKeydown:t[1]||(t[1]=function(t){return e.updateCode()}),onChange:t[2]||(t[2]=function(t){return e.updateCode()})},null,544),[[r["vModelCheckbox"],e.applyStyling]]),Object(r["createElementVNode"])("span",null,Object(r["toDisplayString"])(e.translate("PrivacyManager_ApplyStyling")),1)])])]),e.applyStyling?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",Ve,[Object(r["createElementVNode"])("p",null,[Object(r["createElementVNode"])("span",null,[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.translate("PrivacyManager_FontColor"))+": ",1),Object(r["createElementVNode"])("input",{type:"color",value:e.fontColor,onKeydown:t[3]||(t[3]=function(t){return e.onFontColorChange(t)}),onChange:t[4]||(t[4]=function(t){return e.onFontColorChange(t)})},null,40,De)]),Object(r["createElementVNode"])("span",null,[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.translate("PrivacyManager_BackgroundColor"))+": ",1),Object(r["createElementVNode"])("input",{type:"color",value:e.backgroundColor,onKeydown:t[5]||(t[5]=function(t){return e.onBgColorChange(t)}),onChange:t[6]||(t[6]=function(t){return e.onBgColorChange(t)})},null,40,Ne)]),Object(r["createElementVNode"])("span",null,[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.translate("PrivacyManager_FontSize"))+": ",1),Object(r["createElementVNode"])("input",{id:"FontSizeInput",type:"number",min:"1",max:"100",value:e.fontSize,onKeydown:t[7]||(t[7]=function(t){return e.onFontSizeChange(t)}),onChange:t[8]||(t[8]=function(t){return e.onFontSizeChange(t)})},null,40,Se)]),Object(r["createElementVNode"])("span",null,[Object(r["createElementVNode"])("select",{class:"browser-default",value:e.fontSizeUnit,onKeydown:t[9]||(t[9]=function(t){return e.onFontSizeUnitChange(t)}),onChange:t[10]||(t[10]=function(t){return e.onFontSizeUnitChange(t)})},ke,40,Ee)]),Object(r["createElementVNode"])("span",null,[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.translate("PrivacyManager_FontFamily"))+": ",1),Object(r["createElementVNode"])("input",{id:"FontFamilyInput",type:"text",value:e.fontFamily,onKeydown:t[11]||(t[11]=function(t){return e.onFontFamilyChange(t)}),onChange:t[12]||(t[12]=function(t){return e.onFontFamilyChange(t)})},null,40,_e)])])])):Object(r["createCommentVNode"])("",!0),Object(r["createElementVNode"])("div",null,[Object(r["createElementVNode"])("span",null,[Object(r["createElementVNode"])("label",null,[Object(r["withDirectives"])(Object(r["createElementVNode"])("input",{id:"showIntro",type:"checkbox",name:"showIntro","onUpdate:modelValue":t[13]||(t[13]=function(t){return e.showIntro=t}),onKeydown:t[14]||(t[14]=function(t){return e.updateCode()}),onChange:t[15]||(t[15]=function(t){return e.updateCode()})},null,544),[[r["vModelCheckbox"],e.showIntro]]),Object(r["createElementVNode"])("span",null,Object(r["toDisplayString"])(e.translate("PrivacyManager_ShowIntro")),1)])])]),Object(r["createElementVNode"])("h3",null,Object(r["toDisplayString"])(e.translate("PrivacyManager_OptOutPreview")),1),Object(r["createElementVNode"])("iframe",{id:"previewIframe",style:{border:"1px solid #333",height:"200px",width:"600px"},src:e.iframeUrl,class:Object(r["normalizeClass"])({withBg:e.withBg})},null,10,Pe)]),Object(r["createElementVNode"])("div",null,[Object(r["createElementVNode"])("div",Me,[Object(r["createElementVNode"])("div",we,[Object(r["createElementVNode"])("h3",null,Object(r["toDisplayString"])(e.translate("PrivacyManager_OptOutHtmlCode")),1),Object(r["createElementVNode"])("p",null,[Object(r["createElementVNode"])("label",ze,[Object(r["withDirectives"])(Object(r["createElementVNode"])("input",{type:"radio",id:"codeType1",name:"codeType",value:"tracker","onUpdate:modelValue":t[16]||(t[16]=function(t){return e.codeType=t}),onKeydown:t[17]||(t[17]=function(t){return e.updateCode()}),onChange:t[18]||(t[18]=function(t){return e.updateCode()})},null,544),[[r["vModelRadio"],e.codeType]]),Object(r["createElementVNode"])("span",null,Object(r["toDisplayString"])(e.translate("PrivacyManager_OptOutUseTracker")),1)])]),Object(r["createElementVNode"])("p",null,[Object(r["createElementVNode"])("label",Te,[Object(r["withDirectives"])(Object(r["createElementVNode"])("input",{type:"radio",id:"codeType2",name:"codeType",value:"selfContained","onUpdate:modelValue":t[19]||(t[19]=function(t){return e.codeType=t}),onKeydown:t[20]||(t[20]=function(t){return e.updateCode()}),onChange:t[21]||(t[21]=function(t){return e.updateCode()})},null,544),[[r["vModelRadio"],e.codeType]]),Object(r["createElementVNode"])("span",null,Object(r["toDisplayString"])(e.translate("PrivacyManager_OptOutUseStandalone")),1)])]),"selfContained"===e.codeType?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",Ae,[Object(r["createElementVNode"])("div",null,[Object(r["createVNode"])(l,{uicontrol:"select",name:"language",modelValue:e.language,"onUpdate:modelValue":t[22]||(t[22]=function(t){return e.language=t}),title:e.translate("General_Language"),options:e.languageOptions,onKeydown:t[23]||(t[23]=function(t){return e.updateCode()}),onChange:t[24]||(t[24]=function(t){return e.updateCode()})},null,8,["modelValue","title","options"])])])):Object(r["createCommentVNode"])("",!0)]),Object(r["createElementVNode"])("div",Ie,[Object(r["createElementVNode"])("div",{class:"form-help",innerHTML:e.$sanitize(e.codeTypeHelp)},null,8,Le)])])]),Object(r["createElementVNode"])("div",null,[Object(r["createElementVNode"])("div",null,[Object(r["withDirectives"])(Object(r["createElementVNode"])("pre",Be,[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.codeBox)+"\n      ",1)],512),[[c,{}]])]),Object(r["createElementVNode"])("p",{innerHTML:e.$sanitize(e.optOutExplanationIntro)},null,8,xe),Object(r["createElementVNode"])("div",Fe,[Object(r["createElementVNode"])("p",null,[Object(r["createElementVNode"])("strong",null,Object(r["toDisplayString"])(e.translate("PrivacyManager_OptOutRememberToTest")),1)]),Object(r["createElementVNode"])("p",null,Object(r["toDisplayString"])(e.translate("PrivacyManager_OptOutRememberToTestBody")),1),Object(r["createElementVNode"])("p",null,[Object(r["createElementVNode"])("ul",null,[Object(r["createElementVNode"])("li",null,Object(r["toDisplayString"])(e.translate("PrivacyManager_OptOutRememberToTestStep1")),1),Object(r["createElementVNode"])("li",null,Object(r["toDisplayString"])(e.translate("PrivacyManager_OptOutRememberToTestStep2")),1),Object(r["createElementVNode"])("li",null,Object(r["toDisplayString"])(e.translate("PrivacyManager_OptOutRememberToTestStep3")),1),Object(r["createElementVNode"])("li",null,Object(r["toDisplayString"])(e.translate("PrivacyManager_OptOutRememberToTestStep4")),1)])])]),Object(r["createElementVNode"])("h3",null,Object(r["toDisplayString"])(e.translate("PrivacyManager_BuildYourOwn")),1),Object(r["createElementVNode"])("p",{innerHTML:e.$sanitize(e.optOutCustomOptOutLink)},null,8,Re)])],64)}function He(e){var t=parseInt(e,16),n=t>>16&255,a=t>>8&255,o=255&t;return n>=225&&a>=225&&o>=225}var qe=window,Ge=qe.$,$e=Object(r["defineComponent"])({props:{currentLanguageCode:{type:String,required:!0},languageOptions:{type:Object,required:!0},matomoUrl:String},components:{Field:re["Field"]},directives:{CopyToClipboard:ae["CopyToClipboard"]},data:function(){return{fontSizeUnit:"px",backgroundColor:"#FFFFFF",fontColor:"#000000",fontSize:"12",fontFamily:"Arial",showIntro:!0,applyStyling:!1,codeType:"tracker",code:"",language:this.currentLanguageCode}},created:function(){this.onFontColorChange=Object(ae["debounce"])(this.onFontColorChange,50),this.onBgColorChange=Object(ae["debounce"])(this.onBgColorChange,50),this.onFontSizeChange=Object(ae["debounce"])(this.onFontSizeChange,50),this.onFontSizeUnitChange=Object(ae["debounce"])(this.onFontSizeUnitChange,50),this.onFontFamilyChange=Object(ae["debounce"])(this.onFontFamilyChange,50),this.matomoUrl&&this.updateCode()},methods:{onFontColorChange:function(e){this.fontColor=e.target.value,this.updateCode()},onBgColorChange:function(e){this.backgroundColor=e.target.value,this.updateCode()},onFontSizeChange:function(e){this.fontSize=e.target.value,this.updateCode()},onFontSizeUnitChange:function(e){this.fontSizeUnit=e.target.value,this.updateCode()},onFontFamilyChange:function(e){this.fontFamily=e.target.value,this.updateCode()},updateCode:function(){var e=this,t="CoreAdminHome.getOptOutJSEmbedCode";"selfContained"===this.codeType&&(t="CoreAdminHome.getOptOutSelfContainedEmbedCode"),ae["AjaxHelper"].fetch({method:t,backgroundColor:this.backgroundColor.substr(1),fontColor:this.fontColor.substr(1),fontSize:this.fontSizeWithUnit,fontFamily:this.fontFamily,showIntro:!0===this.showIntro?1:0,applyStyling:!0===this.applyStyling?1:0,matomoUrl:this.matomoUrl,language:"selfContained"===this.codeType?this.language:"auto"}).then((function(t){e.code=t.value||""}))}},watch:{codeBox:function(){var e=this.$refs.pre,t=Ge(e).queue("fx").length>0;t||Ge(e).effect("highlight",{},1500)}},computed:{fontSizeWithUnit:function(){return this.fontSize?"".concat(this.fontSize).concat(this.fontSizeUnit):""},withBg:function(){return!!this.matomoUrl&&""===this.backgroundColor&&""!==this.fontColor&&He(this.fontColor.slice(1))},codeBox:function(){return this.matomoUrl?this.code:""},iframeUrl:function(){var e=ae["MatomoUrl"].stringify({module:"CoreAdminHome",action:"optOut",language:this.language,backgroundColor:this.backgroundColor.substr(1),fontColor:this.fontColor.substr(1),fontSize:this.fontSizeWithUnit,fontFamily:this.fontFamily,applyStyling:!0===this.applyStyling?1:0,showIntro:!0===this.showIntro?1:0});return"".concat(this.matomoUrl,"index.php?").concat(e)},readThisToLearnMore:function(){return Object(ae["translate"])("General_ReadThisToLearnMore",Object(ae["externalLink"])("https://matomo.org/faq/how-to/faq_25918/"),"</a>")},optOutExplanationIntro:function(){return Object(ae["translate"])("CoreAdminHome_OptOutExplanationIntro",'<a href="'.concat(this.iframeUrl,'" rel="noreferrer noopener" target="_blank">'),"</a>")},optOutCustomOptOutLink:function(){var e="https://developer.matomo.org/guides/tracking-javascript-guide#optional-creating-a-custom-opt-out-form";return Object(ae["translate"])("CoreAdminHome_OptOutCustomOptOutLink",Object(ae["externalLink"])(e),"</a>")},codeTypeHelp:function(){return Object(ae["translate"])("PrivacyManager_OptOutCodeTypeExplanation")}}});$e.render=Ue;var Ke=$e,We={class:"anonymizeLogData"},Ye={class:"form-group row"},Je={class:"col s12 input-field"},Qe={for:"anonymizeSite",class:"siteSelectorLabel"},Xe={class:"sites_autocomplete"},Ze={class:"form-group row"},et={class:"col s6 input-field"},tt={for:"anonymizeStartDate",class:"active"},nt=["value"],at={class:"col s6 input-field"},ot={for:"anonymizeEndDate",class:"active"},rt=["value"],it={name:"anonymizeIp"},lt={name:"anonymizeLocation"},ct={name:"anonymizeTheUserId"},st={class:"form-group row"},dt={class:"col s12 m6"},ut={for:"visit_columns"},mt={class:"innerFormField",name:"visit_columns"},bt=["onClick","title"],pt={class:"col s12 m6"},gt={class:"form-help"},Ot={class:"inline-help"},jt={class:"form-group row"},vt={class:"col s12"},ht={class:"form-group row"},ft={class:"col s12 m6"},yt={for:"action_columns"},Vt={class:"innerFormField",name:"action_columns"},Dt=["onClick","title"],Nt={class:"col s12 m6"},St={class:"form-help"},Et={class:"inline-help"},Ct=Object(r["createElementVNode"])("span",{class:"icon-info"},null,-1);function kt(e,t,n,a,o,i){var l=Object(r["resolveComponent"])("SiteSelector"),c=Object(r["resolveComponent"])("Field"),s=Object(r["resolveComponent"])("SaveButton"),d=Object(r["resolveComponent"])("PasswordConfirmation");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",We,[Object(r["createElementVNode"])("div",Ye,[Object(r["createElementVNode"])("div",Je,[Object(r["createElementVNode"])("div",null,[Object(r["createElementVNode"])("label",Qe,Object(r["toDisplayString"])(e.translate("PrivacyManager_AnonymizeSites")),1),Object(r["createElementVNode"])("div",Xe,[Object(r["createVNode"])(l,{id:"anonymizeSite",modelValue:e.site,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.site=t}),"show-all-sites-item":!0,"switch-site-on-select":!1,"show-selected-site":!0},null,8,["modelValue"])])])])]),Object(r["createElementVNode"])("div",Ze,[Object(r["createElementVNode"])("div",et,[Object(r["createElementVNode"])("div",null,[Object(r["createElementVNode"])("label",tt,Object(r["toDisplayString"])(e.translate("PrivacyManager_AnonymizeRowDataFrom")),1),Object(r["createElementVNode"])("input",{type:"text",id:"anonymizeStartDate",class:"anonymizeStartDate",ref:"anonymizeStartDate",name:"anonymizeStartDate",value:e.startDate,onKeydown:t[1]||(t[1]=function(t){return e.onKeydownStartDate(t)}),onChange:t[2]||(t[2]=function(t){return e.onKeydownStartDate(t)})},null,40,nt)])]),Object(r["createElementVNode"])("div",at,[Object(r["createElementVNode"])("div",null,[Object(r["createElementVNode"])("label",ot,Object(r["toDisplayString"])(e.translate("PrivacyManager_AnonymizeRowDataTo")),1),Object(r["createElementVNode"])("input",{type:"text",class:"anonymizeEndDate",id:"anonymizeEndDate",ref:"anonymizeEndDate",name:"anonymizeEndDate",value:e.endDate,onKeydown:t[3]||(t[3]=function(t){return e.onKeydownEndDate(t)}),onChange:t[4]||(t[4]=function(t){return e.onKeydownEndDate(t)})},null,40,rt)])])]),Object(r["createElementVNode"])("div",it,[Object(r["createVNode"])(c,{uicontrol:"checkbox",name:"anonymizeIp",title:e.translate("PrivacyManager_AnonymizeIp"),modelValue:e.anonymizeIp,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.anonymizeIp=t}),introduction:e.translate("General_Visit"),"inline-help":e.translate("PrivacyManager_AnonymizeIpHelp")},null,8,["title","modelValue","introduction","inline-help"])]),Object(r["createElementVNode"])("div",lt,[Object(r["createVNode"])(c,{uicontrol:"checkbox",name:"anonymizeLocation",title:e.translate("PrivacyManager_AnonymizeLocation"),modelValue:e.anonymizeLocation,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.anonymizeLocation=t}),"inline-help":e.translate("PrivacyManager_AnonymizeLocationHelp")},null,8,["title","modelValue","inline-help"])]),Object(r["createElementVNode"])("div",ct,[Object(r["createVNode"])(c,{uicontrol:"checkbox",name:"anonymizeTheUserId",title:e.translate("PrivacyManager_AnonymizeUserId"),modelValue:e.anonymizeUserId,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.anonymizeUserId=t}),"inline-help":e.translate("PrivacyManager_AnonymizeUserIdHelp")},null,8,["title","modelValue","inline-help"])]),Object(r["createElementVNode"])("div",st,[Object(r["createElementVNode"])("div",dt,[Object(r["createElementVNode"])("div",null,[Object(r["createElementVNode"])("label",ut,Object(r["toDisplayString"])(e.translate("PrivacyManager_UnsetVisitColumns")),1),(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(e.selectedVisitColumns,(function(t,n){return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{class:Object(r["normalizeClass"])("selectedVisitColumns selectedVisitColumns".concat(n," multiple valign-wrapper")),key:n},[Object(r["createElementVNode"])("div",mt,[Object(r["createVNode"])(c,{uicontrol:"select",name:"visit_columns","model-value":t.column,"onUpdate:modelValue":function(n){t.column=n,e.onVisitColumnChange()},"full-width":!0,options:e.availableVisitColumns},null,8,["model-value","onUpdate:modelValue","options"])]),Object(r["withDirectives"])(Object(r["createElementVNode"])("span",{class:"icon-minus valign",onClick:function(t){return e.removeVisitColumn(n)},title:e.translate("General_Remove")},null,8,bt),[[r["vShow"],n+1!==e.selectedVisitColumns.length]])],2)})),128))])]),Object(r["createElementVNode"])("div",pt,[Object(r["createElementVNode"])("div",gt,[Object(r["createElementVNode"])("span",Ot,Object(r["toDisplayString"])(e.translate("PrivacyManager_UnsetVisitColumnsHelp")),1)])])]),Object(r["createElementVNode"])("div",jt,[Object(r["createElementVNode"])("div",vt,[Object(r["createElementVNode"])("h3",null,Object(r["toDisplayString"])(e.translate("General_Action")),1)])]),Object(r["createElementVNode"])("div",ht,[Object(r["createElementVNode"])("div",ft,[Object(r["createElementVNode"])("div",null,[Object(r["createElementVNode"])("label",yt,Object(r["toDisplayString"])(e.translate("PrivacyManager_UnsetActionColumns")),1),(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(e.selectedActionColumns,(function(t,n){return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{class:Object(r["normalizeClass"])("selectedActionColumns selectedActionColumns".concat(n," multiple valign-wrapper")),key:n},[Object(r["createElementVNode"])("div",Vt,[Object(r["createVNode"])(c,{uicontrol:"select",name:"action_columns","model-value":t.column,"onUpdate:modelValue":function(n){t.column=n,e.onActionColumnChange()},"full-width":!0,options:e.availableActionColumns},null,8,["model-value","onUpdate:modelValue","options"])]),Object(r["withDirectives"])(Object(r["createElementVNode"])("span",{class:"icon-minus valign",onClick:function(t){return e.removeActionColumn(n)},title:e.translate("General_Remove")},null,8,Dt),[[r["vShow"],n+1!==e.selectedActionColumns.length]])],2)})),128))])]),Object(r["createElementVNode"])("div",Nt,[Object(r["createElementVNode"])("div",St,[Object(r["createElementVNode"])("span",Et,Object(r["toDisplayString"])(e.translate("PrivacyManager_UnsetActionColumnsHelp")),1)])])]),Object(r["createElementVNode"])("p",null,[Ct,Object(r["createTextVNode"])(" "+Object(r["toDisplayString"])(e.translate("PrivacyManager_AnonymizeProcessInfo")),1)]),Object(r["createVNode"])(s,{class:"anonymizePastData",onConfirm:t[8]||(t[8]=function(t){return e.showPasswordConfirmModal=!0}),disabled:e.isAnonymizePastDataDisabled,value:e.translate("PrivacyManager_AnonymizeDataNow")},null,8,["disabled","value"]),Object(r["createVNode"])(d,{modelValue:e.showPasswordConfirmModal,"onUpdate:modelValue":t[9]||(t[9]=function(t){return e.showPasswordConfirmModal=t}),onConfirmed:e.scheduleAnonymization},{default:Object(r["withCtx"])((function(){return[Object(r["createElementVNode"])("h2",null,Object(r["toDisplayString"])(e.translate("PrivacyManager_AnonymizeDataConfirm")),1)]})),_:1},8,["modelValue","onConfirmed"])])}function _t(e){return e<10?"0".concat(e):e}var Pt=Object(r["defineComponent"])({components:{PasswordConfirmation:re["PasswordConfirmation"],SiteSelector:ae["SiteSelector"],Field:re["Field"],SaveButton:re["SaveButton"]},data:function(){var e=new Date,t="".concat(e.getFullYear(),"-").concat(_t(e.getMonth()+1),"-").concat(_t(e.getDay()+1));return{isLoading:!1,isDeleting:!1,anonymizeIp:!1,anonymizeLocation:!1,anonymizeUserId:!1,site:{id:"all",name:"All Websites"},availableVisitColumns:[],availableActionColumns:[],selectedVisitColumns:[{column:""}],selectedActionColumns:[{column:""}],startDate:t,endDate:t,showPasswordConfirmModal:!1}},created:function(){var e=this;this.onKeydownStartDate=Object(ae["debounce"])(this.onKeydownStartDate,50),this.onKeydownEndDate=Object(ae["debounce"])(this.onKeydownEndDate,50),ae["AjaxHelper"].fetch({method:"PrivacyManager.getAvailableVisitColumnsToAnonymize"}).then((function(t){e.availableVisitColumns=[],t.forEach((function(t){e.availableVisitColumns.push({key:t.column_name,value:t.column_name})}))})),ae["AjaxHelper"].fetch({method:"PrivacyManager.getAvailableLinkVisitActionColumnsToAnonymize"}).then((function(t){e.availableActionColumns=[],t.forEach((function(t){e.availableActionColumns.push({key:t.column_name,value:t.column_name})}))})),setTimeout((function(){var t=ae["Matomo"].getBaseDatePickerOptions(null),n=ae["Matomo"].getBaseDatePickerOptions(null);$(e.$refs.anonymizeStartDate).datepicker(t),$(e.$refs.anonymizeEndDate).datepicker(n)}))},methods:{onVisitColumnChange:function(){var e=this.selectedVisitColumns.every((function(e){return!(null===e||void 0===e||!e.column)}));e&&this.addVisitColumn()},addVisitColumn:function(){this.selectedVisitColumns.push({column:""})},removeVisitColumn:function(e){if(e>-1){var t=this.selectedVisitColumns.length-1;t===e?this.selectedVisitColumns[e]={column:""}:this.selectedVisitColumns.splice(e,1)}},onActionColumnChange:function(){var e=this.selectedActionColumns.every((function(e){return!(null===e||void 0===e||!e.column)}));e&&this.addActionColumn()},addActionColumn:function(){this.selectedActionColumns.push({column:""})},removeActionColumn:function(e){if(e>-1){var t=this.selectedActionColumns.length-1;t===e?this.selectedActionColumns[e]={column:""}:this.selectedActionColumns.splice(e,1)}},scheduleAnonymization:function(e){var t="".concat(this.startDate,",").concat(this.endDate);this.startDate===this.endDate&&(t=this.startDate);var n={date:t};n.idSites=this.site.id,n.anonymizeIp=this.anonymizeIp?"1":"0",n.anonymizeLocation=this.anonymizeLocation?"1":"0",n.anonymizeUserId=this.anonymizeUserId?"1":"0",n.unsetVisitColumns=this.selectedVisitColumns.filter((function(e){return!(null===e||void 0===e||!e.column)})).map((function(e){return e.column})),n.unsetLinkVisitActionColumns=this.selectedActionColumns.filter((function(e){return!(null===e||void 0===e||!e.column)})).map((function(e){return e.column})),n.passwordConfirmation=e,ae["AjaxHelper"].post({method:"PrivacyManager.anonymizeSomeRawData"},n).then((function(){window.location.reload(!0)}))},onKeydownStartDate:function(e){this.startDate=e.target.value},onKeydownEndDate:function(e){this.endDate=e.target.value}},computed:{isAnonymizePastDataDisabled:function(){return!this.anonymizeIp&&!this.anonymizeLocation&&!this.selectedVisitColumns&&!this.selectedActionColumns}}});Pt.render=kt;var Mt=Pt;function wt(e,t,n,a,o,i){var l=Object(r["resolveComponent"])("Field"),c=Object(r["resolveComponent"])("SaveButton"),s=Object(r["resolveDirective"])("form");return Object(r["withDirectives"])((Object(r["openBlock"])(),Object(r["createElementBlock"])("div",null,[Object(r["createElementVNode"])("div",null,[Object(r["createVNode"])(l,{uicontrol:"radio",name:"doNotTrack",modelValue:e.enabled,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.enabled=t}),options:e.doNotTrackOptions,"inline-help":e.translate("PrivacyManager_DoNotTrack_Description")},null,8,["modelValue","options","inline-help"])]),Object(r["createVNode"])(c,{onConfirm:t[1]||(t[1]=function(t){return e.save()}),saving:e.isLoading},null,8,["saving"])],512)),[[s]])}var zt=Object(r["defineComponent"])({props:{dntSupport:Boolean,doNotTrackOptions:{type:Array,required:!0}},components:{Field:re["Field"],SaveButton:re["SaveButton"]},directives:{Form:re["Form"]},data:function(){return{isLoading:!1,enabled:this.dntSupport?1:0}},methods:{save:function(){var e=this;this.isLoading=!0;var t="deactivateDoNotTrack";this.enabled&&"0"!==this.enabled&&(t="activateDoNotTrack"),ae["AjaxHelper"].post({module:"API",method:"PrivacyManager.".concat(t)}).then((function(){var e=ae["NotificationsStore"].show({message:Object(ae["translate"])("CoreAdminHome_SettingsSaveSuccess"),context:"success",id:"privacyManagerSettings",type:"transient"});ae["NotificationsStore"].scrollToNotification(e)})).finally((function(){e.isLoading=!1}))}}});zt.render=wt;var Tt=zt;function At(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function It(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Lt(e,t,n){return t&&It(e.prototype,t),n&&It(e,n),e}function Bt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}
/*!
 * Matomo - free/libre analytics platform
 *
 * @link    https://matomo.org
 * @license https://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */var xt=function(){function e(){var t=this;At(this,e),Bt(this,"privateState",Object(r["reactive"])({settings:{},showEstimate:!1,loadingEstimation:!1,estimation:"",isModified:!1})),Bt(this,"state",Object(r["computed"])((function(){return Object(r["readonly"])(t.privateState)}))),Bt(this,"enableDeleteReports",Object(r["computed"])((function(){return t.state.value.settings.enableDeleteReports}))),Bt(this,"enableDeleteLogs",Object(r["computed"])((function(){return t.state.value.settings.enableDeleteLogs}))),Bt(this,"currentRequest",void 0)}return Lt(e,[{key:"updateSettings",value:function(e){this.initSettings(e),this.privateState.isModified=!0}},{key:"initSettings",value:function(e){this.privateState.settings=Object.assign(Object.assign({},this.privateState.settings),e),this.reloadDbStats()}},{key:"savePurgeDataSettings",value:function(e,t,n){return this.privateState.isModified=!1,ae["AjaxHelper"].post({module:"API",method:e},Object.assign(Object.assign({},t),{},{enableDeleteLogs:t.enableDeleteLogs?"1":"0",enableDeleteReports:t.enableDeleteReports?"1":"0",passwordConfirmation:n})).then((function(){var e=ae["NotificationsStore"].show({message:Object(ae["translate"])("CoreAdminHome_SettingsSaveSuccess"),context:"success",id:"privacyManagerSettings",type:"toast"});ae["NotificationsStore"].scrollToNotification(e)}))}},{key:"isEitherDeleteSectionEnabled",value:function(){return this.state.value.settings.enableDeleteLogs||this.state.value.settings.enableDeleteReports}},{key:"isManualEstimationLinkShowing",value:function(){return window.$("#getPurgeEstimateLink").length>0}},{key:"reloadDbStats",value:function(e){var t=this;if(this.currentRequest&&(this.currentRequest.abort(),this.currentRequest=void 0),e||this.isEitherDeleteSectionEnabled()&&!this.isManualEstimationLinkShowing()){this.privateState.loadingEstimation=!0,this.privateState.estimation="",this.privateState.showEstimate=!1;var n=this.privateState.settings,a=Object.assign(Object.assign({},n),{},{enableDeleteLogs:n.enableDeleteLogs?"1":"0",enableDeleteReports:n.enableDeleteReports?"1":"0"});!0===e&&(a.forceEstimate=1),this.currentRequest=new AbortController,ae["AjaxHelper"].post({module:"PrivacyManager",action:"getDatabaseSize",format:"html"},a,{abortController:this.currentRequest,format:"html"}).then((function(e){t.privateState.estimation=e,t.privateState.showEstimate=!0,t.privateState.loadingEstimation=!1})).finally((function(){t.currentRequest=void 0,t.privateState.loadingEstimation=!1}))}}}]),e}(),Ft=new xt,Rt={id:"formDeleteSettings"},Ut={id:"deleteLogSettingEnabled"},Ht={class:"alert alert-warning deleteOldLogsWarning",style:{width:"50%"}},qt=["href"],Gt={id:"deleteLogSettings"},$t={key:0},Kt={key:1};function Wt(e,t,n,a,o,i){var l=this,c=Object(r["resolveComponent"])("Field"),s=Object(r["resolveComponent"])("SaveButton"),d=Object(r["resolveComponent"])("PasswordConfirmation"),u=Object(r["resolveDirective"])("form");return Object(r["withDirectives"])((Object(r["openBlock"])(),Object(r["createElementBlock"])("div",Rt,[Object(r["createElementVNode"])("div",Ut,[Object(r["createElementVNode"])("div",null,[Object(r["createVNode"])(c,{uicontrol:"checkbox",name:"deleteEnable","model-value":e.enabled,"onUpdate:modelValue":t[0]||(t[0]=function(t){e.enabled=t,e.reloadDbStats()}),title:e.translate("PrivacyManager_UseDeleteLog"),"inline-help":e.translate("PrivacyManager_DeleteRawDataInfo")},null,8,["model-value","title","inline-help"])]),Object(r["withDirectives"])(Object(r["createElementVNode"])("div",Ht,[Object(r["createElementVNode"])("a",{href:e.externalRawLink("https://matomo.org/faq/general/faq_125"),rel:"noreferrer noopener",target:"_blank"},Object(r["toDisplayString"])(e.translate("General_ClickHere")),9,qt)],512),[[r["vShow"],e.enabled]])]),Object(r["withDirectives"])(Object(r["createElementVNode"])("div",Gt,[Object(r["createElementVNode"])("div",null,[Object(r["createVNode"])(c,{uicontrol:"text",name:"deleteOlderThan","model-value":e.deleteOlderThan,"onUpdate:modelValue":t[1]||(t[1]=function(t){e.deleteOlderThan=t,e.reloadDbStats()}),title:e.deleteOlderThanTitle,"inline-help":e.translate("PrivacyManager_LeastDaysInput","1")},null,8,["model-value","title","inline-help"])])],512),[[r["vShow"],e.enabled]]),Object(r["createVNode"])(s,{onConfirm:t[2]||(t[2]=function(e){return l.showPasswordConfirmModal=!0}),saving:e.isLoading},null,8,["saving"]),Object(r["createVNode"])(d,{modelValue:e.showPasswordConfirmModal,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.showPasswordConfirmModal=t}),onConfirmed:e.saveSettings},{default:Object(r["withCtx"])((function(){return[e.enabled&&!e.enableDeleteReports?(Object(r["openBlock"])(),Object(r["createElementBlock"])("h2",$t,Object(r["toDisplayString"])(e.translate("PrivacyManager_DeleteLogsConfirm")),1)):Object(r["createCommentVNode"])("",!0),e.enabled&&e.enableDeleteReports?(Object(r["openBlock"])(),Object(r["createElementBlock"])("h2",Kt,Object(r["toDisplayString"])(e.translate("PrivacyManager_DeleteBothConfirm")),1)):Object(r["createCommentVNode"])("",!0)]})),_:1},8,["modelValue","onConfirmed"])],512)),[[u]])}var Yt=Object(r["defineComponent"])({props:{isDataPurgeSettingsEnabled:Boolean,deleteData:{type:Object,required:!0},scheduleDeletionOptions:{type:Object,required:!0}},components:{PasswordConfirmation:re["PasswordConfirmation"],Field:re["Field"],SaveButton:re["SaveButton"]},directives:{Form:re["Form"]},data:function(){return{isLoading:!1,enabled:1===parseInt(this.deleteData.config.delete_logs_enable,10),deleteOlderThan:this.deleteData.config.delete_logs_older_than,showPasswordConfirmModal:!1}},created:function(){var e=this;setTimeout((function(){Ft.initSettings(e.settings)}))},methods:{saveSettings:function(e){var t=this,n="PrivacyManager.setDeleteLogsSettings";this.isLoading=!0,Ft.savePurgeDataSettings(n,this.settings,e).finally((function(){t.isLoading=!1}))},reloadDbStats:function(){Ft.updateSettings(this.settings)}},computed:{settings:function(){return{enableDeleteLogs:!!this.enabled,deleteLogsOlderThan:this.deleteOlderThan}},deleteOlderThanTitle:function(){return"".concat(Object(ae["translate"])("PrivacyManager_DeleteLogsOlderThan")," (").concat(Object(ae["translate"])("Intl_PeriodDays"),")")},enableDeleteReports:function(){return!!Ft.enableDeleteReports.value}}});Yt.render=Wt;var Jt=Yt,Qt={id:"formDeleteSettings"},Xt={id:"deleteReportsSettingEnabled"},Zt={class:"alert alert-warning",style:{width:"50%"}},en=Object(r["createElementVNode"])("br",null,null,-1),tn=Object(r["createElementVNode"])("br",null,null,-1),nn={id:"deleteReportsSettings"},an={key:0},on={key:1};function rn(e,t,n,a,o,i){var l=this,c=Object(r["resolveComponent"])("Field"),s=Object(r["resolveComponent"])("SaveButton"),d=Object(r["resolveComponent"])("PasswordConfirmation"),u=Object(r["resolveDirective"])("form");return Object(r["withDirectives"])((Object(r["openBlock"])(),Object(r["createElementBlock"])("div",Qt,[Object(r["createElementVNode"])("div",Xt,[Object(r["createElementVNode"])("div",null,[Object(r["createVNode"])(c,{uicontrol:"checkbox",name:"deleteReportsEnable","model-value":e.enabled,"onUpdate:modelValue":t[0]||(t[0]=function(t){e.enabled=t,e.reloadDbStats()}),title:e.translate("PrivacyManager_UseDeleteReports"),"inline-help":e.translate("PrivacyManager_DeleteAggregateReportsDetailedInfo")},null,8,["model-value","title","inline-help"])]),Object(r["withDirectives"])(Object(r["createElementVNode"])("div",Zt,[Object(r["createElementVNode"])("span",null,[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.translate("PrivacyManager_DeleteReportsInfo2",e.deleteOldLogsText)),1),en,tn,Object(r["createTextVNode"])(" "+Object(r["toDisplayString"])(e.translate("PrivacyManager_DeleteReportsInfo3",e.deleteOldLogsText)),1)])],512),[[r["vShow"],e.enabled]])]),Object(r["withDirectives"])(Object(r["createElementVNode"])("div",nn,[Object(r["createElementVNode"])("div",null,[Object(r["createVNode"])(c,{uicontrol:"text",name:"deleteReportsOlderThan","model-value":e.deleteOlderThan,"onUpdate:modelValue":t[1]||(t[1]=function(t){e.deleteOlderThan=t,e.reloadDbStats()}),title:e.deleteReportsOlderThanTitle,"inline-help":e.translate("PrivacyManager_LeastMonthsInput","1")},null,8,["model-value","title","inline-help"])]),Object(r["createElementVNode"])("div",null,[Object(r["createVNode"])(c,{uicontrol:"checkbox",name:"deleteReportsKeepBasic","model-value":e.keepBasic,"onUpdate:modelValue":t[2]||(t[2]=function(t){e.keepBasic=t,e.reloadDbStats()}),title:e.deleteReportsKeepBasicTitle,"inline-help":e.translate("PrivacyManager_KeepBasicMetricsReportsDetailedInfo")},null,8,["model-value","title","inline-help"])]),Object(r["createElementVNode"])("h3",null,Object(r["toDisplayString"])(e.translate("PrivacyManager_KeepDataFor")),1),Object(r["createElementVNode"])("div",null,[Object(r["createElementVNode"])("div",null,[Object(r["createVNode"])(c,{uicontrol:"checkbox",name:"deleteReportsKeepDay","model-value":e.keepDataForDay,"onUpdate:modelValue":t[3]||(t[3]=function(t){e.keepDataForDay=t,e.reloadDbStats()}),title:e.translate("General_DailyReports")},null,8,["model-value","title"])]),Object(r["createElementVNode"])("div",null,[Object(r["createVNode"])(c,{uicontrol:"checkbox",name:"deleteReportsKeepWeek","model-value":e.keepDataForWeek,"onUpdate:modelValue":t[4]||(t[4]=function(t){e.keepDataForWeek=t,e.reloadDbStats()}),title:e.translate("General_WeeklyReports")},null,8,["model-value","title"])]),Object(r["createElementVNode"])("div",null,[Object(r["createVNode"])(c,{uicontrol:"checkbox",name:"deleteReportsKeepMonth","model-value":e.keepDataForMonth,"onUpdate:modelValue":t[5]||(t[5]=function(t){e.keepDataForMonth=t,e.reloadDbStats()}),title:"".concat(e.translate("General_MonthlyReports")," (").concat(e.translate("General_Recommended"),")")},null,8,["model-value","title"])]),Object(r["createElementVNode"])("div",null,[Object(r["createVNode"])(c,{uicontrol:"checkbox",name:"deleteReportsKeepYear","model-value":e.keepDataForYear,"onUpdate:modelValue":t[6]||(t[6]=function(t){e.keepDataForYear=t,e.reloadDbStats()}),title:"".concat(e.translate("General_YearlyReports")," (").concat(e.translate("General_Recommended"),")")},null,8,["model-value","title"])]),Object(r["createElementVNode"])("div",null,[Object(r["createVNode"])(c,{uicontrol:"checkbox",name:"deleteReportsKeepRange","model-value":e.keepDataForRange,"onUpdate:modelValue":t[7]||(t[7]=function(t){e.keepDataForRange=t,e.reloadDbStats()}),title:e.translate("General_RangeReports")},null,8,["model-value","title"])]),Object(r["createElementVNode"])("div",null,[Object(r["createVNode"])(c,{uicontrol:"checkbox",name:"deleteReportsKeepSegments","model-value":e.keepDataForSegments,"onUpdate:modelValue":t[8]||(t[8]=function(t){e.keepDataForSegments=t,e.reloadDbStats()}),title:e.translate("PrivacyManager_KeepReportSegments")},null,8,["model-value","title"])])])],512),[[r["vShow"],e.enabled]]),Object(r["createVNode"])(s,{onConfirm:t[9]||(t[9]=function(e){return l.showPasswordConfirmModal=!0}),saving:e.isLoading},null,8,["saving"]),Object(r["createVNode"])(d,{modelValue:e.showPasswordConfirmModal,"onUpdate:modelValue":t[10]||(t[10]=function(t){return e.showPasswordConfirmModal=t}),onConfirmed:e.saveSettings},{default:Object(r["withCtx"])((function(){return[e.enabled&&!e.enableDeleteLogs?(Object(r["openBlock"])(),Object(r["createElementBlock"])("h2",an,Object(r["toDisplayString"])(e.translate("PrivacyManager_DeleteReportsConfirm")),1)):Object(r["createCommentVNode"])("",!0),e.enabled&&e.enableDeleteLogs?(Object(r["openBlock"])(),Object(r["createElementBlock"])("h2",on,Object(r["toDisplayString"])(e.translate("PrivacyManager_DeleteBothConfirm")),1)):Object(r["createCommentVNode"])("",!0)]})),_:1},8,["modelValue","onConfirmed"])],512)),[[u]])}function ln(e){return e?"1":"0"}var cn=Object(r["defineComponent"])({props:{isDataPurgeSettingsEnabled:Boolean,deleteData:{type:Object,required:!0},scheduleDeletionOptions:{type:Object,required:!0}},components:{Field:re["Field"],SaveButton:re["SaveButton"],PasswordConfirmation:re["PasswordConfirmation"]},directives:{Form:re["Form"]},data:function(){return{isLoading:!1,enabled:1===parseInt(this.deleteData.config.delete_reports_enable,10),deleteOlderThan:this.deleteData.config.delete_reports_older_than,keepBasic:1===parseInt(this.deleteData.config.delete_reports_keep_basic_metrics,10),keepDataForDay:1===parseInt(this.deleteData.config.delete_reports_keep_day_reports,10),keepDataForWeek:1===parseInt(this.deleteData.config.delete_reports_keep_week_reports,10),keepDataForMonth:1===parseInt(this.deleteData.config.delete_reports_keep_month_reports,10),keepDataForYear:1===parseInt(this.deleteData.config.delete_reports_keep_year_reports,10),keepDataForRange:1===parseInt(this.deleteData.config.delete_reports_keep_range_reports,10),keepDataForSegments:1===parseInt(this.deleteData.config.delete_reports_keep_segment_reports,10),showPasswordConfirmModal:!1}},created:function(){var e=this;setTimeout((function(){Ft.initSettings(e.settings)}))},methods:{saveSettings:function(e){var t=this,n="PrivacyManager.setDeleteReportsSettings";this.isLoading=!0,Ft.savePurgeDataSettings(n,this.settings,e).finally((function(){t.isLoading=!1}))},reloadDbStats:function(){Ft.updateSettings(this.settings)}},computed:{settings:function(){return{enableDeleteReports:this.enabled,deleteReportsOlderThan:this.deleteOlderThan,keepBasic:ln(this.keepBasic),keepDay:ln(this.keepDataForDay),keepWeek:ln(this.keepDataForWeek),keepMonth:ln(this.keepDataForMonth),keepYear:ln(this.keepDataForYear),keepRange:ln(this.keepDataForRange),keepSegments:ln(this.keepDataForSegments)}},deleteOldLogsText:function(){return Object(ae["translate"])("PrivacyManager_UseDeleteLog")},deleteReportsOlderThanTitle:function(){var e=Object(ae["translate"])("PrivacyManager_DeleteReportsOlderThan");return"".concat(e," (").concat(Object(ae["translate"])("Intl_PeriodMonths"),")")},deleteReportsKeepBasicTitle:function(){var e=Object(ae["translate"])("PrivacyManager_KeepBasicMetrics");return"".concat(e," (").concat(Object(ae["translate"])("General_Recommended"),")")},enableDeleteLogs:function(){return!!Ft.enableDeleteLogs.value}}});cn.render=rn;var sn=cn,dn={id:"formDeleteSettings"},un={id:"deleteSchedulingSettings"},mn={id:"deleteSchedulingSettingsInlineHelp",class:"inline-help-node"},bn={key:0},pn=Object(r["createElementVNode"])("br",null,null,-1),gn=Object(r["createElementVNode"])("br",null,null,-1),On=Object(r["createElementVNode"])("br",null,null,-1),jn=Object(r["createElementVNode"])("br",null,null,-1),vn={key:0,id:"deleteDataEstimateSect",class:"form-group row"},hn={class:"col s12",id:"databaseSizeHeadline"},fn={class:"col s12 m6"},yn=["innerHTML"],Vn=Object(r["createTextVNode"])(""),Dn={class:"col s12 m6"},Nn={key:0,class:"form-help"},Sn={class:"ui-confirm",id:"saveSettingsBeforePurge"},En=["value"];function Cn(e,t,n,a,o,i){var l=Object(r["resolveComponent"])("ActivityIndicator"),c=Object(r["resolveComponent"])("Field"),s=Object(r["resolveComponent"])("SaveButton"),d=Object(r["resolveComponent"])("PasswordConfirmation"),u=Object(r["resolveComponent"])("ContentBlock"),m=Object(r["resolveDirective"])("form");return Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],null,[Object(r["withDirectives"])(Object(r["createElementVNode"])("div",dn,[Object(r["withDirectives"])(Object(r["createVNode"])(u,{id:"scheduleSettingsHeadline","content-title":e.translate("PrivacyManager_DeleteSchedulingSettings")},{default:Object(r["withCtx"])((function(){return[Object(r["createElementVNode"])("div",un,[Object(r["createElementVNode"])("div",null,[Object(r["createVNode"])(c,{uicontrol:"select",name:"deleteLowestInterval",title:e.translate("PrivacyManager_DeleteDataInterval"),modelValue:e.deleteLowestInterval,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.deleteLowestInterval=t}),options:e.scheduleDeletionOptions},{"inline-help":Object(r["withCtx"])((function(){return[Object(r["createElementVNode"])("div",mn,[e.deleteData.lastRun?(Object(r["openBlock"])(),Object(r["createElementBlock"])("span",bn,[Object(r["createElementVNode"])("strong",null,Object(r["toDisplayString"])(e.translate("PrivacyManager_LastDelete"))+":",1),Object(r["createTextVNode"])(" "+Object(r["toDisplayString"])(e.deleteData.lastRunPretty)+" ",1),pn,gn])):Object(r["createCommentVNode"])("",!0),Object(r["createElementVNode"])("strong",null,Object(r["toDisplayString"])(e.translate("PrivacyManager_NextDelete"))+":",1),Object(r["createTextVNode"])(" "+Object(r["toDisplayString"])(e.deleteData.nextRunPretty)+" ",1),On,jn,Object(r["withDirectives"])(Object(r["createElementVNode"])("a",{id:"purgeDataNowLink",href:"#",onClick:t[0]||(t[0]=Object(r["withModifiers"])((function(t){return e.executeDataPurge()}),["prevent"]))},Object(r["toDisplayString"])(e.translate("PrivacyManager_PurgeNow")),513),[[r["vShow"],e.showPurgeNowLink]]),Object(r["createVNode"])(l,{"loading-message":e.translate("PrivacyManager_PurgingData"),loading:e.loadingDataPurge},null,8,["loading-message","loading"]),Object(r["withDirectives"])(Object(r["createElementVNode"])("span",{id:"db-purged-message"},Object(r["toDisplayString"])(e.translate("PrivacyManager_DBPurged")),513),[[r["vShow"],e.dataWasPurged]])])]})),_:1},8,["title","modelValue","options"])])]),"1"===e.deleteData.config.enable_database_size_estimate||1===e.deleteData.config.enable_database_size_estimate?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",vn,[Object(r["createElementVNode"])("h3",hn,Object(r["toDisplayString"])(e.translate("PrivacyManager_ReportsDataSavedEstimate")),1),Object(r["createElementVNode"])("div",fn,[Object(r["withDirectives"])(Object(r["createElementVNode"])("div",{id:"deleteDataEstimate",innerHTML:e.$sanitize(e.estimation)},null,8,yn),[[r["vShow"],e.showEstimate]]),Vn,Object(r["createVNode"])(l,{loading:e.loadingEstimation},null,8,["loading"])]),Object(r["createElementVNode"])("div",Dn,["1"!==e.deleteData.config.enable_auto_database_size_estimate&&1!==e.deleteData.config.enable_auto_database_size_estimate?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",Nn,[Object(r["createElementVNode"])("a",{id:"getPurgeEstimateLink",href:"#",onClick:t[2]||(t[2]=Object(r["withModifiers"])((function(t){return e.getPurgeEstimate()}),["prevent"]))},Object(r["toDisplayString"])(e.translate("PrivacyManager_GetPurgeEstimate")),1)])):Object(r["createCommentVNode"])("",!0)])])):Object(r["createCommentVNode"])("",!0),Object(r["createVNode"])(s,{onConfirm:t[3]||(t[3]=function(t){return e.showPasswordConfirmModal=!0}),saving:e.isLoading},null,8,["saving"]),Object(r["createVNode"])(d,{modelValue:e.showPasswordConfirmModal,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.showPasswordConfirmModal=t}),onConfirmed:e.save},null,8,["modelValue","onConfirmed"]),Object(r["createVNode"])(d,{modelValue:e.showPasswordConfirmModalForPurge,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.showPasswordConfirmModalForPurge=t}),onConfirmed:e.executePurgeNow},{default:Object(r["withCtx"])((function(){return[Object(r["createElementVNode"])("h2",null,Object(r["toDisplayString"])(e.translate("PrivacyManager_PurgeNowConfirm")),1)]})),_:1},8,["modelValue","onConfirmed"])]})),_:1},8,["content-title"]),[[r["vShow"],e.isEitherDeleteSectionEnabled]])],512),[[m]]),Object(r["createElementVNode"])("div",Sn,[Object(r["createElementVNode"])("h2",null,Object(r["toDisplayString"])(e.translate("PrivacyManager_SaveSettingsBeforePurge")),1),Object(r["createElementVNode"])("input",{role:"yes",type:"button",value:e.translate("General_Ok")},null,8,En)])],64)}var kn=Object(r["defineComponent"])({props:{isDataPurgeSettingsEnabled:Boolean,deleteData:{type:Object,required:!0},scheduleDeletionOptions:{type:Object,required:!0}},components:{ContentBlock:ae["ContentBlock"],ActivityIndicator:ae["ActivityIndicator"],Field:re["Field"],SaveButton:re["SaveButton"],PasswordConfirmation:re["PasswordConfirmation"]},directives:{Form:re["Form"]},data:function(){return{isLoading:!1,loadingDataPurge:!1,dataWasPurged:!1,showPurgeNowLink:!0,deleteLowestInterval:this.deleteData.config.delete_logs_schedule_lowest_interval,showPasswordConfirmModal:!1,showPasswordConfirmModalForPurge:!1}},methods:{save:function(e){var t="PrivacyManager.setScheduleReportDeletionSettings";Ft.savePurgeDataSettings(t,{deleteLowestInterval:this.deleteLowestInterval},e)},executeDataPurge:function(){Ft.state.value.isModified?ae["Matomo"].helper.modalConfirm("#saveSettingsBeforePurge",{yes:function(){return null}}):this.showPasswordConfirmModalForPurge=!0},getPurgeEstimate:function(){return Ft.reloadDbStats(!0)},executePurgeNow:function(e){var t=this;return this.loadingDataPurge=!0,this.showPurgeNowLink=!1,ae["AjaxHelper"].post({module:"API",method:"PrivacyManager.executeDataPurge"},{passwordConfirmation:e}).then((function(){Ft.reloadDbStats(),t.dataWasPurged=!0,setTimeout((function(){t.dataWasPurged=!1,t.showPurgeNowLink=!0}),2e3)})).catch((function(){t.showPurgeNowLink=!0})).finally((function(){t.loadingDataPurge=!1}))}},computed:{showEstimate:function(){return Ft.state.value.showEstimate},isEitherDeleteSectionEnabled:function(){return Ft.isEitherDeleteSectionEnabled()},estimation:function(){return Ft.state.value.estimation},loadingEstimation:function(){return Ft.state.value.loadingEstimation}}});kn.render=Cn;var _n=kn,Pn=["innerHTML"],Mn=["innerHTML"],wn=["innerHTML"],zn=Object(r["createElementVNode"])("br",null,null,-1),Tn=Object(r["createElementVNode"])("br",null,null,-1),An=["innerHTML"],In=Object(r["createElementVNode"])("br",null,null,-1),Ln=Object(r["createElementVNode"])("br",null,null,-1),Bn=["innerHTML"],xn=["innerHTML"],Fn=Object(r["createElementVNode"])("p",null,null,-1),Rn=["innerHTML"];function Un(e,t,n,a,o,i){var l=Object(r["resolveComponent"])("ContentBlock"),c=Object(r["resolveDirective"])("content-intro");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",null,[Object(r["withDirectives"])(Object(r["createElementVNode"])("div",null,[Object(r["createElementVNode"])("h2",null,Object(r["toDisplayString"])(e.translate("PrivacyManager_AskingForConsent")),1),Object(r["createElementVNode"])("p",null,Object(r["toDisplayString"])(e.translate("PrivacyManager_ConsentExplanation")),1)],512),[[c]]),e.consentManagerName?(Object(r["openBlock"])(),Object(r["createBlock"])(l,{key:0,"content-title":e.translate("PrivacyManager_ConsentManager"),class:"privacyAskingForConsent"},{default:Object(r["withCtx"])((function(){return[Object(r["createElementVNode"])("p",{innerHTML:e.$sanitize(e.consentManagerDetectedText)},null,8,Pn),e.consentManagerIsConnected?(Object(r["openBlock"])(),Object(r["createElementBlock"])("p",{key:0,innerHTML:e.$sanitize(e.translate("PrivacyManager_ConsentManagerConnected",e.consentManagerName))},null,8,Mn)):Object(r["createCommentVNode"])("",!0)]})),_:1},8,["content-title"])):Object(r["createCommentVNode"])("",!0),Object(r["createVNode"])(l,{"content-title":e.translate("PrivacyManager_WhenDoINeedConsent"),class:"privacyAskingForConsent"},{default:Object(r["withCtx"])((function(){return[Object(r["createElementVNode"])("p",null,[Object(r["createElementVNode"])("span",{innerHTML:e.$sanitize(e.whenConsentIsNeeded1)},null,8,wn),zn,Tn,Object(r["createElementVNode"])("span",{innerHTML:e.$sanitize(e.whenConsentIsNeeded2)},null,8,An),In,Ln,Object(r["createElementVNode"])("span",{innerHTML:e.$sanitize(e.whenConsentIsNeeded3)},null,8,Bn)])]})),_:1},8,["content-title"]),Object(r["createVNode"])(l,{"content-title":e.translate("PrivacyManager_HowDoIAskForConsent"),class:"privacyAskingForConsent"},{default:Object(r["withCtx"])((function(){return[Object(r["createElementVNode"])("p",null,Object(r["toDisplayString"])(e.translate("PrivacyManager_HowDoIAskForConsentIntro")),1),Object(r["createElementVNode"])("ul",{innerHTML:e.$sanitize(e.consentManagersList)},null,8,xn),Fn,Object(r["createElementVNode"])("p",{innerHTML:e.$sanitize(e.howDoIAskForConsentOthers)},null,8,Rn)]})),_:1},8,["content-title"])])}function Hn(e,t){return Wn(e)||Kn(e,t)||Gn(e,t)||qn()}function qn(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Gn(e,t){if(e){if("string"===typeof e)return $n(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$n(e,t):void 0}}function $n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function Kn(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,o,r=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(a=n.next()).done);i=!0)if(r.push(a.value),t&&r.length===t)break}catch(c){l=!0,o=c}finally{try{i||null==n["return"]||n["return"]()}finally{if(l)throw o}}return r}}function Wn(e){if(Array.isArray(e))return e}var Yn=Object(r["defineComponent"])({props:{consentManagerName:{type:String,required:!0},consentManagerUrl:{type:String,required:!0},consentManagerIsConnected:{type:Boolean,required:!0},consentManagers:{type:Object,required:!0}},components:{ContentBlock:ae["ContentBlock"]},directives:{ContentIntro:ae["ContentIntro"]},computed:{whenConsentIsNeeded1:function(){return Object(ae["translate"])("PrivacyManager_WhenConsentIsNeededPart1",Object(ae["externalLink"])("https://matomo.org/faq/new-to-piwik/what-is-gdpr/"),"</a>")},whenConsentIsNeeded2:function(){var e="https://matomo.org/blog/2018/04/lawful-basis-for-processing-personal-data-under-gdpr-with-matomo/";return Object(ae["translate"])("PrivacyManager_WhenConsentIsNeededPart2",Object(ae["externalLink"])(e),"</a>")},whenConsentIsNeeded3:function(){return Object(ae["translate"])("PrivacyManager_WhenConsentIsNeededPart3",Object(ae["externalLink"])("https://matomo.org/faq/how-to/faq_35661/"),"</a>")},howDoIAskForConsentOthers:function(){return Object(ae["translate"])("PrivacyManager_HowDoIAskForConsentOutro",Object(ae["externalLink"])("https://developer.matomo.org/guides/tracking-consent"),"</a>")},consentManagersList:function(){var e="";return Object.entries(this.consentManagers).forEach((function(t){var n=Hn(t,2),a=n[0],o=n[1],r=Object(ae["externalRawLink"])(o);e+="<li>"+'  <a href="'.concat(r,'"')+'     target="_blank" rel="noreferrer noopener">'+"    ".concat(a," ").concat(Object(ae["translate"])("PrivacyManager_ConsentManager"))+"  </a></li>"})),e},consentManagerDetectedText:function(){return Object(ae["translate"])("PrivacyManager_ConsentManagerDetected",this.consentManagerName,'<a href="'.concat(this.consentManagerUrl,'" target="_blank" rel="noreferrer noopener">'),"</a>")}}});Yn.render=Un;var Jn=Yn,Qn={class:"gdprOverview"},Xn=Object(r["createElementVNode"])("br",null,null,-1),Zn=Object(r["createElementVNode"])("br",null,null,-1),ea=Object(r["createElementVNode"])("br",null,null,-1),ta=Object(r["createElementVNode"])("br",null,null,-1),na=["innerHTML"],aa=["innerHTML"],oa=["innerHTML"],ra=["innerHTML"],ia=["innerHTML"],la=["innerHTML"],ca=["innerHTML"],sa=["innerHTML"],da=["innerHTML"],ua=["innerHTML"],ma=["innerHTML"],ba=["innerHTML"],pa=["innerHTML"],ga=["innerHTML"],Oa=["innerHTML"],ja=["innerHTML"],va=Object(r["createElementVNode"])("br",null,null,-1);function ha(e,t,n,a,o,i){var l=Object(r["resolveComponent"])("VueEntryContainer"),c=Object(r["resolveComponent"])("ContentBlock"),s=Object(r["resolveDirective"])("content-intro");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",Qn,[Object(r["withDirectives"])(Object(r["createElementVNode"])("div",null,[Object(r["createElementVNode"])("h2",null,Object(r["toDisplayString"])(e.translate("PrivacyManager_GdprOverview")),1),Object(r["createElementVNode"])("p",null,[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.translate("PrivacyManager_GdprOverviewIntro1"))+" ",1),Xn,Zn,Object(r["createTextVNode"])(" "+Object(r["toDisplayString"])(e.translate("PrivacyManager_GdprOverviewIntro2")),1)])],512),[[s]]),Object(r["createVNode"])(l,{html:e.afterGDPROverviewIntroContent},null,8,["html"]),Object(r["createVNode"])(c,{"content-title":e.translate("PrivacyManager_GdprChecklists")},{default:Object(r["withCtx"])((function(){return[Object(r["createElementVNode"])("p",null,[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.translate("PrivacyManager_GdprChecklistDesc1"))+" ",1),ea,ta,Object(r["createElementVNode"])("span",{innerHTML:e.$sanitize(e.gdprChecklistDesc2)},null,8,na)])]})),_:1},8,["content-title"]),Object(r["createVNode"])(c,{"content-title":e.translate("PrivacyManager_IndividualsRights")},{default:Object(r["withCtx"])((function(){return[Object(r["createElementVNode"])("p",null,Object(r["toDisplayString"])(e.translate("PrivacyManager_IndividualsRightsIntro")),1),Object(r["createElementVNode"])("ol",null,[Object(r["createElementVNode"])("li",null,Object(r["toDisplayString"])(e.translate("PrivacyManager_IndividualsRightsInform")),1),Object(r["createElementVNode"])("li",{innerHTML:e.$sanitize(e.rightsLinkText("IndividualsRightsAccess"))},null,8,aa),Object(r["createElementVNode"])("li",{innerHTML:e.$sanitize(e.rightsLinkText("IndividualsRightsErasure"))},null,8,oa),Object(r["createElementVNode"])("li",{innerHTML:e.$sanitize(e.rightsLinkText("IndividualsRightsRectification"))},null,8,ra),Object(r["createElementVNode"])("li",{innerHTML:e.$sanitize(e.rightsLinkText("IndividualsRightsPortability"))},null,8,ia),Object(r["createElementVNode"])("li",{innerHTML:e.$sanitize(e.rightsLinkText("IndividualsRightsObject","usersOptOut"))},null,8,la),Object(r["createElementVNode"])("li",null,Object(r["toDisplayString"])(e.translate("PrivacyManager_IndividualsRightsChildren")),1)])]})),_:1},8,["content-title"]),Object(r["createVNode"])(c,{"content-title":e.translate("PrivacyManager_AwarenessDocumentation")},{default:Object(r["withCtx"])((function(){return[Object(r["createElementVNode"])("p",null,Object(r["toDisplayString"])(e.translate("PrivacyManager_AwarenessDocumentationIntro")),1),Object(r["createElementVNode"])("ol",null,[Object(r["createElementVNode"])("li",null,Object(r["toDisplayString"])(e.translate("PrivacyManager_AwarenessDocumentationDesc1")),1),Object(r["createElementVNode"])("li",null,Object(r["toDisplayString"])(e.translate("PrivacyManager_AwarenessDocumentationDesc2")),1),Object(r["createElementVNode"])("li",{innerHTML:e.$sanitize(e.awarenessDocumentationDesc3)},null,8,ca),Object(r["createElementVNode"])("li",{innerHTML:e.$sanitize(e.awarenessDocumentationDesc4)},null,8,sa)])]})),_:1},8,["content-title"]),Object(r["createVNode"])(c,{"content-title":e.translate("PrivacyManager_SecurityProcedures")},{default:Object(r["withCtx"])((function(){return[Object(r["createElementVNode"])("p",null,Object(r["toDisplayString"])(e.translate("PrivacyManager_SecurityProceduresIntro")),1),Object(r["createElementVNode"])("ol",null,[Object(r["createElementVNode"])("li",{innerHTML:e.$sanitize(e.securityProceduresDesc1)},null,8,da),Object(r["createElementVNode"])("li",{innerHTML:e.$sanitize(e.securityProceduresDesc2)},null,8,ua),Object(r["createElementVNode"])("li",{innerHTML:e.$sanitize(e.securityProceduresDesc3)},null,8,ma),Object(r["createElementVNode"])("li",{innerHTML:e.$sanitize(e.securityProceduresDesc4)},null,8,ba)])]})),_:1},8,["content-title"]),Object(r["createVNode"])(c,{"content-title":e.translate("PrivacyManager_DataRetention")},{default:Object(r["withCtx"])((function(){return[Object(r["createElementVNode"])("p",null,Object(r["toDisplayString"])(e.translate("PrivacyManager_DataRetentionInMatomo")),1),Object(r["createElementVNode"])("ul",null,[e.deleteLogsEnable?(Object(r["openBlock"])(),Object(r["createElementBlock"])("li",{key:0,innerHTML:e.$sanitize(e.translate("PrivacyManager_RawDataRemovedAfter","<strong>".concat(e.rawDataRetention,"</strong>")))},null,8,pa)):(Object(r["openBlock"])(),Object(r["createElementBlock"])("li",{key:1,innerHTML:e.$sanitize(e.translate("PrivacyManager_RawDataNeverRemoved"))},null,8,ga)),e.deleteReportsEnable?(Object(r["openBlock"])(),Object(r["createElementBlock"])("li",{key:2,innerHTML:e.$sanitize(e.translate("PrivacyManager_ReportsRemovedAfter","<strong>".concat(e.reportRetention,"</strong>")))},null,8,Oa)):(Object(r["openBlock"])(),Object(r["createElementBlock"])("li",{key:3,innerHTML:e.$sanitize(e.translate("PrivacyManager_ReportsNeverRemoved"))},null,8,ja))]),Object(r["createElementVNode"])("p",null,[va,Object(r["createTextVNode"])(" "+Object(r["toDisplayString"])(e.translate("PrivacyManager_DataRetentionOverall")),1)])]})),_:1},8,["content-title"])])}function fa(e,t){return Object(ae["translate"])("PrivacyManager_".concat(e),Object(ae["externalLink"])(t),"</a>")}var ya=Object(r["defineComponent"])({props:{afterGDPROverviewIntroContent:String,deleteLogsEnable:Boolean,deleteReportsEnable:Boolean,rawDataRetention:null,reportRetention:null},components:{ContentBlock:ae["ContentBlock"],VueEntryContainer:ae["VueEntryContainer"]},directives:{ContentIntro:ae["ContentIntro"]},methods:{rightsLinkText:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"gdprTools",n="?".concat(ae["MatomoUrl"].stringify({module:"PrivacyManager",action:t}));return Object(ae["translate"])("PrivacyManager_".concat(e),'<a target="_blank" rel="noreferrer noopener" href="'.concat(n,'">'),"</a>")}},computed:{gdprChecklistDesc2:function(){return fa("GdprChecklistDesc2","https://matomo.org/docs/gdpr")},awarenessDocumentationDesc3:function(){return fa("AwarenessDocumentationDesc3","https://matomo.org/faq/general/faq_18254/")},awarenessDocumentationDesc4:function(){return fa("AwarenessDocumentationDesc4","https://matomo.org/blog/2018/04/gdpr-how-to-fill-in-the-information-asset-register-when-using-matomo/")},securityProceduresDesc1:function(){return fa("SecurityProceduresDesc1","https://matomo.org/docs/security/")},securityProceduresDesc2:function(){return fa("SecurityProceduresDesc2","https://ico.org.uk/for-organisations/guide-to-the-general-data-protection-regulation-gdpr/international-transfers/")},securityProceduresDesc3:function(){return fa("SecurityProceduresDesc3","https://ico.org.uk/for-organisations/guide-to-the-general-data-protection-regulation-gdpr/personal-data-breaches/")},securityProceduresDesc4:function(){return fa("SecurityProceduresDesc4","https://www.cnil.fr/en/guidelines-dpia")}}});ya.render=ha;var Va=ya,Da={key:0},Na=Object(r["createElementVNode"])("br",null,null,-1),Sa={key:1},Ea=Object(r["createElementVNode"])("br",null,null,-1),Ca={key:2},ka={key:3},_a={key:0},Pa=["title"],Ma={key:1},wa=["title"],za={key:2},Ta=["title"];function Aa(e,t,n,a,o,i){var l=Object(r["resolveDirective"])("content-table");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",null,[Object(r["createElementVNode"])("h3",null,Object(r["toDisplayString"])(e.translate("PrivacyManager_PreviousRawDataAnonymizations")),1),Object(r["withDirectives"])(Object(r["createElementVNode"])("table",null,[Object(r["createElementVNode"])("thead",null,[Object(r["createElementVNode"])("tr",null,[Object(r["createElementVNode"])("th",null,Object(r["toDisplayString"])(e.translate("PrivacyManager_Requester")),1),Object(r["createElementVNode"])("th",null,Object(r["toDisplayString"])(e.translate("PrivacyManager_AffectedIDSites")),1),Object(r["createElementVNode"])("th",null,Object(r["toDisplayString"])(e.translate("PrivacyManager_AffectedDate")),1),Object(r["createElementVNode"])("th",null,Object(r["toDisplayString"])(e.translate("PrivacyManager_Anonymize")),1),Object(r["createElementVNode"])("th",null,Object(r["toDisplayString"])(e.translate("PrivacyManager_VisitColumns")),1),Object(r["createElementVNode"])("th",null,Object(r["toDisplayString"])(e.translate("PrivacyManager_LinkVisitActionColumns")),1),Object(r["createElementVNode"])("th",null,Object(r["toDisplayString"])(e.translate("CorePluginsAdmin_Status")),1)])]),Object(r["createElementVNode"])("tbody",null,[(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(e.anonymizations,(function(t,n){return Object(r["openBlock"])(),Object(r["createElementBlock"])("tr",{key:n},[Object(r["createElementVNode"])("td",null,Object(r["toDisplayString"])(t.requester),1),Object(r["createElementVNode"])("td",null,Object(r["toDisplayString"])(t.sites.join(", ")),1),Object(r["createElementVNode"])("td",null,Object(r["toDisplayString"])(t.date_start)+" - "+Object(r["toDisplayString"])(t.date_end),1),Object(r["createElementVNode"])("td",null,[t.anonymize_ip?(Object(r["openBlock"])(),Object(r["createElementBlock"])("span",Da,[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.translate("PrivacyManager_IPAddress")),1),Na])):Object(r["createCommentVNode"])("",!0),t.anonymize_location?(Object(r["openBlock"])(),Object(r["createElementBlock"])("span",Sa,[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.translate("Overlay_Location")),1),Ea])):Object(r["createCommentVNode"])("",!0),t.anonymize_userid?(Object(r["openBlock"])(),Object(r["createElementBlock"])("span",Ca,Object(r["toDisplayString"])(e.translate("General_UserId")),1)):Object(r["createCommentVNode"])("",!0),t.anonymize_ip||t.anonymize_location||t.anonymize_userid?Object(r["createCommentVNode"])("",!0):(Object(r["openBlock"])(),Object(r["createElementBlock"])("span",ka,"-"))]),Object(r["createElementVNode"])("td",null,Object(r["toDisplayString"])(t.unset_visit_columns.join(", ")),1),Object(r["createElementVNode"])("td",null,Object(r["toDisplayString"])(t.unset_link_visit_action_columns.join(", ")),1),Object(r["createElementVNode"])("td",null,[t.job_start_date?t.job_start_date&&!t.job_finish_date?(Object(r["openBlock"])(),Object(r["createElementBlock"])("span",Ma,[Object(r["createElementVNode"])("span",{class:"icon-info",style:{cursor:"help"},title:"".concat(e.translate("PrivacyManager_ScheduledDate",t.scheduled_date||""),".\n").concat(e.translate("PrivacyManager_JobStartDate",t.job_start_date),".\n").concat(e.translate("PrivacyManager_CurrentOutput",t.output))},null,8,wa),Object(r["createTextVNode"])(" "+Object(r["toDisplayString"])(e.translate("PrivacyManager_InProgress")),1)])):(Object(r["openBlock"])(),Object(r["createElementBlock"])("span",za,[Object(r["createElementVNode"])("span",{class:"icon-info",style:{cursor:"help"},title:"".concat(e.translate("PrivacyManager_ScheduledDate",t.scheduled_date||""),".\n").concat(e.translate("PrivacyManager_JobStartDate",t.job_start_date),".\n").concat(e.translate("PrivacyManager_JobFinishDate",t.job_finish_date),".\n").concat(e.translate("PrivacyManager_Output",t.output))},null,8,Ta),Object(r["createTextVNode"])(" "+Object(r["toDisplayString"])(e.translate("General_Done")),1)])):(Object(r["openBlock"])(),Object(r["createElementBlock"])("span",_a,[Object(r["createElementVNode"])("span",{class:"icon-info",style:{cursor:"help"},title:"".concat(e.translate("PrivacyManager_ScheduledDate",t.scheduled_date||""))},null,8,Pa),Object(r["createTextVNode"])(" "+Object(r["toDisplayString"])(e.translate("PrivacyManager_Scheduled")),1)]))])])})),128))])],512),[[l]])])}var Ia=Object(r["defineComponent"])({props:{anonymizations:{type:Array,required:!0}},directives:{ContentTable:ae["ContentTable"]}});Ia.render=Aa;var La=Ia,Ba=["innerHTML"],xa=["innerHTML"],Fa={key:0},Ra=Object(r["createElementVNode"])("a",{name:"anonymizeHistoricalData",id:"anonymizeHistoricalData"},null,-1),Ua={key:1},Ha=Object(r["createElementVNode"])("br",null,null,-1);function qa(e,t,n,a,o,i){var l=Object(r["resolveComponent"])("EnrichedHeadline"),c=Object(r["resolveComponent"])("AnonymizeIp"),s=Object(r["resolveComponent"])("ContentBlock"),d=Object(r["resolveComponent"])("DeleteOldLogs"),u=Object(r["resolveComponent"])("DeleteOldReports"),m=Object(r["resolveComponent"])("ScheduleReportDeletion"),b=Object(r["resolveComponent"])("AnonymizeLogData"),p=Object(r["resolveComponent"])("PreviousAnonymizations"),g=Object(r["resolveDirective"])("content-intro");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",null,[Object(r["withDirectives"])(Object(r["createElementVNode"])("div",null,[Object(r["createElementVNode"])("h2",null,[Object(r["createVNode"])(l,{"help-url":e.externalRawLink("https://matomo.org/docs/privacy/")},{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.translate("PrivacyManager_AnonymizeData")),1)]})),_:1},8,["help-url"])]),Object(r["createElementVNode"])("p",null,[Object(r["createElementVNode"])("span",{innerHTML:e.$sanitize(e.teaserHeader),style:{"margin-right":"3.5px"}},null,8,Ba),Object(r["createElementVNode"])("span",{innerHTML:e.$sanitize(e.seeAlsoOurOfficialGuide)},null,8,xa)])],512),[[g]]),Object(r["createVNode"])(s,{id:"anonymizeIPAnchor","content-title":e.translate("PrivacyManager_UseAnonymizeTrackingData")},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(c,{"anonymize-ip-enabled":e.anonymizeIpEnabled,"anonymize-user-id":e.anonymizeUserId,"mask-length":e.maskLength,"use-anonymized-ip-for-visit-enrichment":e.useAnonymizedIpForVisitEnrichment,"anonymize-order-id":e.anonymizeOrderId,"force-cookieless-tracking":e.forceCookielessTracking,"anonymize-referrer":e.anonymizeReferrer,"mask-length-options":e.maskLengthOptions,"use-anonymized-ip-for-visit-enrichment-options":e.useAnonymizedIpForVisitEnrichmentOptions,"tracker-file-name":e.trackerFileName,"tracker-writable":e.trackerWritable,"referrer-anonymization-options":e.referrerAnonymizationOptions,"randomize-config-id":e.randomizeConfigId,"config-randomisation-feature-flag":e.configRandomisationFeatureFlag},null,8,["anonymize-ip-enabled","anonymize-user-id","mask-length","use-anonymized-ip-for-visit-enrichment","anonymize-order-id","force-cookieless-tracking","anonymize-referrer","mask-length-options","use-anonymized-ip-for-visit-enrichment-options","tracker-file-name","tracker-writable","referrer-anonymization-options","randomize-config-id","config-randomisation-feature-flag"])]})),_:1},8,["content-title"]),e.isDataPurgeSettingsEnabled?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",Fa,[Object(r["createVNode"])(s,{id:"deleteLogsAnchor","content-title":e.translate("PrivacyManager_DeleteOldRawData")},{default:Object(r["withCtx"])((function(){return[Object(r["createElementVNode"])("p",null,Object(r["toDisplayString"])(e.translate("PrivacyManager_DeleteDataDescription")),1),Object(r["createVNode"])(d,{"is-data-purge-settings-enabled":e.isDataPurgeSettingsEnabled,"delete-data":e.deleteData,"schedule-deletion-options":e.scheduleDeletionOptions},null,8,["is-data-purge-settings-enabled","delete-data","schedule-deletion-options"])]})),_:1},8,["content-title"]),Object(r["createVNode"])(s,{id:"deleteReportsAnchor","content-title":e.translate("PrivacyManager_DeleteOldAggregatedReports")},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(u,{"is-data-purge-settings-enabled":e.isDataPurgeSettingsEnabled,"delete-data":e.deleteData,"schedule-deletion-options":e.scheduleDeletionOptions},null,8,["is-data-purge-settings-enabled","delete-data","schedule-deletion-options"])]})),_:1},8,["content-title"]),Object(r["createVNode"])(m,{"is-data-purge-settings-enabled":e.isDataPurgeSettingsEnabled,"delete-data":e.deleteData,"schedule-deletion-options":e.scheduleDeletionOptions},null,8,["is-data-purge-settings-enabled","delete-data","schedule-deletion-options"])])):Object(r["createCommentVNode"])("",!0),Ra,Object(r["createVNode"])(s,{"content-title":e.translate("PrivacyManager_AnonymizePreviousData"),class:"logDataAnonymizer"},{default:Object(r["withCtx"])((function(){return[Object(r["createElementVNode"])("p",null,Object(r["toDisplayString"])(e.translate("PrivacyManager_AnonymizePreviousDataDescription")),1),e.isSuperUser?(Object(r["openBlock"])(),Object(r["createBlock"])(b,{key:0})):(Object(r["openBlock"])(),Object(r["createElementBlock"])("p",Ua,Object(r["toDisplayString"])(e.translate("PrivacyManager_AnonymizePreviousDataOnlySuperUser")),1)),Ha,Object(r["createVNode"])(p,{anonymizations:e.anonymizations},null,8,["anonymizations"])]})),_:1},8,["content-title"])])}var Ga=Object(r["defineComponent"])({props:{anonymizeIpEnabled:Boolean,anonymizeUserId:Boolean,maskLength:{type:Number,required:!0},useAnonymizedIpForVisitEnrichment:[Boolean,String,Number],anonymizeOrderId:Boolean,forceCookielessTracking:Boolean,anonymizeReferrer:String,maskLengthOptions:{type:Array,required:!0},useAnonymizedIpForVisitEnrichmentOptions:{type:Array,required:!0},trackerFileName:{type:String,required:!0},trackerWritable:{type:Boolean,required:!0},referrerAnonymizationOptions:{type:Object,required:!0},isDataPurgeSettingsEnabled:Boolean,deleteData:{type:Object,required:!0},scheduleDeletionOptions:{type:Object,required:!0},anonymizations:{type:Array,required:!0},isSuperUser:Boolean,randomizeConfigId:Boolean,configRandomisationFeatureFlag:Boolean},components:{AnonymizeIp:he,EnrichedHeadline:ae["EnrichedHeadline"],ContentBlock:ae["ContentBlock"],DeleteOldLogs:Jt,DeleteOldReports:sn,ScheduleReportDeletion:_n,AnonymizeLogData:Mt,PreviousAnonymizations:La},directives:{ContentIntro:ae["ContentIntro"]},computed:{teaserHeader:function(){return Object(ae["translate"])("PrivacyManager_TeaserHeader",'<a href="#anonymizeIPAnchor">',"</a>",'<a href="#deleteLogsAnchor">',"</a>",'<a href="#anonymizeHistoricalData">',"</a>")},seeAlsoOurOfficialGuide:function(){return Object(ae["translate"])("PrivacyManager_SeeAlsoOurOfficialGuidePrivacy",Object(ae["externalLink"])("https://matomo.org/privacy/"),"</a>")}}});Ga.render=qa;var $a=Ga,Ka={key:0},Wa=Object(r["createElementVNode"])("br",null,null,-1),Ya={key:1};function Ja(e,t,n,a,o,i){var l=Object(r["resolveComponent"])("OptOutCustomizer"),c=Object(r["resolveComponent"])("ContentBlock"),s=Object(r["resolveComponent"])("Alert"),d=Object(r["resolveComponent"])("DoNotTrackPreference");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",null,[Object(r["createVNode"])(c,{"content-title":e.translate("PrivacyManager_TrackingOptOut")},{default:Object(r["withCtx"])((function(){return[(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(e.prefaceComponentsResolved,(function(e,t){return Object(r["openBlock"])(),Object(r["createBlock"])(Object(r["resolveDynamicComponent"])(e),{key:t})})),128)),Object(r["createVNode"])(l,{"matomo-url":e.matomoUrl,language:e.language,"language-options":e.languageOptions},null,8,["matomo-url","language","language-options"])]})),_:1},8,["content-title"]),e.isSuperUser?(Object(r["openBlock"])(),Object(r["createBlock"])(c,{key:0,id:"DNT","content-title":e.translate("PrivacyManager_DoNotTrack_SupportDNTPreference")},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(s,{severity:"warning"},{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.translate("PrivacyManager_DoNotTrack_Deprecated")),1)]})),_:1}),Object(r["createElementVNode"])("p",null,[e.dntSupport?(Object(r["openBlock"])(),Object(r["createElementBlock"])("span",Ka,[Object(r["createElementVNode"])("strong",null,Object(r["toDisplayString"])(e.translate("PrivacyManager_DoNotTrack_Enabled")),1),Wa,Object(r["createTextVNode"])(" "+Object(r["toDisplayString"])(e.translate("PrivacyManager_DoNotTrack_EnabledMoreInfo")),1)])):(Object(r["openBlock"])(),Object(r["createElementBlock"])("span",Ya,Object(r["toDisplayString"])(e.translate("PrivacyManager_DoNotTrack_Disabled"))+" "+Object(r["toDisplayString"])(e.translate("PrivacyManager_DoNotTrack_DisabledMoreInfo")),1))]),Object(r["createVNode"])(d,{"dnt-support":e.dntSupport,"do-not-track-options":e.doNotTrackOptions},null,8,["dnt-support","do-not-track-options"])]})),_:1},8,["content-title"])):Object(r["createCommentVNode"])("",!0)])}var Qa=Object(r["defineComponent"])({props:{language:{type:String,required:!0},matomoUrl:String,isSuperUser:Boolean,dntSupport:Boolean,doNotTrackOptions:{type:Array,required:!0},languageOptions:{type:Object,required:!0}},components:{Alert:ae["Alert"],ContentBlock:ae["ContentBlock"],DoNotTrackPreference:Tt,OptOutCustomizer:Ke},data:function(){return{prefaceComponents:[]}},computed:{prefaceComponentsResolved:function(){return Object(r["markRaw"])(this.prefaceComponents.map((function(e){return Object(r["markRaw"])(Object(ae["useExternalPluginComponent"])(e.plugin,e.component))})))}},created:function(){var e=[];ae["Matomo"].postEvent("PrivacyManager.UsersOptOut.preface",e),this.prefaceComponents=e}});Qa.render=Ja;var Xa=Qa;
/*!
 * Matomo - free/libre analytics platform
 *
 * @link    https://matomo.org
 * @license https://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */}})}));
//# sourceMappingURL=PrivacyManager.umd.min.js.map